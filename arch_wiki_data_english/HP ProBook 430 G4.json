{
  "title": "HP ProBook 430 G4",
  "url": "https://wiki.archlinux.org/title/HP_ProBook_430_G4",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Note: **This article or section does not follow the Laptop page guidelines.** This article or section does not follow the Laptop page guidelines.\n\nThis article or section does not follow the Laptop page guidelines.\n\nTable content:\nHardware | PCI/USB ID | Working?\nGPU | 8086:5916 | Yes\nAudio | 8086:9d71 | Yes\nEthernet | 10ec:8168 | Yes\nWireless | 8086:24fd | Yes\nBluetooth | 8087:0a2a | Yes\nTouchpad | PS/2 | Yes\nCard reader | 10ec:522a | Yes\nWebcam |  | Yes\nFingerprint Reader | 138a:003f | No\n\n"
    },
    {
      "title": "Device information",
      "level": 2,
      "content": "This is a work in progress with information about the HP ProBook 430 G4. There are many configurations for these models of HP Probooks. The information below are given from a model HP ProBook 430 G4/822C, BIOS P85 Ver. 01.03 12/05/2016, shipped with a Core i5-7200U, 8GB, 256GB SSD. The notebook supports exchanging two memory modules and support one 2,5\" disc drive and one M.2-SSD. The UEFI bios allows legacy boot.\n\nA review in German is available here: HP ProBook 430 G4 review. Basic hardware works out of the box. No configuration was needed. Information for the \"Not tested\" units will be posted additionally.\n\n"
    },
    {
      "title": "Backlight",
      "level": 2,
      "content": "I have not found a solution so far to control the backlight via kernel hardware control keys via kernel. So backlight control works only via software. It works out of the box under Xfce and under i3wm using a custom command \"xbacklight -inc/-dec 10\".\n\n"
    },
    {
      "title": "ACPI errors",
      "level": 2,
      "content": "There are lots of acpi related error messages with kernel 4.9.x:\n\n```\nFeb 21 16:08:57 localhost kernel: ACPI Error: Field [CAP1] at 96 exceeds Buffer [NULL] size 64 (bits) (20160831/dsopcode-236)\nFeb 21 16:08:57 localhost kernel: ACPI Error: Method parse/execution failed [\\_SB._OSC] (Node ffff88041f8ef348), AE_AML_BUFFER_LIMIT (20\n...\nFeb 21 16:09:01 laptop64 kernel: ACPI Error: Needed [Buffer/String/Package], found [Integer] ffff88041b43f750 (20160831/exresop-594)\nFeb 21 16:09:01 laptop64 kernel: ACPI Exception: AE_AML_OPERAND_TYPE, While resolving operands for [OpcodeName unavailable] (20160831/ds\nFeb 21 16:09:01 laptop64 kernel: ACPI Error: Method parse/execution failed [\\_SB.WMIV.WVPO] (Node ffff88041f89bcd0), AE_AML_OPERAND_TYPE\nFeb 21 16:09:01 laptop64 kernel: ACPI Error: Method parse/execution failed [\\_SB.WMIV.WMPV] (Node ffff88041f89b780), AE_AML_OPERAND_TYPE\nFeb 21 16:09:01 laptop64 kernel: ACPI Error: Needed [Buffer/String/Package], found [Integer] ffff88041ce2e318 (20160831/exresop-594)\nFeb 21 16:09:01 laptop64 kernel: ACPI Exception: AE_AML_OPERAND_TYPE, While resolving operands for [OpcodeName unavailable] (20160831/ds\nFeb 21 16:09:01 laptop64 kernel: ACPI Error: Method parse/execution failed [\\_SB.WMIV.WVPO] (Node ffff88041f89bcd0), AE_AML_OPERAND_TYPE\nFeb 21 16:09:01 laptop64 kernel: ACPI Error: Method parse/execution failed [\\_SB.WMIV.WMPV] (Node ffff88041f89b780), AE_AML_OPERAND_TYPE\nFeb 21 16:09:01 laptop64 kernel: ACPI Error: Needed [Buffer/String/Package], found [Integer] ffff88041b43f900 (20160831/exresop-594)\nFeb 21 16:09:01 laptop64 kernel: ACPI Exception: AE_AML_OPERAND_TYPE, While resolving operands for [OpcodeName unavailable] (20160831/ds\nFeb 21 16:09:01 laptop64 kernel: ACPI Error: Method parse/execution failed [\\_SB.WMIV.WVPO] (Node ffff88041f89bcd0), AE_AML_OPERAND_TYPE\nFeb 21 16:09:01 laptop64 kernel: ACPI Error: Method parse/execution failed [\\_SB.WMIV.WMPV] (Node ffff88041f89b780), AE_AML_OPERAND_TYPE\nFeb 21 16:09:01 laptop64 kernel: input: HP WMI hotkeys as /devices/virtual/input/input18\nFeb 21 16:09:01 laptop64 kernel: ACPI Error: Attempt to CreateField of length zero (20160831/dsopcode-168)\nFeb 21 16:09:01 laptop64 kernel: ACPI Error: Method parse/execution failed [\\_SB.WMIV.WVPI] (Node ffff88041f89b280), AE_AML_OPERAND_VALU\nFeb 21 16:09:01 laptop64 kernel: ACPI Error: Method parse/execution failed [\\_SB.WMIV.WMPV] (Node ffff88041f89b780), AE_AML_OPERAND_VALU\n```\n\nUpstream report: https://bugzilla.kernel.org/show_bug.cgi?id=194833 - this seems to be a BIOS implementation bug.\n\n"
    },
    {
      "title": "Keyboard mapping",
      "level": 2,
      "content": "To avoid error messages appearing in the output of dmesg, add\n\n```\n/etc/udev/hwdb.d/99-hp_g430_g4.hwdb\n```\n\n```\n# HP ProBook 430 G4\nevdev:atkbd:dmi:bvn*:bvr*:bd*:svnHP:pnHPProBook430G4:pvr*\n KEYBOARD_KEY_f8=wlan                                   # Wireless HW switch button\n```\n\n"
    },
    {
      "title": "PCIe error in dmesg output",
      "level": 2,
      "content": "```\nFeb 21 16:08:58 localhost systemd-udevd[75]: Assertion '!d->current' failed at src/libsystemd/sd-event/sd-event.c:733, function event_un\n...\nFeb 21 16:09:01 laptop64 kernel: pcieport 0000:00:1d.0: PCIe Bus Error: severity=Corrected, type=Physical Layer, id=00e8(Receiver ID)\nFeb 21 16:09:01 laptop64 kernel: pcieport 0000:00:1d.0:   device [8086:9d18] error status/mask=00000001/00002000\nFeb 21 16:09:01 laptop64 kernel: pcieport 0000:00:1d.0:    [ 0] Receiver Error         (First)\n```\n\nThis one can be fixed with appending pci=noaer to the kernel parameter.\n\n"
    },
    {
      "title": "Fix cold boot hang",
      "level": 2,
      "content": "There seems to be some bug in i2c_i801 module implementation with HP notebooks. To fix system hang at cold boot add this module loading options and regenerate initrds.\n\n```\n/etc/modprobe.d/i2c_i801.conf\n```\n\n```\n# disable Host Notify + Interrupts\noptions i2c_i801 disable_features=0x30\n```\n\nSee https://www.spinics.net/lists/linux-i2c/msg33938.html for more.\n\n"
    }
  ]
}