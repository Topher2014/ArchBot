{
  "title": "Papermerge",
  "url": "https://wiki.archlinux.org/title/Papermerge",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Papermerge is an open source document management system for digital archives.\n\n"
    },
    {
      "title": "Installation",
      "level": 2,
      "content": "Install the papermerge-coreAUR package. Installation and updates of the package automatically run the database migrations.\n\n"
    },
    {
      "title": "Start",
      "level": 2,
      "content": "Start/enable papermerge-gunicorn.service and papermerge-worker.service Your papermerge instance should now be available at port 9001.\n\n"
    },
    {
      "title": "Configuration",
      "level": 2,
      "content": "For details on papermerge configuration, visit its official documentation. The main configuration file is located at /etc/papermerge.conf.py.\n\nDo not forget to restart papermerge-gunicorn.service and papermerge-worker.service after changing configurations.\n\n"
    },
    {
      "title": "Create admin user",
      "level": 3,
      "content": "After initial installation, you should create an admin user for your papermerge instance using the papermerge UNIX user:\n\n```\n[papermerge]$ papermerge-manage createsuperuser\n```\n\n"
    },
    {
      "title": "Nginx",
      "level": 3,
      "content": "Install Nginx and use the following configuration as a starting point for the papermerge virtual host:\n\n```\n/etc/nginx/sites-available/papermerge.domain.tld\n```\n\n```\nserver {\n    server_name papermerge.domain.tld;\n    listen 80;\n    listen [::]:80;\n\n    location /static/ {\n        alias /var/lib/papermerge/static/;\n    }\n\n    location /media/ {\n        alias /var/lib/papermerge/media/;\n    }\n\n    location / {\n        proxy_pass http://127.0.0.1:9001;\n    }\n}\n```\n\n"
    },
    {
      "title": "Redis",
      "level": 3,
      "content": "It is recommended to use Redis as a message broker instead of the default filesystem-based approach.\n\nInstall redis and python-redis and start/enable redis.service. In /usr/lib/python3.9/site-packages/config/settings/base.py replace\n\n```\n/usr/lib/python3.9/site-packages/config/settings/base.py\n```\n\n```\nCELERY_BROKER_URL = \"filesystem://\"\nCELERY_BROKER_TRANSPORT_OPTIONS = {\n    'data_folder_in': PAPERMERGE_TASK_QUEUE_DIR,\n    'data_folder_out': PAPERMERGE_TASK_QUEUE_DIR,\n}\n```\n\nwith\n\n```\n/usr/lib/python3.9/site-packages/config/settings/base.py\n```\n\n```\nCELERY_BROKER_URL = \"redis://\"\nCELERY_BROKER_TRANSPORT_OPTIONS = {}\nCELERY_RESULT_BACKEND = \"redis://localhost/0\"\n```\n\nand restart papermerge-gunicorn.service and papermerge-worker.service\n\n"
    }
  ]
}