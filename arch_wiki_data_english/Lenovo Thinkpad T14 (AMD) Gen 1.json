{
  "title": "Lenovo Thinkpad T14 (AMD) Gen 1",
  "url": "https://wiki.archlinux.org/title/Lenovo_Thinkpad_T14_(AMD)_Gen_1",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Table content:\nHardware | PCI/USB ID | Working?\nGPU |  | Yes\nWi-Fi |  | Yes\nBluetooth | 8087:0029 | Yes\nWebcam | 04f2:b6d0 | Yes\nTrackPoint |  | Yes\nTouchpad |  | Yes\nFingerprint reader | 06cb:00bd | Yes\nSmartcard reader | 058f:9540 | Yes\nMobile broadband |  | Yes\n\nThis article covers the installation and configuration of Arch Linux on a Lenovo Thinkpad T14 (AMD) Gen 1 laptop. Everything seems to work pretty much out the box with linux≥5.9.0.\n\nFor a general overview of laptop-related articles and recommendations, see Laptop.\n\n"
    },
    {
      "title": "Secure boot",
      "level": 3,
      "content": "As of January 2021 deleting Secure Boot keys and installing your own keys (for example by using KeyTool) will brick the device. This is a problem that is similar to one which has been reported on some other Lenovo laptops and is likely due to a faulty firmware. If the device is stuck in a boot loop after replacing the Secure Boot keys, the only way to repair it is by replacing the mainboard of the device. Hopefully, the issue will get fixed with a firmware update in the future.\n\n"
    },
    {
      "title": "Battery issues",
      "level": 3,
      "content": "In an ongoing Lenovo forums thread, there has been a discussion regarding battery drain issues in suspend/powered-off states. Presumably, laptops with AMD Renoir CPUs and relevant hardware are affected. As of now, BIOS firmware version 1.29 is suggested for use, as version 1.30 introduced significant battery drain; the battery loses up to 50% in 2-3 days while the laptop is in suspend mode.\n\nThere is also a suggestion that kernel updates could fix this behavior and that Lenovo and Canonical are working on it.\n\n"
    },
    {
      "title": "Keyboard",
      "level": 3,
      "content": "As of BIOS 1.35, keyboard event processing does not work correctly and can cause input problems with shortcuts involving the function key. Moreover, typing fast can lead to scrambled or missing keys which is caused by polling issues with the firmware.\n\n"
    },
    {
      "title": "Trackpad",
      "level": 3,
      "content": "As of BIOS 1.35, disabling the trackpad has no effect in Linux. In the graphical BIOS and in Windows, this function works as intended.\n\nSince kernel 5.18, there are some issue with the track pad after resume (left button not working anymore). A workaround is to set parameter synaptics_intertouch=0 to the module psmouse.\n\nIn a Lenovo forums thread, there has been a discussion regarding touchpad issue with Synaptics firmware PR3584089. Downgrading the version to PR2909640 solves this.\n\n"
    },
    {
      "title": "Time stamp counter",
      "level": 3,
      "content": "As of BIOS 1.35, the time stamp counter (TSC) can be unusable on a cold boot, as indicated by the following log output:\n\n```\n$ dmesg | grep -i tsc\n```\n\n```\n[    0.000000] tsc: Fast TSC calibration using PIT\n[    0.000000] tsc: Detected 1696.748 MHz processor\n[    0.160394] clocksource: tsc-early: mask: 0xffffffffffffffff max_cycles: 0x18752743c99, max_idle_ns: 440795215663 ns\n[    0.367627] clocksource: Switched to clocksource tsc-early\n[    1.393773] tsc: Refined TSC clocksource calibration: 1699.720 MHz\n[    1.393785] clocksource: tsc: mask: 0xffffffffffffffff max_cycles: 0x18801ecedab, max_idle_ns: 440795234673 ns\n[    1.394099] clocksource: Switched to clocksource tsc\n[    2.167096] clocksource: timekeeping watchdog on CPU3: Marking clocksource 'tsc' as unstable because the skew is too large:\n[    2.167106] clocksource:                       'tsc' cs_nsec: 506681426 cs_now: 78dfa3a69 cs_last: 75aa51b22 mask: ffffffffffffffff\n[    2.167109] clocksource:                       'tsc' is current clocksource.\n[    2.167119] tsc: Marking TSC unstable due to clocksource watchdog\n[    2.167132] TSC found unstable after boot, most likely due to broken BIOS. Use 'tsc=unstable'.\n[    2.167653] clocksource: Checking clocksource tsc synchronization from CPU 13 to CPUs 0,2,8-9,11-12,14-15.\n```\n\n"
    },
    {
      "title": "Renesas USB controller",
      "level": 3,
      "content": "As of BIOS 1.35, toggling the state of USB devices in the BIOS can cause the Renesas controller to fail. This will prevent the webcam from being initialized.\n\n"
    },
    {
      "title": "Docking stations",
      "level": 3,
      "content": "As of BIOS 1.35, video output is unrealiable on both USB3 and mechanical docking stations.\n\n"
    },
    {
      "title": "Webcam",
      "level": 3,
      "content": "Image quality can be improved by updating the webcam firmware. Unfortunately, webcam firmware updates are not shipped via LVFS. Some cameras firmwares can be possibly updated in Linux following steps.\n\n"
    },
    {
      "title": "Fingerprint sensor",
      "level": 2,
      "content": "The fingerprint sensor works with some recent firmware and software updates.\n\n1. Use fwupd to install the latest firmware for \"Synaptics Prometheus Fingerprint Reader\". The relevant firmwares are Prometheus Fingerprint Reader and Prometheus Fingerprint Reader Configuration.\n1. fprintd ≥ 1.90.1 and libfprint ≥ 1.90.1 are required.\n\nfprint has more details on how to setup the fingerprint, for PAM-based authentication for example.\n\nIf the fingerprint reader is not detected by fwupd but is detected by lsusb, you will need to reset the fingerprint reader in the BIOS.\n\n"
    },
    {
      "title": "Backlight",
      "level": 2,
      "content": "Backlight works correctly by manipulating the values, between 0-255, inside /sys/class/backlight/amdgpu_bl0/brightness or using a backlight managing utility.\n\n"
    },
    {
      "title": "Suspend",
      "level": 2,
      "content": "S3 suspend works when setting Config > Power > Sleep to Linux in the BIOS.\n\n"
    },
    {
      "title": "Hibernation",
      "level": 2,
      "content": "As of kernel 5.15.2, the system occasionally has issues with resuming from hibernate, resulting in missing or distorted video output.\n\n"
    },
    {
      "title": "Mobile broadband",
      "level": 2,
      "content": "Tested, works with xmm7360-pci (see Xmm7360-pci):\n\n```\n$ lspci | grep XMM\n```\n\n```\n05:00.0 Wireless controller [0d40]: Intel Corporation XMM7360 LTE Advanced Modem (rev 01)\n```\n\n"
    },
    {
      "title": "Smartcard reader",
      "level": 2,
      "content": "Install ccid, opensc and pcsc-tools packages and start pcscd.service. then you can use the pcsc_scan command to read the card informations.\n\nFor more information check out Smartcards.\n\n"
    },
    {
      "title": "Wireless",
      "level": 2,
      "content": "The onboard wireless card is Intel AX200 and it may have microcode issues when used as-is. A possible fix for Wi-Fi disconnects is turning on iwlwifi antenna aggregation on by creating a modprobe configuration:\n\n```\n/etc/modprobe.d/iwlwifi.conf\n```\n\n```\noptions iwlwifi 11n_disable=8\n```\n\nReboot afterwards. Look in Network configuration/Wireless#iwlwifi for details.\n\n"
    },
    {
      "title": "Microphone-LED",
      "level": 2,
      "content": "The LED of the microphone remains always on. As a workaround install the package alsa-utils and the LED should remain always off after a reboot. The microphone toggle itself should work anyway reliable.\n\n"
    },
    {
      "title": "Platform Profiles",
      "level": 2,
      "content": "Starting with kernel version 5.18, ACPI platform profiles work correctly on AMD ThinkPads and can be managed manually via sysfs(5) at /sys/firmware/acpi/platform_profile* or automatically via tlp. The following table shows power and thermal limits for the available profiles. The balanced profile is active by default.\n\nTable content:\nMode | STAPM (W) | PPT-FAST (W) | PPT-SLOW (W) | THM-CORE (°C) | STT_APU (°C) | FAN (rpm)\nlow-power | 11 | 11 | 11 | 70 | 45 | 3300\nbalanced | 20 | 20 | 15 | 86 | 45 | 4400\nperformance | 25 | 25 | 23 | 96 | 53 | 5000\n\n"
    },
    {
      "title": "Function keys",
      "level": 2,
      "content": "Table content:\nKey | Visible?1 | Marked?2 | Effect\nFn | Yes | No | XF86WakeUp\nFn+Esc | No | Yes | Toggles the Fn lock\nFn+F1 | Yes | Yes | XF86AudioMute\nFn+F2 | Yes | Yes | XF86AudioLowerVolume\nFn+F3 | Yes | Yes | XF86AudioRaiseVolume\nFn+F4 | Yes | Yes | XF86AudioMicMute\nFn+F5 | Yes | Yes | XF86MonBrightnessDown\nFn+F6 | Yes | Yes | XF86MonBrightnessUp\nFn+F7 | Yes | Yes | XF86Display\nFn+F8 | Yes | Yes | XF86WLAN\nFn+F9 | Yes | Yes | XF86NotificationCenter\nFn+F10 | Yes | Yes | XF86PickupPhone\nFn+F11 | Yes | Yes | XF86HangupPhone\nFn+F12 | Yes | Yes | XF86Favorites\nFn+End | Yes | No | Insert\nFn+4 | Yes | No | XF86Sleep\nFn+Tab | Yes | No | XF86FullScreen\nFn+s | Yes | No | Alt_L Alt_L+Sys_Req\nFn+d | No | No | Toggles the PrivacyGuard feature\nFn+k | Yes | No | Scroll_Lock\nFn+p | Yes | No | Pause\nFn+b | Yes | No | Pause\nFn+Right Shift | Yes | No | XF86FnRightShift\nFn+Space | No | Yes | Controls the keyboard backlight\nFn+Print | Yes | No | XF86SelectiveScreenshot\nFn+Left Arrow | Yes | No | Home\nFn+Right Arrow | Yes | No | End\n\n1. The key is visible to xev and similar tools\n1. The physical key has a symbol on it, which describes its function\n\n"
    },
    {
      "title": "See also",
      "level": 2,
      "content": "- Product Specifications Reference (PSREF)\n- Hardware maintenance manual\n- User guide\n- https://certification.ubuntu.com/hardware/202006-27980\n\n"
    }
  ]
}