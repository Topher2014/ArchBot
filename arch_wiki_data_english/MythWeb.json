{
  "title": "MythWeb",
  "url": "https://wiki.archlinux.org/title/MythWeb",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "MythWeb is a web interface for MythTV\n\n"
    },
    {
      "title": "Installation",
      "level": 2,
      "content": "Before installing MythWeb, first set up Apache with PHP as described in Apache HTTP Server and Apache HTTP Server#PHP.\n\nInstall the mythplugins-mythwebAUR package.\n\n"
    },
    {
      "title": "MythTV integration",
      "level": 3,
      "content": "MythWeb looks in the video_dir directory for MythTV recordings. Create a link to the folder where your MythTV recordings are stored:\n\n```\n# ln -s recording_dir /var/lib/mythtv/mythweb/video_dir\n```\n\n"
    },
    {
      "title": "MythWeb",
      "level": 3,
      "content": "Copy the MythWeb configuration file mythweb.conf to the Apache HTTP Server configuration directory.\n\n```\n# cp /var/lib/mythtv/mythweb/mythweb.conf.apache /etc/httpd/conf/extra/mythweb.conf\n```\n\nAnd include it at the bottom of /etc/httpd/conf/httpd.conf:\n\n```\nInclude conf/extra/mythweb.conf\n```\n\nIf you want to use MythWeb with the recent default mythweb.conf options enabled you will also need to uncomment the following lines in httpd.conf:\n\n```\nLoadModule rewrite_module modules/mod_rewrite.so\nLoadModule deflate_module modules/mod_deflate.so\n```\n\nYou will also need to enable CGI uncomment the following lines in httpd.conf:\n\n```\n<IfModule !mpm_prefork_module>\n        LoadModule cgid_module modules/mod_cgid.so\n</IfModule>\n<IfModule mpm_prefork_module>\n        LoadModule cgi_module modules/mod_cgi.so\n</IfModule>\n```\n\nEdit mythweb.conf to point it to the installation directory for mythweb (near the beginning of the file):\n\n```\n<Directory \"/srv/http/mythweb/data\">\n```\n\n```\n<Directory \"/srv/http/mythweb\" >\n```\n\nThen check that the configuration matches your MythTV setup. If you have changed the database login or password, you will need to change the following section. Double-check the following lines are uncommented in any case:\n\n```\nsetenv db_server        \"localhost\"\nsetenv db_name          \"mythconverg\"\nsetenv db_login         \"mythtv\"\nsetenv db_password      \"mythtv\"\n```\n\n"
    },
    {
      "title": "PHP",
      "level": 3,
      "content": "Edit the PHP configuration file /etc/php/php.ini\n\nUncomment the following lines in the Dynamic extensions section.\n\n```\nextension=mysqli\n```\n\nMake sure open_basedir contains /srv/http/ and /var/lib/mythtv/mythweb to allow file operation in the MythWeb directory. Starting with MythTV 0.23, you will also need to permit access to /usr/share/mythtv/.\n\n```\nopen_basedir = /srv/http/:/home/:/tmp/:/usr/share/pear/:/var/lib/mythtv/mythweb:/usr/share/mythtv/\n```\n\nEnable the allow_url_fopen option for MythWeb's status page to work.\n\n```\nallow_url_fopen = On\n```\n\n"
    },
    {
      "title": "Set rights for mythtv dir and create the link to mythweb",
      "level": 2,
      "content": "```\n# chmod 755 -R /var/lib/mythtv/\n# ln -s /var/lib/mythtv/mythweb /srv/http/\n```\n\n"
    },
    {
      "title": "Using MythWeb",
      "level": 2,
      "content": "You can now start the Apache daemon by starting the httpd.service systemd unit. mythbackend must already be running.\n\nOpen MythWeb in your browser.\n\n```\nhttp://localhost/mythweb\n```\n\n"
    },
    {
      "title": "Securing MythWeb",
      "level": 2,
      "content": "It is also probably a good idea to set up password protection for MythWeb, if you intend to allow connections from the Internet. To enable authentication uncomment the authentication section (near the beginning):\n\n```\n/etc/httpd/conf/extra/mythweb.conf\n```\n\n```\nAuthType           Digest\nAuthName           \"MythTV\"\nAuthUserFile       /var/www/htdigest\nRequire            valid-user\nBrowserMatch       \"MSIE\"      AuthDigestEnableQueryStringHack=On\nOrder              allow,deny\nSatisfy            any\n```\n\nNow, we need to fix the configuration to match the MythWeb set up, change the AuthUserFile to\n\n```\nAuthUserFile       /etc/httpd/conf/extra/httpd-passwords\n```\n\nIf you do not want to access MythWeb from IE, you can delete the BrowserMatch line.\n\nYou also probably do not want to have to enter your password when you are connecting from your local computer, so add the following line between the last two lines:\n\n```\nAllow from 127. 192.168.1.\n```\n\nThis will cause passwordless access from both your local machine and your local network (provided you are using the 192.168.1.0 255.255.255.0 subnet)\n\nThe configuration should now look something like:\n\n```\nAuthType           Digest\nAuthName           \"MythTV\"\nAuthUserFile       /etc/httpd/conf/extra/httpd-passwords\nRequire            valid-user\nOrder              allow,deny\nAllow from 127. 192.168.1.\nSatisfy            any\n```\n\nSave the file.\n\nNext, we will create the httpd-passwords file\n\n```\n# htdigest -c /etc/httpd/conf/extra/httpd-passwords MythTV myuser\n```\n\nWhere myuser is the username you want to use to access MythWeb. Enter the login password when prompted.\n\nIf you need more users, omit -c - otherwise you will overwrite the current file:\n\n```\n# htdigest /etc/httpd/conf/extra/httpd-passwords MythTV myuser2\n```\n\nNow all we need to do now is restart apache's httpd.service for the changes to take effect.\n\n"
    },
    {
      "title": "Troubleshooting",
      "level": 2,
      "content": "If you get a 403 Forbidden error, recheck your paths in mythweb.conf\n\nIf you can not start the apache service, and you get and error like this:\n\n```\n# journalctl -u httpd\n```\n\n```\n...\nAH00013: Pre-configuration failed\n...\n```\n\nComment out the following line in httpd.conf:\n\n```\nLoadModule mpm_event_module modules/mod_mpm_event.so\n```\n\nand use the prefork module instead:\n\n```\nLoadModule mpm_prefork_module modules/mod_mpm_prefork.so\n```\n\n"
    },
    {
      "title": "See also",
      "level": 2,
      "content": "- MythTV Wiki page on MythWeb\n\n"
    }
  ]
}