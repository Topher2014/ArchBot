{
  "title": "Pacstrap",
  "url": "https://wiki.archlinux.org/title/Pacstrap",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Note: **This article or section is a candidate for merging with DeveloperWiki:Building_in_a_clean_chroot#Classic_way.** This article or section is a candidate for merging with DeveloperWiki:Building_in_a_clean_chroot#Classic_way.\n\nThis article or section is a candidate for merging with DeveloperWiki:Building_in_a_clean_chroot#Classic_way.\n\nFrom the pacstrap(8):\n\n"
    },
    {
      "title": "Installation",
      "level": 2,
      "content": "Install arch-install-scripts\n\n"
    },
    {
      "title": "Creating a clean chroot",
      "level": 3,
      "content": "Currently, devtools only supports sudo. This can not be changed as devtools require the use of the complex functionality of sudo, which opendoas does not support. You can use Pacstrap to create a chroot manually.\n\nFirst, create the chroot directory:\n\n```\n# mkdir /var/chroot\n```\n\nThen, install the base system and base-devel (meta package containing tools which are used by the makepkg utility):\n\n```\n# pacstrap -K /var/chroot base base-devel\n```\n\nIf you have not mounted a partition to /var/chroot, you must bind the directory on itself to make it a mountpoint, therefore ensuring compatibility with arch-chroot.\n\n```\n# mount --bind /var/chroot /var/chroot\n```\n\nThen you can enter the chroot, using arch-chroot:\n\n```\n# arch-chroot /var/chroot\n```\n\nYou can not build arch pages as root, makepkg does not permit the use of the root, due to security concerns. Create a build user:\n\n```\n# useradd -m build\n```\n\nYou can then become the build user using the following command:\n\n```\n# su -l build\n```\n\nYou can now build any AUR package you wish by cloning them into the chroot, or use the chroot for testing and debugging of arch packages.\n\n"
    }
  ]
}