{
  "title": "Arch Linux Archive",
  "url": "https://wiki.archlinux.org/title/Arch_Linux_Archive",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Related articles\n\n- Downgrading packages\n\nThe Arch Linux Archive (a.k.a ALA), formerly known as Arch Linux Rollback Machine (a.k.a ARM), stores official repositories snapshots, iso images and bootstrap tarballs across time.\n\nYou can use it to:\n\n- Downgrade to a previous version of one package (last version is broken, I want the previous one)\n- Restore all your packages at a precise moment (my system is broken, I want to go back 2 months ago)\n- Find a previous version of an ISO image\n\nPackages are only kept for a few years, afterwards they are moved to the Arch Linux Historical Archive on archive.org.\n\n"
    },
    {
      "title": "Location",
      "level": 2,
      "content": "The Arch Linux Archive is available at https://archive.archlinux.org/ and mirrors around the globe.\n\nThe source code is also available for setting up your own mirror.\n\n"
    },
    {
      "title": "Directories",
      "level": 2,
      "content": "The Archive is split into 3 main directories detailed below.\n\n```\n├── iso\n├── packages\n└── repos\n```\n\n"
    },
    {
      "title": "/repos",
      "level": 3,
      "content": "The repos directory contains daily snapshots of official mirror organized by date like in the following example.\n\n```\nrepos\n├── 2013\n│   ├── 08\n│   │   └── 31\n│   │       ├── community\n│   │       ├── community-staging\n│   │       ├── community-testing\n│   │       ├── core\n│   │       ├── extra\n│   │       ├── gnome-unstable\n│   │       ├── kde-unstable\n│   │       ├── lastsync\n│   │       ├── multilib\n│   │       ├── multilib-staging\n│   │       ├── multilib-testing\n│   │       ├── pool\n│   │       ├── staging\n│   │       └── testing\n│   ├── 09\n│   │   ├── 01\n│   │   ├── 02\n│   │   ├── ...\n│   │   ├── 21\n│   │   └── 22\n│   ├── 10\n│   │   ├── 01\n│   │   ├── 02\n│   │   ├── ...\n│   │\n│   ├── 11\n│   └── 12\n├── 2014\n│   ├── 01\n│   │   ├── 01\n│   │   ├── 02\n│   │   ├── ...\n│   │\n│   ├── 02\n│   ├── 03\n│   ├── ...\n│   └── 09\n│       ├── 01\n│       ├── ...\n│       └── 28\n├── last\n├── month\n└── week\n```\n\nNote: The last 3 special directories (last, week and month) which links respectively to the last synced repository, to the last Monday and to the first of the current month.\n\n"
    },
    {
      "title": "/packages",
      "level": 3,
      "content": "The packages directory contains all versions of each package with their signatures. One directory by package and package directories are grouped by their first letter.\n\n```\n├── packages\n│   ├── a\n│   │   ├── awesome\n│   │   │   ├── awesome-4.3-2-x86_64.pkg.tar.zst\n│   │   │   ├── awesome-4.3-2-x86_64.pkg.tar.zst.sig\n│   │   │   ├── awesome-4.3-3-x86_64.pkg.tar.zst\n│   │   │   ├── awesome-4.3-3-x86_64.pkg.tar.zst.sig\n│   │   │   ├── ...\n│   │   │\n│   │   ├── ...\n│   │   ├── awstats\n│   │   └── axel\n│   │   \n│   ├── b\n│   ├── ...\n│   └── z\n```\n\nYou can use the magic subdirectory .all to access all packages by their name. It acts as a flat directory containing all versions of every package.\n\n```\n├── packages\n│   ├── .all\n│   │   ├── awesome-4.3-2-x86_64.pkg.tar.zst\n│   │   ├── ...\n│   │   ├── zsh-5.8-1-x86_64.pkg.tar.zst\n│   │   ├── zsh-5.8.1-1-x86_64.pkg.tar.zst\n│   │   └── ...\n```\n\nYou can download the full package list (there are over a hundred thousand packages) as a compressed index: index.0.xz.\n\n```\n$ curl https://archive.archlinux.org/packages/.all/index.0.xz | unxz\n```\n\n```\n0ad-a23.1-2-x86_64\n0ad-a23.1-3-x86_64\n...\nzziplib-0.13.69-1-x86_64\nzziplib-0.13.70-1-x86_64\n```\n\n"
    },
    {
      "title": "/iso",
      "level": 3,
      "content": "The iso directory contains official ISO images and bootstrap tarballs sorted by release date.\n\n```\n├── 2014.09.03\n├── 2014.10.01\n├── 2014.11.01\n├── 2014.12.01\n├── 2015.07.01\n├── 2015.08.01\n├── 2015.09.01\n└── 2017.04.01\n    ├── arch\n    ├── archlinux-2017.04.01-x86_64.iso\n    ├── archlinux-2017.04.01-x86_64.iso.sig\n    ├── archlinux-2017.04.01-x86_64.iso.torrent\n    ├── archlinux-bootstrap-2017.04.01-x86_64.tar.gz\n    ├── archlinux-bootstrap-2017.04.01-x86_64.tar.gz.sig\n    ├── md5sums.txt\n    └── sha1sums.txt\n```\n\n"
    },
    {
      "title": "How to downgrade one package",
      "level": 3,
      "content": "Find the package you want under /packages and let pacman fetch it for installation. For example:\n\n```\n# pacman -U https://archive.archlinux.org/packages/path/packagename.pkg.tar.zst\n```\n\nLetting pacman fetch it will automatically download the package's detached .sig file and verify it according to /etc/pacman.conf settings.\n\nAlternatively, download and install the package manually using pacman -U.\n\nSee also Downgrading packages#Automation for tools that simplify the process.\n\n"
    },
    {
      "title": "How to restore all packages to a specific date",
      "level": 3,
      "content": "To restore all packages to their version at a specific date, let us say 30 March 2014, you have to direct pacman to this date, by editing your /etc/pacman.conf and use the following server directive:\n\n```\n/etc/pacman.conf\n```\n\n```\n[core]\nSigLevel = PackageRequired\nServer=https://archive.archlinux.org/repos/2014/03/30/$repo/os/$arch\n\n[extra]\nSigLevel = PackageRequired\nServer=https://archive.archlinux.org/repos/2014/03/30/$repo/os/$arch\n```\n\nor by replacing your /etc/pacman.d/mirrorlist with the following content:\n\n```\n/etc/pacman.d/mirrorlist\n```\n\n```\n##                                                                              \n## Arch Linux repository mirrorlist                                             \n## Generated on 2042-01-01                                                      \n##\nServer=https://archive.archlinux.org/repos/2014/03/30/$repo/os/$arch\n```\n\nNote: **must** \n\nThen update the database and force downgrade:\n\n```\n# pacman -Syyuu\n```\n\nIf you get errors complaining about corrupted/invalid packages due to PGP signature, try to first update separately archlinux-keyring and ca-certificates. Alternatively, you can decide to temporarily disable signature checking altogether.\n\n"
    },
    {
      "title": "Historical Archive",
      "level": 2,
      "content": "Maintaining the Arch Linux Archive consumes significant amount of resources, so old packages are cleaned up from time to time.\n\nBefore removing them, old packages are uploaded to a dedicated collection \"Arch Linux Historical Archive\" on archive.org.\n\nThe Historical Archive does not provide a way to access a \"snapshot\" of Arch packages at a given point in time. However, there is a redirection on archive.archlinux.org so that downloads for old packages are redirected to the Historical Archive on archive.org. There should be no visible impact from the user side, except from the fact that archive.org is generally quite slow for downloading.\n\n"
    },
    {
      "title": "Finding packages in the Historical Archive",
      "level": 3,
      "content": "The Arch Linux Historical Archive collection has an index of all packages: https://archive.org/details/archlinuxarchive\n\nIt is also possible to directly access a package by its identifier. The general pattern for identifiers is archlinux_pkg_sanitized_package_name.\n\nTo obtain the sanitized package name, simply replace any @, + or . character in the package name by an underscore _.\n\nFor instance, the identifier for lucene++ is archlinux_pkg_lucene__.\n\nYou can then access the details page of a package via its identifier, for instance: https://archive.org/details/archlinux_pkg_lucene__.\n\nIt is also possible to run searches with the archive.org Python client:\n\n```\n$ ia search subject:\"archlinux package\" subject:'mysql'\n```\n\n```\n{\"identifier\": \"archlinux_pkg_ejabberd-mod_mysql\"}\n{\"identifier\": \"archlinux_pkg_ejabberd-mod_mysql-svn\"}\n{\"identifier\": \"archlinux_pkg_gambas3-gb-db-mysql\"}\n{\"identifier\": \"archlinux_pkg_gambas3-gb-mysql\"}\n{\"identifier\": \"archlinux_pkg_libgda-mysql\"}\n```\n\n"
    },
    {
      "title": "Downloading packages from the Historical Archive",
      "level": 3,
      "content": "All available package versions (and their signature) can be accessed via the download page of a package: https://archive.org/download/archlinux_pkg_lucene__.\n\nTo download, verify and install a package using pacman:\n\n```\n# pacman -U https://archive.org/download/archlinux_pkg_cjdns/cjdns-20.5-1-x86_64.pkg.tar.zst\n```\n\nPackage verification is controlled by pacman's RemoteFileSigLevel option. Note that if you use pacman, you have to figure out the dependencies yourself.\n\nIt is also possible to use the archive.org Python client.\n\nDownload a specific version of a package:\n\n```\n$ ia download archlinux_pkg_cjdns cjdns-20.5-1-x86_64.pkg.tar.zst{,.sig}\n```\n\nDownload all x86_64 versions of a package, with signatures:\n\n```\n$ ia download archlinux_pkg_cjdns --glob=\"*x86_64.pkg.tar.*\"\n```\n\n"
    },
    {
      "title": "History",
      "level": 2,
      "content": "- The original ARM (Archlinux Rollback Machine) was closed on 2013-08-18.[1]\n- It was then hosted on seblu.net since 2013-08-31.\n- New URL and closing the old ARM hierarchy on 2015-10-13. A new software, agetpkg-gitAUR was introduced.\n- Moved to archive.archlinux.org on 2015-12-19.[2]\n- Old packages from 2013-2016 uploaded to archive.org on 2018-06-05.\n\n"
    }
  ]
}