{
  "title": "OpenFOAM",
  "url": "https://wiki.archlinux.org/title/OpenFOAM",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "According to Wikipedia:\n\n"
    },
    {
      "title": "Installation",
      "level": 2,
      "content": "Note: **This article or section needs expansion.** This article or section needs expansion.\n\nThis article or section needs expansion.\n\n"
    },
    {
      "title": "Basic",
      "level": 3,
      "content": "If you do not plan on doing development tasks with OpenFOAM, there is an updated version of the program available as openfoam-orgAUR. For most users, this will be everything needed to get an installation up and running.\n\nOpenFOAM is installed in the /opt directory and provides a script in /etc/profile.d/ that allows to activate the OpenFOAM environment with the ofoam command (a shell alias).\n\n"
    },
    {
      "title": "Development",
      "level": 3,
      "content": "For installation of OpenFOAM in a development environment, the process is fairly straight forward on Arch Linux. The basic steps are as follows:\n\n1. Obtain source files from OpenFOAM\n1. Prepare build directory\n1. Create Preference File and Set Environment Variables for your installation\n1. Compile OpenFOAM sources\n1. Test OpenFOAM installation\n\n"
    },
    {
      "title": "Prerequisites",
      "level": 4,
      "content": "- openmpi\n- paraview\n- parmetisAUR\n- scotchAUR\n- boost-libs\n- boost\n\n"
    },
    {
      "title": "Obtain source files",
      "level": 4,
      "content": "Since OpenFoam is a picky about its location, create a directory following its naming convention and extract the source code there:\n\n```\n$ mkdir $HOME/OpenFOAM\n$ wget -P $HOME/OpenFOAM https://dl.openfoam.com/source/v2206/OpenFOAM-v2206.tgz\n$ tar -xvfz $HOME/OpenFOAM/OpenFOAM-v2206.tgz -C $HOME/OpenFOAM\n```\n\n"
    },
    {
      "title": "Environment variables",
      "level": 4,
      "content": "Paste the following code into your .bashrc file. Whenever you want to run OpenFOAM you just have to run of2206 to initialize the environment. This has to be done prior to compilation.\n\n```\n$ export FOAM_INST_DIR=\"$HOME/OpenFOAM\"\n$ alias of2206='source $FOAM_INST_DIR/OpenFOAM-v2206/etc/bashrc'\n```\n\n"
    },
    {
      "title": "Compilation",
      "level": 4,
      "content": "Run of2206 to initialize the environment. Use foamSystemCheck to check if all requirements are installed, then foam to change into the project directory. Then you can use the following command to compile:\n\n```\n$ ./Allwmake -j -s -q -l\n```\n\nThis compiles with all cores (-j), reduced output (-s, -silent), with queuing (-q, -queue) and logs (-l, -log) that can be inspected later.\n\n"
    },
    {
      "title": "Testing",
      "level": 4,
      "content": "To test for successful installation, run any test case, for example:\n\n```\n$ foamInstallationTest -full incompressible/simpleFoam/pitzDaily\n```\n\n"
    },
    {
      "title": "zsh",
      "level": 3,
      "content": "Some things do not work correctly if you are not using bash. In the case of using zsh, you will need the bash-completion package, and add the following to your zshrc for the OpenFOAM scripts to work:\n\n```\nzshrc\n```\n\n```\nautoload bashcompinit\nbashcompinit\nalias ofoam=\"source ${FOAM_INST_DIR}/OpenFOAM-10/etc/bashrc\"\n```\n\nThen add the following environment variables, preferably into a zshenv file:\n\n```\nzshenv\n```\n\n```\nexport FOAM_INST_DIR=/opt/OpenFOAM\nexport BASH=/bin/bash\n```\n\n"
    },
    {
      "title": "Paraview not installed",
      "level": 3,
      "content": "This happens because the dependencies are installed as separate packages, and not in the third-party apps directory of OpenFOAM. Either;\n\n- Add alias paraFoam='paraFoam -builtin' to your /opt/OpenFOAM/Open-FOAM-X.X/etc/bashrc.\n- For each project, touch $(echo \"${PWD##*/}\").foam and then open the touched file from paraview.\n\n"
    },
    {
      "title": "See also",
      "level": 2,
      "content": "- Official website\n\n"
    }
  ]
}