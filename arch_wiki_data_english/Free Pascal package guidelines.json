{
  "title": "Free Pascal package guidelines",
  "url": "https://wiki.archlinux.org/title/Free_Pascal_package_guidelines",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "32-bit – CLR – CMake – Cross – DKMS – Eclipse – Electron – Font – Free Pascal – GNOME – Go – Haskell – Java – KDE – Kernel modules – Lisp – Meson – MinGW – Node.js – Nonfree – OCaml – Perl – PHP – Python – R – Ruby – Rust - Security – Shell – VCS – Web – Wine\n\nThis page explains on how to write PKGBUILDs for software built with the Free Pascal Compiler (FPC). Compiling for x86_64 Arch Linux requires the fpc package.\n\n"
    },
    {
      "title": "Package naming",
      "level": 3,
      "content": "The project name alone is usually sufficient. However, in the case of cross-compiling, the package should be prefixed with fpc32- when targeting i686 Linux from multilib and named in the format of fpc-cpu-system-pkgname when targeting non-Arch Linux systems.\n\n"
    },
    {
      "title": "Helpful snippets",
      "level": 3,
      "content": "Determine FPC's version and the CPU and OS of the units to output:\n\n```\n_unitdir=`fpc -iSP`-`fpc -iSO`\n_fpcver=`fpc -iV`\n```\n\n"
    },
    {
      "title": "Packaging",
      "level": 3,
      "content": "Please adhere to the following when making an FPC-based package:\n\n- always add fpc to either makedepends or depends\n- always put all compiled units (*.a, *.compiled, *.o, *.ppu, *.res, *.rsj) under /usr/lib/fpc/$_fpcver/units/$arch-linux\n- add staticlibs to options if installing an import library\n\n"
    },
    {
      "title": "Cross compiling",
      "level": 4,
      "content": "- always add the corresponding cross compiler package mentioned above (fpc-cpu-system-rtl) to depends\n- always add !strip to options for non-Unix-based systems\n- always put all compiled units (*.a, *.compiled, *.o, *.ppu, *.res, *.rsj) under /usr/lib/fpc/$_fpcver/units/$_unitdir (or if multilib, /usr/lib/fpc/$_fpcver/units/i386-linux)\n- always use any (x86_64 if multilib) as the architecture\n- add staticlibs to options if installing an import library\n\n"
    }
  ]
}