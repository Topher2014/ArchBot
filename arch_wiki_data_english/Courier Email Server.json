{
  "title": "Courier Email Server",
  "url": "https://wiki.archlinux.org/title/Courier_Email_Server",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Note: **This article or section is a candidate for merging with Courier Mail Server.** This article or section is a candidate for merging with Courier Mail Server.\n\nThis article or section is a candidate for merging with Courier Mail Server.\n\nThis is a small howto on how to install an imap-Server with Courier-Imap, SSL-Encryption and grabbing all the other mail-accounts with fetchmail. Procmail is responsible for delivering the Mails to the different Users.\n\nYou can fetch your Mail from this IMAP-Server with every Mail-Client capable of communicating with IMAP.\n\nFor testing purposes you should create your own email-account, e.g. www.gmx.de.\n\nFor more complex setup see Creating a Linux Mail Server (Postfix, Procmail, Fetchmail, SpamBayes, Courier-imap, Mutt, SquirrelMail)\n\n"
    },
    {
      "title": "Installation",
      "level": 2,
      "content": "Install fetchmail, procmailAUR, and courier-imapAUR.\n\n"
    },
    {
      "title": "Using fetchmail",
      "level": 3,
      "content": "Just make .fetchmailrc in your home-directory and add the following lines:\n\n```\npoll pop.gmx.de with proto POP3\n user \"username\" there with password \"passwd\" is \"morphus\" here\nmda \"/usr/bin/procmail -d %s\"\n```\n\n- username - Your username on the pop3-server\n- passwd - Your password on the pop3-server\n- morphus - Your local account where the mail belongs to\n\n"
    },
    {
      "title": "Using procmail",
      "level": 3,
      "content": "Create and edit .procmailrc in your home-directory\n\n```\nPATH=$HOME/bin:/usr/bin:/bin:/usr/local/bin:.\nMAILDIR=$HOME/Maildir/\nDEFAULT=$HOME/Maildir/\nLOGFILE=$MAILDIR/procmail.log\n```\n\nNow secure your .fetchmailrc since they contain passwords\n\n```\nchmod 600 .fetchmailrc\n```\n\n"
    },
    {
      "title": "First Try with procmail and fetchmail working together",
      "level": 3,
      "content": "Send some bulk-mails to your test-account. Then run\n\n```\nfetchmail -av\n```\n\nFetchmail echos the communication with the pop-Server and after the run finished you should find some files in your Mail-Folder with the Mails.\n\n"
    },
    {
      "title": "Configuring Courier Imap",
      "level": 3,
      "content": "Run the command\n\n```\nmaildirmake Maildir\n```\n\nwith each user you want to have an imap-account\n\nStart/enable courier-imapd.service.\n\nYou should be able to connect from your console with telnet like this:\n\n```\n[morphus@spielemorph ~]$ telnet 192.168.6.1 143\n```\n\n```\nTrying 192.168.6.1...\nConnected to 192.168.6.1.\nEscape character is '^]'.\n* OK [CAPABILITY IMAP4rev1 UIDPLUS CHILDREN NAMESPACE THREAD=ORDEREDSUBJECT\n THREAD{{ic|REFERENCES SORT QUOTA IDLE ACL ACL2}}UNION STARTTLS] Courier-IMAP ready.\nCopyright 1998-2004 Double Precision, Inc.  See COPYING for distribution information.\n1 login morphus passwd\n1 OK LOGIN Ok.\n```\n\nThis means everything is okay and you can connect. Your mail should be delivered to this Maildirectory and you should be able to connect with any imap-capable program.\n\n"
    },
    {
      "title": "Doing some cron-jobs",
      "level": 3,
      "content": "Just add the fetchmail -av command to the users cron-list, e.g. every 10 minutes it should grep the emails\n\n```\n'/10 ' ' ' * /usr/bin/fetchmail -av\n```\n\n"
    }
  ]
}