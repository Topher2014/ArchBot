{
  "title": "Postorius",
  "url": "https://wiki.archlinux.org/title/Postorius",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Postorius is a Django based management interface for Mailman.\n\n"
    },
    {
      "title": "Installation",
      "level": 2,
      "content": "To use Postorius, a working web server setup is required (e.g. using Apache HTTP Server to forward to the WSGI directly, or using Nginx forwarding requests to an application server such as UWSGI).\n\nInstall the postorius package.\n\n"
    },
    {
      "title": "Configuration",
      "level": 2,
      "content": "The web application is hosted on Django and is almost entirely configured through it: the web application is configured in /etc/webapps/postorius/settings_local.py which is included by the default configuration in /usr/share/webapps/postorius/settings.py.\n\nChange the default secret for the application:\n\n```\n/etc/webapps/postorius/settings_local.py\n```\n\n```\nSECRET_KEY = 'something-very-secret'\n```\n\nMake sure to disable debugging when running in production:\n\n```\n/etc/webapps/postorius/settings_local.py\n```\n\n```\nDEBUG = False\n```\n\nTo be able to configure a running mailman instance configuration options for its REST API have to be added to postorius' configuration.\n\n```\n/etc/webapps/postorius/settings_local.py\n```\n\n```\nMAILMAN_REST_API_URL = 'http://localhost:8001'\nMAILMAN_REST_API_USER = 'rest_admin'\nMAILMAN_REST_API_PASS = 'rest_admin_password'\n```\n\nAdd a valid email configuration (so that the Django application can verify subscribers):\n\n```\n/etc/webapps/postorius/settings_local.py\n```\n\n```\nEMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'\nEMAIL_HOST = 'localhost'\nEMAIL_PORT = 25\nEMAIL_HOST_USER = username\nEMAIL_HOST_PASSWORD = password\n```\n\nThe valid hosts or domain names for the application need to be defined:\n\n```\n/etc/webapps/postorius/settings_local.py\n```\n\n```\nALLOWED_HOSTS = [\n    'localhost',\n    'lists.example.com'\n]\n```\n\n"
    },
    {
      "title": "Hosting",
      "level": 2,
      "content": "Note: **This article or section needs expansion.** This article or section needs expansion.\n\nThis article or section needs expansion.\n\n"
    },
    {
      "title": "Nginx and uWSGI",
      "level": 3,
      "content": "Postorius comes with a working uWSGI configuration file in /etc/uwsgi/postorius.ini.\n\nInstall nginx and uwsgi-plugin-python, create a per-application socket for uWSGI (see UWSGI#Accessibility of uWSGI socket for reference) and enable uwsgi-secure@postorius.socket.\n\nFor a local test setup, serving Postorius at http://127.0.0.1:80/postorius add the following Nginx configuration to your setup:\n\n```\n/etc/nginx/postorius.conf\n```\n\n```\nserver {\n  listen 80;\n  server_name localhost;\n  charset utf-8;\n  client_max_body_size 75M;\n  root /usr/share/webapps/postorius;\n  access_log /var/log/nginx/access.postorius.log;\n  error_log /var/log/nginx/error.postorius.log;\n\n  location /postorius_static {\n    alias /var/lib/postorius/static;\n  }\n\n  location ~^/(accounts|admin|postorius)/(.*)$ {\n    include /etc/nginx/uwsgi_params;\n    uwsgi_pass unix:/run/postorius/postorius.sock;\n  }\n}\n```\n\n"
    },
    {
      "title": "Setup",
      "level": 2,
      "content": "After first installation make sure to generate a database:\n\n```\n[postorius]$ django-admin migrate --pythonpath /usr/share/webapps/postorius/ --settings settings\n```\n\nAfterwards, the static data for the application needs to be collected:\n\n```\n[postorius]$ django-admin collectstatic --pythonpath /usr/share/webapps/postorius/ --settings settings\n```\n\nCreate a superuser account for the Django application:\n\n```\n[postorius]$ django-admin createsuperuser --pythonpath /usr/share/webapps/postorius/ --settings settings\n```\n\n"
    },
    {
      "title": "Set an Alias Domain",
      "level": 3,
      "content": "To use a domain in a virtual alias domain setup with with postfix it is necessary to set the domain's Alias Domain. The domain name does not have to exist.\n\nTo set the Alias Domain, log in using the admin user (i.e. postorius by default) and alter the domain's settings it in the Domains menu.\n\n"
    },
    {
      "title": "See also",
      "level": 2,
      "content": "- Postorius Documentation - The upstream documentation\n- Mailman Suite Documentation - The (high level) upstream documentation for the entire Mailman Suite (Mailman, Hyperkitty and Postorius)\n\n"
    }
  ]
}