{
  "title": "Diretrizes de pacotes R",
  "url": "https://wiki.archlinux.org/title/Diretrizes_de_pacotes_R",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "32-bit – CLR – CMake – Cross – DKMS – Eclipse – Electron – Fonte – Free Pascal – GNOME – Go – Haskell – Java – KDE – Kernel – Lisp – Meson – MinGW – Node.js – Nonfree – OCaml – Perl – PHP – Python – R – Ruby – Rust – Shell – VCS – Web – Wine\n\nEste documento abrange padrões e diretrizes para escrever PKGBUILDs para pacotes R. A maioria das informações pode ser obtida consultando o arquivo DESCRIPTION do pacote. Você pode obter a maior parte de dentro do R executando tools::CRAN_package_db().\n\n"
    },
    {
      "title": "Nomenclatura de pacote",
      "level": 2,
      "content": "Pacotes devem ser nomeados r-pkgname, sendo pkgname retirado do campo Package do arquivo DESCRIPTION. O nome do pacote deve estar em letras minúsculas.\n\n"
    },
    {
      "title": "Versão de pacote",
      "level": 2,
      "content": "Pegue no campo Version. R permite que os pacotes tenham dois pontos e hífenes em sua versão, isso não é permitido em PKGBUILDs. Converta estes para um período ou sublinhado.\n\n"
    },
    {
      "title": "Arch",
      "level": 2,
      "content": "Veja PKGBUILD (Português)#arch. Se a página web do CRAN do pacote tiver NeedsCompilation: yes, é provável que seja específico da arquitetura. Caso contrário, é provável que não.\n\n"
    },
    {
      "title": "Dependências",
      "level": 2,
      "content": "Os pacotes R listados nos campos Depends, Imports ou LinkingTo no arquivo DESCRIPTION de um pacote devem ser listados em depends.\n\nOs pacotes R listados em Suggests devem ser listados como optdepends.\n\nAlguns pacotes requerem ferramentas externas, estas estão listadas em SystemRequirements.\n\nO gcc-fortran é necessário como makedepends para alguns pacotes, mas nem sempre é listado no arquivo DESCRIPTION.\n\n"
    },
    {
      "title": "Fonte",
      "level": 2,
      "content": "Todos os pacotes R disponíveis no CRAN estão disponíveis no site https://cran.r-project.org/src/contrib/cranname_cranversion.tar.gz, sendo cranname o nome do pacote no CRAN e cranversion a versão cran.\n\n"
    },
    {
      "title": "Compilação e empacotamento",
      "level": 2,
      "content": "R tem suporte embutido para compilar pacotes, nós só precisamos instalar e copiar o pacote compilado depois:\n\n```\nbuild(){\n     R CMD INSTALL pkg.tar.gz -l \"$srcdir\"\n }\n package() {\n     install -dm0775 \"$pkgdir\"/usr/lib/R/library\n     cp -a --no-preserve=ownership pkgname \"$pkgdir\"/usr/lib/R/library\n }\n```\n\n"
    },
    {
      "title": "RcppEigen",
      "level": 3,
      "content": "```\npkgname=r-rcppeigen\npkgver=0.3.3.4.0\npkgrel=1\npkgdesc=\"Rcpp Integration for the Eigen Templated Linear Algebra Library\"\narch=('x86_64')\nurl=\"https://cran.r-project.org/package=RcppEigen\"\nlicense=('GPL')\ndepends=('r' 'r-rcpp')\noptdepends=('r-inline' 'r-runit' 'r-pkgkitten')\nsource=(\"https://cran.r-project.org/src/contrib/RcppEigen_$pkgver.tar.gz\")\nmd5sums=('78ee1ef7c6043efa875434ae5fcea2ec')\n\nbuild(){\n    R CMD INSTALL RcppEigen_\"$pkgver\".tar.gz -l \"$srcdir\"\n}\npackage() {\n    install -dm0755 \"$pkgdir\"/usr/lib/R/library\n    cp -a --no-preserve=ownership RcppEigen \"$pkgdir\"/usr/lib/R/library\n}\n```\n\n"
    },
    {
      "title": "XML",
      "level": 3,
      "content": "Um exemplo em que o pacote R possui caracteres não permitidos no pkgver:\n\n```\n_cranver=3.98-1.11\npkgname=r-xml\npkgver=${_cranver//[:-]/.}\npkgrel=1\npkgdesc='Tools for Parsing and Generating XML Within R and S-Plus'\narch=('x86_64')\nurl='https://cran.r-project.org/package=XML'\nlicense=('BSD')\ndepends=('r' 'libxml2')\noptdepends=('r-bitops' 'r-rcurl')\nreplaces=('r-cran-xml')\nsource=(\"https://cran.r-project.org/src/contrib/XML_$_cranver.tar.gz\")\nmd5sums=('6c67f5730ada3456372520773a920b8e')\n\nbuild(){\n    R CMD INSTALL XML_\"$_cranver\".tar.gz -l \"$srcdir\"\n}\npackage() {\n    install -dm0755 \"$pkgdir\"/usr/lib/R/library\n    cp -a --no-preserve=ownership XML \"$pkgdir\"/usr/lib/R/library\n}\n```\n\n"
    }
  ]
}