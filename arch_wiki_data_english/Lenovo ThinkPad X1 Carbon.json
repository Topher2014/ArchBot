{
  "title": "Lenovo ThinkPad X1 Carbon",
  "url": "https://wiki.archlinux.org/title/Lenovo_ThinkPad_X1_Carbon",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Note: **This article or section does not follow the Laptop page guidelines.** This article or section does not follow the Laptop page guidelines.\n\nThis article or section does not follow the Laptop page guidelines.\n\nLenovo ThinkPad X1 Carbon (X1C). There is also a touch version. Comes without optical drive. Has UEFI BIOS with BIOS-legacy fallback mode.\n\n"
    },
    {
      "title": "Legacy-BIOS",
      "level": 3,
      "content": "Boot into your BIOS and change the boot mode to Legacy. Then simply follow the normal installation guide.\n\n"
    },
    {
      "title": "Hanging on \"HWP enabled\" message",
      "level": 3,
      "content": "This is due to a bug introduced in Linux 4.4. To work around it, add intel_pstate=no_hwp to your kernel parameters.\n\n"
    },
    {
      "title": "Hardware",
      "level": 2,
      "content": "Almost everything works out of the box.\n\n"
    },
    {
      "title": "Audio",
      "level": 3,
      "content": "Sound works out of the box.\n\n"
    },
    {
      "title": "Xbindkeys",
      "level": 4,
      "content": "For alternative window managers (Fluxbox, etc..), try installing xbindkeys and adding the following to ~/.xbindkeysrc:\n\n```\n\"amixer -c 0 set Master 1dB-\"\n  XF86AudioLowerVolume\n\"amixer -c 0 set Master 1dB+\"\n  XF86AudioRaiseVolume\n```\n\n"
    },
    {
      "title": "Network",
      "level": 3,
      "content": "Wired networking works out of the box with the Ethernet to USB adapter. Wireless works out of the box using the iwlwifi module.\n\n```\n$ lspci\n```\n\n```\nNetwork controller: Intel Corporation Centrino Advanced-N 6205 [Taylor Peak] (rev 96)\n```\n\n"
    },
    {
      "title": "Touchscreen",
      "level": 3,
      "content": "Works out of the box. To enable multi-touch, install Touchegg.\n\n"
    },
    {
      "title": "Video",
      "level": 3,
      "content": "The video card installed is Intel HD Graphics 4000. See intel for more info.\n\n"
    },
    {
      "title": "Brightness control",
      "level": 4,
      "content": "Default brightness adjustment keys work but need to be pressed multiple times to increase/decrease the screen brightness. Use either the #Xbindkeys_2 or #ACPI methods to fix this.\n\nSome desktop environments may lack granularity while changing brightness. This is due to the DE (e.g. gnome-settings-daemon) along with the internal graphics module changing the brightness when brightness adjustment keys are pressed causing multiple steps per press. To work around this add the kernel parameter video.brightness_switch_enabled=0.\n\nInstall xbindkeys and append the following to ~/.xbindkeysrc:\n\n```\n\"xbacklight -dec 5\"\n  XF86MonBrightnessDown\n\"xbacklight -inc 5\"\n  XF86MonBrightnessUp\n```\n\nWriting custom ACPI handlers for the brightness adjustment keys seems to have no effect. In order to use them properly you need to add the kernel parameter acpi_osi=\"!Windows 2012\". See also Backlight#ACPI. Note that the ACPI backlight is disabled by default on Windows 8 hardware with a native backlight. Consider using the #Xbindkeys approach instead.\n\n"
    },
    {
      "title": "Wrong EDID for external display",
      "level": 4,
      "content": "With certain connectors (e.g. MiniDP to VGA), there is a bug getting EDID for the external screen while booting:\n\n```\n[ 93.736330] [drm:intel_dp_i2c_aux_ch] *ERROR* too many retries, giving up\n```\n\nThis does not occur if the external screen is connected after booting.\n\nThe correct mode can be added per xrandr#Adding undetected resolutions:\n\n```\nxrandr --newmode 1920x1200_60 154 1920 1968 2000 2080 1200 1203 1209 1235 -hsync +vsync\nxrandr --addmode DP1 1920x1200_60\nxrandr --output DP1 --mode 1920x1200_60\n```\n\n"
    },
    {
      "title": "KMS",
      "level": 3,
      "content": "Enable KMS using the i915 module and by enabling VT in BIOS.\n\n"
    },
    {
      "title": "Webcam",
      "level": 3,
      "content": "Works out of the box. Tested with guvcview\n\n"
    },
    {
      "title": "Fingerprint Reader",
      "level": 3,
      "content": "Works out of the box with Fprint.\n\nFor a GUI, fingerprint-guiAUR is already patched to work with the X1's newer fingerprint reader. To get the gui's dropdown to recognize your device, you will have to add your user to the plugdev group:\n\n```\n$ gpasswd -a <username> plugdev\n```\n\nSee fingerprint-gui for more information about config\n\n```\n$ lsusb\n```\n\n```\n147e:2020 Upek TouchChip Fingerprint Coprocessor (WBF advanced mode)\n```\n\n"
    },
    {
      "title": "WWAN (Mobile broadband)",
      "level": 3,
      "content": "This model includes a Ericsson H5321gw adapter that can be used as a mobile broadband adapter and GPS.\n\nThe SIM-card must be inserted in the back of the laptop.\n\nAdd text to the following file and reboot\n\n```\n/etc/modprobe.d/avoid-mbib.conf\n```\n\n```\noptions cdc_ncm prefer_mbim=N\n```\n\nTested OK with NetworkManager with modemmanager installed\n\n```\n$ lsusb\n```\n\n```\n0bdb:1926 Ericsson Business Mobile Networks BV\n```\n\n"
    },
    {
      "title": "GPS",
      "level": 3,
      "content": "Install gpsd and mbm-gpsd-gitAUR. Add this to the following file\n\n```\n/etc/udev/rules.d/99-mbm.rules\n```\n\n```\nATTRS{idVendor}==\"0bdb\", ATTRS{idProduct}==\"1926\", ENV{ID_USB_INTERFACE_NUM}==\"09\", ENV{MBM_CAPABILITY}=\"gps_nmea\"\nATTRS{idVendor}==\"0bdb\", ATTRS{idProduct}==\"1926\", ENV{ID_USB_INTERFACE_NUM}==\"03\", ENV{MBM_CAPABILITY}=\"gps_ctrl\"\n```\n\nReboot to reload udev rules.\n\nRun\n\n```\n# mbm-gpsd\n```\n\nSee if there is GPS-output\n\n```\n$ cat /dev/gps0\n```\n\nRun\n\n```\n# gpsd -b -N /dev/gps0\n```\n\nTo test it\n\n```\n$ xgps\n```\n\nOr use e.g. foxtrotgpsAUR in AUR.\n\nSee this link for more info.\n\n```\n$ lsusb\n```\n\n```\n0bdb:1926 Ericsson Business Mobile Networks BV\n```\n\n"
    },
    {
      "title": "Keyboard backlight",
      "level": 3,
      "content": "Works out of the box. Use FN+Space\n\n"
    },
    {
      "title": "Bluetooth",
      "level": 3,
      "content": "First try to set up Bluetooth normally. If you get kernel error messages:\n\n```\nkernel: bluetooth hci0: Direct firmware load for brcm/BCM20702A1-0a5c-21e6.hcd failed with error -2\nkernel: Bluetooth: hci0: BCM: Patch brcm/BCM20702A1-0a5c-21e6.hcd not found\n```\n\nYou need to manually install the proprietary firmware. The slackware wiki describes one way to do this: https://www.slackwiki.com/Btfirmware-nonfree[dead link 2025-03-15 â“˜].\n\n"
    },
    {
      "title": "Mouse/Touchpad",
      "level": 3,
      "content": "Works out of the box. See TrackPoint for additional details.\n\n"
    },
    {
      "title": "Docking",
      "level": 3,
      "content": "This model has no docking port.\n\nVideo for USB 3 Docking Stations currently is not supported, so you must use a USB Port Replicator with Digital Video (USB 2.0)\n\nThis supports:\n\n- USB-devices connected to dock\n- Audio\n- Microphone\n- Ethernet\n- Video (see DisplayLink)\n\n"
    },
    {
      "title": "See also",
      "level": 2,
      "content": "- Installing and configuring Arch Linux on ThinkPad X1 Carbon\n- https://www.thinkwiki.org/wiki/ThinkWiki\n\n"
    }
  ]
}