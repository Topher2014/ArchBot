{
  "title": "Dell XPS 16 (9640)",
  "url": "https://wiki.archlinux.org/title/Dell_XPS_16_(9640)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Table content:\nHardware | PCI/USB ID | Working?\nTouchpad | 04f3:311c | Yes\nTouch screen |  | Yes\nKeyboard |  | Yes\nGPU (Intel Arc) | 8086:7d55 | Yes\nGPU (NVIDIA RTX 4060) | 10de:28a0 | Yes\nWebcam | 8086:7d19 | No\nBluetooth |  | Yes\nSD Card reader | 10ec:5260 | Yes\nAudio | 8086:7e28 | Yes\nWireless | 8086:272b | Yes\nFingerprint reader | 27c6:633c | Yes\nTPM |  | Yes\n\nThe Dell XPS 16 (9640) is an Intel Meteor Lake based laptop computer released in 2024.\n\n"
    },
    {
      "title": "Installation",
      "level": 2,
      "content": "The following settings need to be modified in the UEFI setup. The setup menu can be accessed by pressing F12 repeatedly after powering on.\n\n- Change the SATA Mode from the default \"RAID\" to \"AHCI\". This will allow Linux to detect the NVMe SSD. If dual booting with an existing Windows installation, Windows will not boot after the change but this can be fixed without a re-installation.\n- Disable Secure Boot to allow Linux to boot. Alternatively, you can choose to set up Secure Boot so that it works with Linux and you can take advantage of its potential security benefits.\n\nInstallation of Arch Linux can proceed normally. Refer to the Installation guide for more information.\n\n"
    },
    {
      "title": "Accessibility",
      "level": 2,
      "content": "Navigating the Dell UEFI menus requires using the trackpad or a mouse.\n\nThis computer also has a LED at the top of the keyboard that can be used for diagnosis. See the user manual.\n\n"
    },
    {
      "title": "fwupd",
      "level": 3,
      "content": "The firmware can be updated on Linux. See fwupd.\n\n"
    },
    {
      "title": "UEFI",
      "level": 3,
      "content": "Firmware images can be found at Dell support page as XPS_16_9640_X.Y.Z.exe files.\n\nIn order to install:\n\n- Download the desired firmware from the \"Dell XPS 16 9640 System BIOS\" section\n- Save it in a FAT32 formated volume (either the EFI system partition or a USB flash drive will work)\n- Reboot the system and enter the boot menu by pressing repeatedly F12\n- Choose \"Bios Flash Update\"\n- Select the file previously saved, and start the process\n\nThe process will take some time, with the fans running at maximum speed. The system will reboot at the end.\n\n"
    },
    {
      "title": "Function keys",
      "level": 2,
      "content": "This computer uses a touchbar for function keys instead of physical keys, but the operation is identical to a real keyboard.\n\nTable content:\nKey | Visible?1 | Marked?2 | Effect\nFn+Esc | No | Yes | Enable Fn lock\nFn+F1 | Yes | Yes | XF86AudioMute\nFn+F2 | Yes | Yes | XF86AudioLowerVolume\nFn+F3 | Yes | Yes | XF86AudioRaiseVolume\nFn+F4 | Yes | Yes | XF86AudioMicMute\nFn+F5 | No | Yes | XF86AudioPlay\nFn+F6 | Yes | Yes | Change keyboard backlight\nFn+F7 | Yes | Yes | XF86MonBrightnessDown\nFn+F8 | Yes | Yes | XF86MonBrightnessUp\nFn+F9 | Yes | Yes | Super+p\nFn+F10 | Yes | Yes | PrintScreen\nFn+F11 | Yes | Yes | Home\nFn+F12 | Yes | Yes | End\nFn+Up | Yes | Yes | PageUp\nFn+Down | Yes | Yes | PageDown\nFn+Left | Yes | No | Home\nFn+Right | Yes | No | End\nFn+Copilot | Yes | Yes | Menu\n\n1. The key is visible to xev and similar tools\n1. The physical key has a symbol on it, which describes its function\n\n"
    },
    {
      "title": "Suspend and hibernate",
      "level": 3,
      "content": "See Power management/Suspend and hibernate.\n\nOnly the s2idle suspend variant is supported.\n\n"
    },
    {
      "title": "TLP",
      "level": 3,
      "content": "If using TLP, the following parameters can be set by editing its configuration file located in /etc/tlp.conf.\n\nEnable runtime power management for PCIe devices:\n\n```\nRUNTIME_PM_ON_AC=auto\nRUNTIME_PM_ON_BAT=auto\n```\n\nEnabling USB autosuspend can cause trouble with some USB Ethernet devices. It can be disabled like so:\n\n```\nUSB_AUTOSUSPEND=0\n```\n\n"
    },
    {
      "title": "Powertop",
      "level": 3,
      "content": "powertop can also be used to manage power. Run powertop --auto-tune to automatically set it up.\n\nIt can then be started at boot time, see Powertop#Apply settings.\n\n"
    },
    {
      "title": "thermald",
      "level": 3,
      "content": "Usage of thermald will dramatically increase the performance of the CPU under load.\n\n"
    },
    {
      "title": "Intel Arc graphics",
      "level": 3,
      "content": "The GPU is also supported by the experimental xe kernel driver, see Intel graphics#Testing the new experimental Xe driver.\n\n"
    },
    {
      "title": "NVIDIA",
      "level": 3,
      "content": "See NVIDIA Optimus.\n\nAs this is an Ada Lovelace generation GPU, power management features are enabled by default. See PCI-Express Runtime D3 (RTD3) Power Management.\n\nDo not forget to enable the nvidia-persistenced daemon.\n\n"
    },
    {
      "title": "Fingerprint reader",
      "level": 2,
      "content": "The Goodix fingerprint reader is supported by fprint.\n\n"
    },
    {
      "title": "Audio",
      "level": 2,
      "content": "This laptop requires Sound Open Firmware in order for the soundcard to work.\n\n"
    },
    {
      "title": "Webcam",
      "level": 2,
      "content": "The webcam is an Intel IPU6 device and is not fully supported in upstream kernel, even with some recent fixes.\n\nThere are upstream efforts to make it work though:\n\nIPU6 camera support status update notices that IPU6 camera on Dell XPS 9x40 models with ov02c10 sensor are not working. A fix for the sensor driver has been submitted upstream (patch v8).\n\nWith this (unapproved) patch the webcam is be functional with libcamera/qcam when being build in a custom kernel.\n\nBut the image quality is still subpar and requires further improvements in libcamera.\n\n"
    },
    {
      "title": "Random freezes",
      "level": 3,
      "content": "There are occurrences of Intel GPU freezes, with the only solution being a hard reset of the system.\n\nYou might see the following kernel output while experiencing these freezes :\n\n```\n[ 1533.629627] i915 0000:00:02.0: [drm] ERROR GT0: GUC: TLB invalidation response timed out for seqno 175260\n[ 1535.350015] i915 0000:00:02.0: [drm] GPU HANG: ecode 12:0:00000000\n[ 1535.350418] i915 0000:00:02.0: [drm] GT0: Resetting chip for stopped heartbeat on bcs0\n[ 1535.350674] i915 0000:00:02.0: [drm] GT0: GuC firmware i915/mtl_guc_70.bin version 70.20.0\n[ 1535.360866] i915 0000:00:02.0: [drm] GT0: GUC: submission enabled\n[ 1535.360870] i915 0000:00:02.0: [drm] GT0: GUC: SLPC enabled\n```\n\nAdding the following option to the kernel command line can solve the issue: iommu.strict=1. See [1].\n\n"
    },
    {
      "title": "System hangs on startup",
      "level": 3,
      "content": "There can be some cases where the system hangs on startup, specifically when starting the nvidia-persistenced daemon.\n\nIn order to solve this issue, add the following modules to the initramfs:\n\n```\n/etc/mkinitcpio.conf\n```\n\n```\n...\nMODULES=(... nvidia, nvidia_drm, nvidia_modeset, nvidia_uvm)\n...\n```\n\nThen, add nvidia_drm.modeset=1 to the kernel command line and regenerate the initramfs.\n\n"
    },
    {
      "title": "Screen freeze on some window managers",
      "level": 3,
      "content": "This was noticed on Hyprland window manager on kernels starting with 6.10.8. When switching between workspaces nothing happened and journald reported the following:\n\n```\nSep 09 23:05:49 archlinux kernel: swiotlb_tbl_map_single: 127 callbacks suppressed\nSep 09 23:05:49 archlinux kernel: simple-framebuffer simple-framebuffer.0: swiotlb buffer is full (sz: 2097152 bytes), total 32768 (slots), used 2 (slots)\nSep 09 23:05:49 archlinux kernel: simple-framebuffer simple-framebuffer.0: swiotlb buffer is full (sz: 2097152 bytes), total 32768 (slots), used 2 (slots)\nSep 09 23:05:49 archlinux kernel: simple-framebuffer simple-framebuffer.0: swiotlb buffer is full (sz: 2097152 bytes), total 32768 (slots), used 2 (slots)\nSep 09 23:05:49 archlinux kernel: simple-framebuffer simple-framebuffer.0: swiotlb buffer is full (sz: 2097152 bytes), total 32768 (slots), used 2 (slots)\n```\n\nThen, add initcall_blacklist=simpledrm_platform_driver_init to your kernel parameters and the simple-framebuffer device (simpledrmdrmfb) will not be loaded. Normally the simple-framebuffer device should be replaced when the normal i915 device (i915drmfb) loads but this is not the case here.\n\n"
    },
    {
      "title": "See also",
      "level": 2,
      "content": "User Manual: https://dl.dell.com/content/manual84320372-xps-16-9640-owner-s-manual.pdf?language=en-us\n\n"
    }
  ]
}