{
  "title": "Tinc",
  "url": "https://wiki.archlinux.org/title/Tinc",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Note: **This article or section needs expansion.** This article or section needs expansion.\n\nThis article or section needs expansion.\n\nNote: **This article or section needs language, wiki syntax or style improvements. See Help:Style for reference.** This article or section needs language, wiki syntax or style improvements. See Help:Style for reference.\n\nThis article or section needs language, wiki syntax or style improvements. See Help:Style for reference.\n\ntinc is a Virtual Private Network (VPN) daemon that uses tunnelling and encryption to create a secure private network between hosts on the Internet.\n\n"
    },
    {
      "title": "Installation",
      "level": 2,
      "content": "Install the tinc package.\n\n"
    },
    {
      "title": "Configuring a private network",
      "level": 2,
      "content": "In this example, we will create a virtual private network vpnname between two hosts alpha and beta, where the former is the entry point for the latter, so that beta tries to connect to alpha on startup.\n\nFor each virtual private network you have to create a separate directory /etc/tinc/vpnname.\n\nYou can also start by copying the sample configuration\n\n```\n# cp -r /usr/share/tinc/examples/* /etc/tinc/vpnname\n```\n\nIn /etc/tinc/vpnname/tinc.conf you specify the name of the hostmachine (which can differ from the actual hostname of the system) and the location of the tun/tap device.\n\n"
    },
    {
      "title": "Configuration of alpha",
      "level": 3,
      "content": "```\n/etc/tinc/vpnname/tinc.conf\n```\n\n```\nName = alpha\nDevice = /dev/net/tun\n```\n\n```\n/etc/tinc/vpnname/tinc-up\n```\n\n```\n#!/bin/sh\nip link set $INTERFACE up\nip addr add  192.168.0.1/24 dev $INTERFACE\n```\n\n```\n/etc/tinc/vpnname/tinc-down\n```\n\n```\n#!/bin/sh\nip addr del 192.168.0.1/24 dev $INTERFACE\nip link set $INTERFACE down\n```\n\ntinc-up and tinc-down need to be made executable.\n\n"
    },
    {
      "title": "Configuration of beta",
      "level": 3,
      "content": "```\n/etc/tinc/vpnname/tinc.conf\n```\n\n```\nName = beta\nDevice = /dev/net/tun\nConnectTo = alpha\n```\n\n```\n/etc/tinc/vpnname/tinc-up\n```\n\n```\n#!/bin/sh\nip link set $INTERFACE up\nip addr add 192.168.0.2/24 dev $INTERFACE\n```\n\n```\n/etc/tinc/vpnname/tinc-down\n```\n\n```\n#!/bin/sh\nip addr del 192.168.0.2/24 dev $INTERFACE\nip link set $INTERFACE down\n```\n\ntinc-up and tinc-down need to be made executable.\n\n"
    },
    {
      "title": "Setting up the hosts",
      "level": 3,
      "content": "The configuration files for the different hosts are stored in /etc/tinc/vpnname/hosts/ directory. In this example we need the two files on each machine.\n\n```\n/etc/tinc/vpnname/hosts/alpha\n```\n\n```\nAddress = 10.0.0.1\nPort = 655\nSubnet = 192.168.0.1/32\n```\n\n```\n/etc/tinc/vpnname/hosts/beta\n```\n\n```\nPort = 655\nSubnet = 192.168.0.2/32\n```\n\nAfter creating a file for each host, you have to generate a key pair using\n\n```\n# tincd -n vpnname -K\n```\n\nwhich creates the private key in /etc/tinc/vpnname/tinc.rsa_key.priv and the public key in the corresponding host-file.\n\nIn the last step you need to exchange the host configuration files, so that you have both alpha and beta in /etc/tinc/vpnname/hosts/ on each host.\n\n"
    },
    {
      "title": "Starting a private network",
      "level": 2,
      "content": "After having created the appropriate configuration in /etc/tinc/vpnname, you can test the new private network with:\n\n```\n# tincd -n vpnname\n```\n\nIf you want it at startup, you can enable tinc@vpnname.service.\n\n"
    },
    {
      "title": "Using TAP devices and bridges",
      "level": 2,
      "content": "Sometimes it is reasonable to use TAP devices instead of TUN devices. For example if you want to add the tinc device to an already existing bridge. Just add the \"Mode\" option to your tinc.conf.\n\nRemember to do that on every host.\n\n```\n/etc/tinc/vpnname/tinc.conf\n```\n\n```\nName = node\nMode = switch\nDevice = /dev/net/tun\nConnectTo = other\n```\n\nPossible tinc-up/down files could look like that:\n\n```\n/etc/tinc/vpnname/tinc-up\n```\n\n```\n#!/bin/sh\nip link set $INTERFACE up\nbrctl addif br0 $INTERFACE\n```\n\n```\n/etc/tinc/vpnname/tinc-down\n```\n\n```\n#!/bin/sh\nbrctl delif br0 $INTERFACE\nip link set $INTERFACE down\n```\n\nAnd finally restart your tinc daemon: tinc@vpnname.service.\n\n"
    },
    {
      "title": "Automatically Starting Tinc at boot",
      "level": 2,
      "content": "Tinc can be configured to automatically start at boot time using systemd units.\n\nIf you want to be able to start, stop or reload all of your networks at once, you have to enable tinc.service\n\nThen for each network that you want to automatically start, enable it individually (e.g. tinc@vpnname.service, tinc@another_vpnname.service, etc...)\n\n"
    },
    {
      "title": "I have updated my system and now tinc will not start.",
      "level": 3,
      "content": "In case of a linux kernel update you have to either restart your system or reinstall the running kernel package.\n\n"
    },
    {
      "title": "I'm running a custom kernel and tinc will not start.",
      "level": 3,
      "content": "Make sure you have TUN/TAP support enabled.\n\n"
    },
    {
      "title": "See also",
      "level": 2,
      "content": "- tincd(8)\n- tinc documentation\n\n"
    }
  ]
}