{
  "title": "Lenovo ThinkPad X1 Yoga (Gen 4)",
  "url": "https://wiki.archlinux.org/title/Lenovo_ThinkPad_X1_Yoga_(Gen_4)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Table content:\nHardware | PCI/USB ID | Working?\nTouchpad |  | Yes\nTrackPoint |  | Yes\nKeyboard |  | Yes\nVideo |  | Yes\nWebcam | 04f2:b67c | Yes\nIR Webcam | 13d3:56ba | Yes\nEthernet |  | Yes\nBluetooth |  | Yes\nAudio |  | Yes\nWireless |  | Yes\nMobile broadband |  | Untested\nFingerprint reader |  | Yes\nNFC |  | Yes\nScreen orientation sensor |  | Yes\nTouch screen |  | Yes\nWacom pen |  | Yes\n\nThe Lenovo ThinkPad X1 Yoga, 4th generation is a 2-in-1 convertible laptop introduced in late 2019. Its design is closely related to the Lenovo ThinkPad X1 Carbon (Gen 7). It features a 14\" screen, 8th-gen Intel Core processors and integrated Intel UHD 620 graphics.\n\nTo ensure you have this version, install the package dmidecode and run:\n\n```\n# dmidecode -t system | grep Version\n```\n\n```\nVersion: ThinkPad X1 Yoga 4th\n```\n\n"
    },
    {
      "title": "Updates",
      "level": 3,
      "content": "In August of 2018 Lenovo has joined the Linux Vendor Firmware Service (LVFS) project, which enables firmware updates from within the OS. BIOS updates (and possibly other firmware such as the Thunderbolt controller) can be queried for and installed through fwupd.\n\n"
    },
    {
      "title": "BIOS hanging, not booting into bootloader",
      "level": 3,
      "content": "Sometimes, the BIOS just \"hangs\" and you cannot do anything but force-power off. This was fixed in the latest version of the Synaptics touchpad which you can install using fwupdmgr.\n\n"
    },
    {
      "title": "S3 Suspend Bug with Bluetooth Devices",
      "level": 3,
      "content": "Occasionally your Thinkpad will wake up immediately after suspending with certain bluetooth devices added. To prevent this, remove the devices or disable bluetooth before suspending.\n\n"
    },
    {
      "title": "Enabling S3",
      "level": 3,
      "content": "The UEFI has two Sleep State options, called Windows and Linux, which you can find in at Config > Power > Sleep State. See Power management/Suspend and hibernate for the explanation of the various sleep states.\n\nReboot and verify whether deep sleep is available, as explained in Power management/Suspend and hibernate#Changing suspend method.\n\n"
    },
    {
      "title": "Touchpad",
      "level": 2,
      "content": "Sometimes after a boot, the touchpad does not work. This was fixed in the latest firmware for the Synaptics device which you can install using fwupdmgr.\n\n"
    },
    {
      "title": "Fingerprint sensor",
      "level": 2,
      "content": "Install the latest fprintd package. Also install the firmware modules with fwupdmgr from the lvfs-testing remote:\n\n```\n$ fwupdmgr enable-remote lvfs-testing\n$ fwupdmgr refresh\n$ fwupdmgr update\n```\n\nSee fprint for more details on how to setup fingerprints.\n\n"
    },
    {
      "title": "IR Webcam",
      "level": 2,
      "content": "Confirm you have an IR camera by typing:\n\n```\n$ lsusb|grep IMC.Networks.Integrated.Camera\n```\n\nShows (something like):\n\n```\nBus 001 Device 003: ID 13d3:56ba IMC Networks Integrated Camera\n```\n\nThe kernel drivers in Arch pick this up just fine, but there are packages like Howdy|howdyAUR authentication pam/python scripts that require linux-enable-ir-emitter\n\ninstall the package linux-enable-ir-emitterAUR\n\n```\n# linux-enable-ir-emitter configure\n```\n\nFollow the prompts\n\nThen run the enablement scripts:\n\n```\n# linux-enable-ir-emitter run\n```\n\n(Optional) test the functionality:\n\n```\n# linux-enable-ir-emitter test\n```\n\nCreate the systemd link to the enablement scripts:\n\n```\n# linux-enable-ir-emitter boot\n```\n\n"
    },
    {
      "title": "NFC",
      "level": 2,
      "content": "See https://github.com/nfc-tools/libnfc/issues/455\n\n"
    },
    {
      "title": "Screen orientation sensor",
      "level": 2,
      "content": "Install the latest iio-sensor-proxy package and reboot the system. Do not manually start the service as systemd DBUS handles it for you.\n\nYou can confirm the sensor is working by typing:\n\n```\n$ monitor-sensor --accel\n```\n\n```\n=== Has accelerometer (orientation: normal)\n```\n\nTry open your Thinkpad to tablet mode and rotate it around to confirm it is sensing correctly. Use Ctrl+c to close the monitor-sensor process when done.\n\n"
    },
    {
      "title": "Function keys",
      "level": 2,
      "content": "Table content:\nKey | Visible?1 | Marked?2 | Effect\nFn+Esc | No | Yes | Enables Fn lock\nFn+F1 | Yes | Yes | XF86AudioMute\nFn+F2 | Yes | Yes | XF86AudioLowerVolume\nFn+F3 | Yes | Yes | XF86AudioRaiseVolume\nFn+F4 | Yes | Yes | XF86AudioMicMute\nFn+F5 | Yes | Yes | XF86MonBrightnessDown\nFn+F6 | Yes | Yes | XF86MonBrightnessUp\nFn+F7 | Yes | Yes | XF86Display\nFn+F8 | Yes | Yes | XF86WLAN\nFn+F9 | Yes | Yes | XF86Tools\nFn+F10 | Yes | Yes | XF86Bluetooth\nFn+F11 | No | Yes | none/opens keyboard config in Windows\nFn+F12 | Yes | Yes | XF86Favorites\nFn+B | Yes | No | Break\nFn+K | Yes | No | ScrollLock\nFn+P | Yes | No | Pause\nFn+S | Yes | No | SysRq\nFn+4 | Yes3 | No | XF86Sleep\nFn+Space | No | No | toggle keyboard backlight\nFn+Left Arrow | Yes | No | Home\nFn+Right Arrow | Yes | No | End\nFn+L | No | No | low power mode\nFn+M | No | No | normal power mode\nFn+H | No | No | high power mode\n\n1. The key is visible to xev and similar tools\n1. The physical key has a symbol on it, which describes its function\n1. systemd-logind handles this by default\n\n"
    },
    {
      "title": "Battery threshold settings",
      "level": 2,
      "content": "It is possible to set thresholds for when the battery should stop/start charging using\n\n```\n$ tlp setcharge start_value stop_value\n```\n\nThe following values are recommended: [1]\n\nTable content:\nLaptop Usage | start value | stop value\nRegularly complete discharge (<20%) of battery | 95 | 100\nNo complete discharge, between 50% to 100% | 75 | 80\nNo battery usage, always AC | 45 | 50\n\n"
    }
  ]
}