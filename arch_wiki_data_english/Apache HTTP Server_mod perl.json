{
  "title": "Apache HTTP Server/mod perl",
  "url": "https://wiki.archlinux.org/title/Apache_HTTP_Server/mod_perl",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "From the project:\n\n"
    },
    {
      "title": "Installation",
      "level": 2,
      "content": "Install the mod_perlAUR package.\n\n"
    },
    {
      "title": "Configuration",
      "level": 2,
      "content": "Load the module via the main Apache configuration file:\n\n```\nhttpd.conf\n```\n\n```\nLoadModule perl_module modules/mod_perl.so\n```\n\n"
    },
    {
      "title": "Allow perl to execute scripts for certain directories",
      "level": 3,
      "content": "There are two possible methods to enable the mod_perl module:\n\n- #Using virtual hosts, or\n- #For a subdirectory.\n\n"
    },
    {
      "title": "Using virtual hosts",
      "level": 4,
      "content": "Add a virtual host with settings. For example:\n\n```\n/etc/httpd/conf/extra/httpd-vhosts.conf\n```\n\n```\n<VirtualHost perlwebtest:80>\n\tServername perlwebtest\n\tDocumentRoot /srv/http/perlwebtest\n\tErrorLog /var/log/httpd/perlwebtest-error.log\n\tCustomLog /var/log/httpd/perlwebtest-access.log combined\n\t<Directory /srv/http/perlwebtest>\n\t\tAddHandler perl-script .pl\n\t\tPerlResponseHandler ModPerl::Registry\n\t\tOptions +ExecCGI\n\t\tPerlOptions +ParseHeaders\n\t\tAllowOverride All\n\t\tOrder allow,deny\n\t\tAllow from all\n\t</Directory>\n</VirtualHost>\n```\n\nEnsure /etc/httpd/conf/httpd.conf includes the created virtual host:\n\n```\nInclude conf/extra/httpd-vhosts.conf\n```\n\nMake sure it does not have Options Indexes FollowSymLinks!\n\nAdd \"perlwebtest\" as localhost in /etc/hosts, using the machine's hostname for yourhostname:\n\n```\n127.0.0.1\tlocalhost yourhostname perlwebtest\n```\n\n"
    },
    {
      "title": "For a subdirectory",
      "level": 4,
      "content": "Add the following to the main configuration file:\n\n```\n/etc/httpd/conf/httpd.conf\n```\n\n```\nAlias /perlwebtest/ /srv/http/perlwebtest/\n<Location /perlwebtest/>\n      AddHandler perl-script .pl\n      AddHandler perl-script .cgi\n      PerlResponseHandler ModPerl::Registry\n      PerlOptions +ParseHeaders\n      Options +ExecCGI\n      Order allow,deny\n      Allow from all\n</Location>\n```\n\n"
    },
    {
      "title": "Turn on perl for directory listings",
      "level": 3,
      "content": "Create /etc/httpd/conf/extra/perl_module.conf as well:\n\n```\n/etc/httpd/conf/extra/perl_module.conf\n```\n\n```\n# Required modules: dir_module, perl_module\n\n<IfModule dir_module>\n        <IfModule perl_module>\n                DirectoryIndex index.pl index.html\n        </IfModule>\n</IfModule>\n```\n\nThen include it in /etc/httpd/conf/httpd.conf:\n\n```\n/etc/httpd/conf/httpd.conf\n```\n\n```\n# Perl\nInclude conf/extra/perl_module.conf\n```\n\n"
    },
    {
      "title": "Try it out",
      "level": 3,
      "content": "Create index.pl in /srv/http/perlwebtest:\n\n```\n#!/usr/bin/perl\nprint \"Content-type: text/plain\\n\\n\";\nprint \"mod_perl now works\\n\";\n```\n\nRestart Apache's httpd.service and let it reload the configuration.\n\nFinally, depending on chosen alternative configuration, visit\n\n- http://perlwebtest for #Using virtual hosts, or\n- http://localhost/perlwebtest for #For a subdirectory.\n\n"
    }
  ]
}