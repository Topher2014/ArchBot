{
  "title": "Lenovo Legion 7i",
  "url": "https://wiki.archlinux.org/title/Lenovo_Legion_7i",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Note: **This article or section does not follow the Laptop page guidelines.** This article or section does not follow the Laptop page guidelines.\n\nThis article or section does not follow the Laptop page guidelines.\n\nTable content:\nHardware | PCI/USB ID | Working?\nGPU (Intel) |  | Yes\nGPU (Nvidia) |  | Partial\nBacklight |  | Partial\nEthernet |  | Yes\nWireless |  | Yes\nAudio |  | Yes\nWebcam | 174f:2435 | Yes\nBluetooth |  | Yes\nThunderbolt |  | Yes\nKeyboard |  | Partial\nTouchpad |  | Yes\n\nFor a general overview of laptop-related articles and recommendations, see Laptop.\n\n"
    },
    {
      "title": "BIOS",
      "level": 2,
      "content": "At bootup, the BIOS settings page is entered via the F2 key.\n\nIn the BIOS settings, the model name can be seen in the Main tab, Secure Boot can be disabled from the Security tab and boot mode can optionally be switched between UEFI and legacy.\n\nAdvanced BIOS options can be accessed by going into more settings, hold down Fn and press each key horizontally from q to p, a to l, then z to m, let go of Fn and press F10. Click save changes and reboot into BIOS. Advanced settings will now be available.\n\nThere is no known option to disable the discrete NVIDIA GPU using the BIOS, there may be one present after unlocking the advanced options.\n\n"
    },
    {
      "title": "NVMe Detection",
      "level": 3,
      "content": "You must manually change storage type from RST to AHCI in BIOS settings for Linux to be able to detect the NVMe drive.\n\n"
    },
    {
      "title": "Undervolt",
      "level": 3,
      "content": "Undervolting is possible. Enter advanced bios, go to overclocking section, and enable XTU settings. intel-undervolt can be used now.\n\nUndervolting levels vary between chips, the 10875H has been known to be stable around -100mV for CPU, -25mV for GPU, and -100mV for CPU Cache.\n\n"
    },
    {
      "title": "Backlight",
      "level": 3,
      "content": "Backlight does not work with default kernel parameters. This problem may be solved by adding i915.invert_brightness=1 to the list of kernel parameters.\n\n```\n$ ls /sys/class/backlight/\n```\n\n```\nintel_backlight\n```\n\nif the above solution does NOT work then you can try this:\n\nThe only solution for now is to do it through the terminal using the following commands:\n\n```\n$ xrandr --verbose\n```\n\n```\nScreen 0: minimum 8 x 8, current 1920 x 1080, maximum 32767 x 32767\neDP1 connected primary 1920x1080+0+0 (0x46) normal (normal left inverted right x axis y axis) 340mm x 190mm\n\tIdentifier: 0x43\n\tTimestamp:  214550\n\tSubpixel:   unknown\n\tGamma:      1.0:1.0:1.0\n\tBrightness: 0.80\n\tClones:    \n\tCRTC:       0\n\tCRTCs:      0 1 2\n\tTransform:  1.000000\n```\n\nto get the display Identifier so that you can send the brightness adjustment command:\n\n```\n$ xrandr --output 0x43 --brightness 0.8\n```\n\nWhere you can specify the brightness value between 1 and 0 using decimals(0.1, 0.2, 0.3, 0.5, 0.8, etc)\n\nFor example to place the brightness at 50% you can apply the following command:\n\n```\n$ xrandr --output 0x43 --brightness 0.5\n```\n\n"
    },
    {
      "title": "Power Down Nvidia Card",
      "level": 3,
      "content": "Blacklist nouveau drivers, reboot, and run:\n\n```\n# echo 'auto' >> /sys/bus/pci/devices/0000:01:00.0/power/control\n```\n\n"
    },
    {
      "title": "Multihead",
      "level": 3,
      "content": "External displays using the USB-C ports only seem to function using the proprietary NVIDIA driver.\n\n"
    },
    {
      "title": "Power Management",
      "level": 2,
      "content": "Battery conservation mode is available. It will charge the device to 60% when charge falls below 50%, extending the life of the battery. It can be activated by running the following command:\n\n```\n# echo 1 >/sys/bus/platform/drivers/ideapad_acpi/VPC2004:00/conservation_mode\n```\n\n"
    },
    {
      "title": "Lights",
      "level": 3,
      "content": "Per-RGB keyboard lighting cannot be configured under Linux. openrgb-gitAUR & ckb-nextAUR do not work to control the keyboard lighting.\n\n"
    },
    {
      "title": "Touchpad",
      "level": 2,
      "content": "Single tap and double finger scrolling work. Multi gestures must be configured, they are detected with libinput-gesturesAUR.\n\n"
    },
    {
      "title": "Fan Control",
      "level": 2,
      "content": "Fan control only works with thinkfanAUR or LenovoLegionLinux.\n\n"
    },
    {
      "title": "System hangs with BBSwitch",
      "level": 3,
      "content": "System hang occurs if bbswitch is used to shutdown the discrete Nvidia card. Do not use bbswitch, instead blacklist nouveau and use powertop or run:\n\n```\n# echo 'auto' >> /sys/bus/pci/devices/0000:01:00.0/power/control\n```\n\n"
    },
    {
      "title": "Screen flickering",
      "level": 3,
      "content": "Screen flickers on a part of the screen. This problem may be solved by adding nvidia_drm=0 to the list of kernel parameters, see NVIDIA for more information.\n\n"
    },
    {
      "title": "EXT4-fs error after resume",
      "level": 3,
      "content": "If you get a error like EXT4-fs error (device nvme0n1p2): __ext4_find_entry:1532: inode #2102576: ... when suspending and resuming the system it seems the NVME cant be accessed. Hard-reboot and deactivate any hardware passwords/protections for this device in the BIOS settings.\n\n"
    },
    {
      "title": "Hinge Defects",
      "level": 3,
      "content": "Widespread issues with hinges breaking have been reported, especially the right side. There is no metal backing on the LCD side of the hinge, it is held in with glue causing it to become de-bonded over time. Extreme care is advised, warranty will not cover hinge issues.\n\n"
    }
  ]
}