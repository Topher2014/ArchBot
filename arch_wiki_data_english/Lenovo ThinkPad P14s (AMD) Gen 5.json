{
  "title": "Lenovo ThinkPad P14s (AMD) Gen 5",
  "url": "https://wiki.archlinux.org/title/Lenovo_ThinkPad_P14s_(AMD)_Gen_5",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Table content:\nHardware | PCI/USB ID | Working?\nGPU | xxx | Yes\nWi-Fi | xxx | Yes\nBluetooth | xxx | Yes\nEthernet | xxx | Yes\nAudio | xxx | Yes\nTrackPoint |  | Yes\nTouchpad |  | Yes\nTouchscreen |  | Untested\nWebcam | xxx | Yes\nTPM |  | Yes\nFingerprint reader | xxx | Yes\nSmartcard reader | xxx | Untested\nNFC |  | Yes\n\n"
    },
    {
      "title": "Device Specifications",
      "level": 2,
      "content": "Model Number: 21ME000RFR\n\nThis article covers the installation and configuration of Arch Linux on the Lenovo ThinkPad P14s (AMD) Gen 5 laptop.\n\nFor a general overview of ThinkPad-related articles and recommendations, see Laptop/Lenovo.\n\nAlso see Lenovo ThinkPad T14 (AMD) Gen 5 (same hardware, different model name).\n\n"
    },
    {
      "title": "Firmware",
      "level": 2,
      "content": "This model is fully compatible with fwupd.\n\nRun the following command to detect system components: fwupdmgr get-devices\n\nThis will detect:\n\n- System Firmware\n- UEFI BIOS\n- Webcam\n- Fingerprint sensor\n- CPU/GPU\n- TPM\n- NVMe controller\n\n"
    },
    {
      "title": "CPU",
      "level": 2,
      "content": "Since kernel 6.5, the AMD P-State EPP driver with \"Active\" profile is applied by default, no additional configuration is needed. Just ensure amd-ucode was properly added during installation.\n\nNote: cpupower or cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_driver Shell command should provide the following result:\n\ncpupower or cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_driver Shell command should provide the following result:\n\namd-pstate-epp\n\n"
    },
    {
      "title": "GPU",
      "level": 2,
      "content": "If you experience occasional split-second screen flickering or massive lags when using the terminal, add the amdgpu.dcdebugmask=0x10 kernel parameter[1].\n\n"
    },
    {
      "title": "GPU Resets",
      "level": 3,
      "content": "If experiencing GPU resets (black screen), refer to Lenovo ThinkPad T14s (AMD) Gen 3#CPU.\n\n"
    },
    {
      "title": "Touchpad",
      "level": 3,
      "content": "To disable sleep wake-up from touchpad, see Lenovo ThinkPad T14s (AMD) Gen 3#Disable wakeup from sleep on touchpad activity.\n\n"
    },
    {
      "title": "Touchscreen",
      "level": 3,
      "content": "The variation with product code 21ME000RFR does not have a touchscreen, but touchscreens should work out of the box for other variants.\n\nSee Touchscreen for additional information.\n\n"
    },
    {
      "title": "Speakers",
      "level": 3,
      "content": "Speakers work out of the box, but default sound quality is poor due to missing Dolby Atmos Convolver.\n\nImprove sound quality using EasyEffects with a convolver effect. Refer to this example preset for a previous generation laptop.\n\n"
    },
    {
      "title": "Recognized but Silent",
      "level": 4,
      "content": "If the internal mic is recognized by ALSA but the recorded input is silent, see this Arch Linux forum thread and adapt according to your model number.\n\n"
    },
    {
      "title": "Microphone LED",
      "level": 4,
      "content": "If the Mic LED seems to stay always on, see Lenovo ThinkPad T14 (AMD) Gen 3#Mute Mic LED always on.\n\n"
    },
    {
      "title": "Wi-Fi",
      "level": 3,
      "content": "Wi-Fi works out of the box.\n\nThe Qualcomm Atheros Wi-Fi card NFA725 is reported as a QCNFA765 by lspci and is also known as WCN6855. It is soldered and glued onto the mainboard.\n\nWith kernel 6.12, Wi-Fi may not work after resuming from suspend or hibernation. Likely related to a ath11k / ath11k_pci module issue. See the discussion here: https://bugzilla.kernel.org/show_bug.cgi?id=214649#c34\n\nSee Lenovo ThinkPad T14s (AMD) Gen 3#Network / Wi-Fi for a fix that unloads the ath11k_pci module before sleep and loads it again after resume.\n\nIf the Wi-Fi does not work after suspend to ram with the above fix, try suspend to disk (hibernate).\n\n"
    },
    {
      "title": "Smartcard Reader",
      "level": 3,
      "content": "Untested, but reportedly working. Follow instructions from smartcards.\n\n"
    },
    {
      "title": "Fingerprint Reader",
      "level": 3,
      "content": "Works as expected. Follow fprintd documentation.\n\n"
    },
    {
      "title": "NFC",
      "level": 3,
      "content": "Uses an NXP NPC300 connected via I2C. To use, load the modules nxp_nci and nxp_nci_i2c.\n\nFor more information, see NFC.\n\n"
    },
    {
      "title": "S3 vs s2idle Sleep",
      "level": 4,
      "content": "S3 (deep) sleep not supported by this CPU, and as such there is no BIOS parameter for sleep mode selection.\n\ns2idle, a.k.a. S0ix works out of the box. In some older firmware version of this machine, the ACPI will repeatedly wake the device if Wake-on-LAN is disabled. This issue is not present on updated firmware versions.\n\nSleep power consumption varies based on OS and peripheral sleep management. s2idle power consumption on this CPU can be debugged with one of AMD's Linux debug tools.\n\n"
    },
    {
      "title": "Hibernation",
      "level": 4,
      "content": "Works fine. If experiencing Wi-Fi issues after hibernation, see #Wi-Fi\n\n"
    },
    {
      "title": "Charge Thresholds",
      "level": 4,
      "content": "Battery charge thresholds can be set using:\n\n- TLP\n- KDE power management\n- GNOME power management\n\n"
    },
    {
      "title": "Power Profiles",
      "level": 4,
      "content": "TLP, especially with tlpuiAUR has seamless integration, easy and reliable configuration. power-profiles-daemon, on the other hand, whereas integrated in Gnome and KDE, does not offer (yet) as many options as tlp.\n\nInstall tlp Start/enable the tlp service Optional: Install tlpuiAUR for configuration\n\nInstall power-profiles-daemon Start/enable the power-profiles-daemon service.\n\n"
    },
    {
      "title": "Function keys",
      "level": 2,
      "content": "Table content:\nKey | Visible?1 | Marked?2 | Effect | Note\nFn | Yes | - | XF86WakeUp | Can be swapped with left Ctrl in BIOS\nFn+4 | Yes | No | XF86Sleep | \nFn+Esc | Yes | Yes | Toggles Fn lock | Has status led\nFn+F1 | Yes | Yes | XF86AudioMute | Has status led\nFn+F2 | Yes | Yes | XF86AudioLowerVolume | \nFn+F3 | Yes | Yes | XF86AudioRaiseVolume | \nFn+F4 | Yes | Yes | XF86AudioMicMute | Has status led\nFn+F5 | Yes | Yes | XF86MonBrightnessDown | \nFn+F6 | Yes | Yes | XF86MonBrightnessUp | \nFn+F7 | Yes | Yes | XF86Display | \nFn+F8 | Yes | Yes | XF86WLAN | Marked with airplane mode\nFn+F9 | Yes | Yes | XF86Messenger | Marked with message box\nFn+F10 | Yes | Yes | XF86Go | Marked with phone answer call\nFn+F11 | Yes | Yes | Cancel | Marked with phone end call\nFn+F12 | Yes | Yes | XF86Favorites | \nFn+Tab | Yes | No | XF86FullScreen | \nFn+Left | Yes | No | Home | \nFn+Right | Yes | No | End | \nFn+P | Yes | No | Pause | \nFn+S | Yes | No | Sys_Req | \nFn+K | Yes | No | Scroll_Lock | \nFn+B | Yes | No | Break | \nFn+PrtSc | Yes | Yes | XF86Launch2 | \nFn+Space | Yes | Yes | Change keyboard backlight level | \n\n1. The key is visible to xev or wev and similar tools.\n1. The physical key has a symbol on it, which describes its function.\n\n"
    },
    {
      "title": "See also",
      "level": 2,
      "content": "- Lenovo ThinkPad T14 (AMD) Gen 5\n- Lenovo ThinkPad P14s (AMD) Gen 4\n- Lenovo ThinkPad T14s (AMD) Gen 3\n- Lenovo ThinkPad T14 (AMD) Gen 3\n\n"
    }
  ]
}