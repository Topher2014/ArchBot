{
  "title": "NordVPN",
  "url": "https://wiki.archlinux.org/title/NordVPN",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "NordVPN is a personal virtual private network service provider. NordVPN is based in Panama. The country has no mandatory data retention laws and does not participate in the Five Eyes or Fourteen Eyes alliances. On Linux, NordVPN operates through a command-line tool.\n\n"
    },
    {
      "title": "Create Account",
      "level": 2,
      "content": "In order to use NordVPN, you must create your own account on the official NordVPN website. https://nordvpn.com\n\nThere are different payment options to choose from.\n\n"
    },
    {
      "title": "Installation",
      "level": 2,
      "content": "NordVPN can be installed with the package nordvpn-binAUR.\n\nBelow is a bash command sequence that can be used to configure your environment for use with the package:\n\n```\n# groupadd -r nordvpn\n# gpasswd -a <username> nordvpn\n```\n\n"
    },
    {
      "title": "systemd service",
      "level": 2,
      "content": "In order to use NordVPN. You must enable and start the nordvpnd.service system unit.\n\n"
    },
    {
      "title": "Configuration",
      "level": 2,
      "content": "Here are some of the common commands to use NordVPN:\n\n"
    },
    {
      "title": "Login/Logout",
      "level": 3,
      "content": "```\n$ nordvpn login\n```\n\nLogs you in to your NordVPN Account.\n\nNote: See comments from nordvpn-bin AUR\n\n```\n$ nordvpn login --callback \"nordvpnlink\"\n```\n\nSee comments from nordvpn-bin AUR\n\nAlternatively login via an access token generated from your account dashboard as below NordVPN Dashboard\n\n```\n$ nordvpn login --token \"tokencode\"\n```\n\n```\n$ nordvpn logout\n```\n\nLogs you out from your NordVPN Account.\n\n"
    },
    {
      "title": "Enable NordLynx (WireGuard)",
      "level": 3,
      "content": "NordVPN has introduced NordLynx technology which is based on the WireGuard protocol. Compared to default OpenVPN technology, WireGuard provides lower latency, higher speeds and better connection stability. Due to the nature of WireGuard's user identification, NordVPN has introduced NordLynx, which implements a double-NAT protocol on top of WireGuard to supplement increased privacy as well.\n\nEnable it with the below command:\n\n```\n$ nordvpn set technology nordlynx\n```\n\nTo see all available technologies:\n\n```\n$ nordvpn set technology --help\n```\n\n"
    },
    {
      "title": "Connect to VPN",
      "level": 3,
      "content": "Connect you to VPN.\n\n```\n$ nordvpn connect [[country]/[server]/[country_code]/[city] or [country] [city]]\n```\n\n```\nProvide a [country] argument to automatically connect to a specific country. For example: 'nordvpn set autoconnect on Australia'\nProvide a [country_code] argument to automatically connect to a specific country. For example: 'nordvpn set autoconnect on us'\nProvide a [city] argument to automatically connect to a specific city. For example: 'nordvpn set autoconnect on Budapest'\n```\n\nDisconnect you from VPN.\n\n```\n$ nordvpn disconnect\n```\n\nShows the connection status.\n\n```\n$ nordvpn status\n```\n\n"
    },
    {
      "title": "Settings",
      "level": 3,
      "content": "Sets the protocol.\n\n```\n$ nordvpn set protocol [protocol]\n```\n\n```\nSupported values for [protocol]: TCP, UDP\nExample: nordvpn set protocol TCP\n```\n\nEnables or disables Kill Switch. This security feature blocks your device from accessing the Internet outside the secure VPN tunnel, in case connection with a VPN server is lost. If you start to notice that your connection does not work after you disconnect from VPN, this may be due to the buggy killswitch feature, so you have to disable it.\n\n```\n$ nordvpn set killswitch [enabled]/[disabled]\n```\n\n```\nSupported values for [disabled]: 0, false, disable, off, disabled\nExample: nordvpn set killswitch off\n\nSupported values for [enabled]: 1, true, enable, on, enabled\nExample: nordvpn set killswitch on\n```\n\nEnables or disables Threat Protection Lite (Before known as CyberSec). When enabled, the Threat Protection Lite feature will automatically block suspicious websites so that no malware or other cyber threats can infect your device. Additionally, no flashy ads will come into your sight. More information on how it works: https://nordvpn.com/features/threat-protection/\n\n```\n$ nordvpn set threatprotectionlite [enabled]/[disabled]\n```\n\n```\nSupported values for [disabled]: 0, false, disable, off, disabled\nExample: nordvpn set threatprotectionlite off\n\nSupported values for [enabled]: 1, true, enable, on, enabled\nExample: nordvpn set threatprotectionlite on\n```\n\nEnables or disables auto connect. When enabled, this feature will automatically try to connect to VPN on operating system startup.\n\n```\n$ nordvpn set autoconnect [enabled]/[disabled] [[country]/[server]/[country_code]/[city] or [country] [city]]\n```\n\n```\nSupported values for [disabled]: 0, false, disable, off, disabled\nExample: nordvpn set autoconnect off\n\nSupported values for [enabled]: 1, true, enable, on, enabled\nExample: nordvpn set autoconnect on\n\nProvide a [country] argument to automatically connect to a specific country. For example: 'nordvpn set autoconnect on Australia'\nProvide a [country_code] argument to automatically connect to a specific country. For example: 'nordvpn set autoconnect on us'\nProvide a [city] argument to automatically connect to a specific city. For example: 'nordvpn set autoconnect on Budapest'\n```\n\nSets DNS servers.\n\n```\n$ nordvpn set dns [servers]/[disabled]\n```\n\n```\nSupported values for [disabled]: 0, false, disable, off, disabled\nExample: nordvpn set dns off\n\nArguments [servers] is a list of IP addresses separated by space\nExample: nordvpn set dns 0.0.0.0 1.2.3.4\n```\n\nAdds or removes option from whitelist.\n\n```\n$ nordvpn whitelist command [command options] [arguments...]\n```\n\n```\nCommands:\n     add     Adds option to whitelist\n     remove  Removes option from whitelist\n```\n\nShows the current settings.\n\n```\n$ nordvpn settings\n```\n\n"
    },
    {
      "title": "Server List",
      "level": 3,
      "content": "Shows the city list.\n\n```\n$ nordvpn cities\n```\n\nShows the country list.\n\n```\n$ nordvpn countries\n```\n\nUse this command to show cities of specific country.\n\n```\n$ nordvpn cities [country]\n```\n\n```\nExample: nordvpn cities United_States\n```\n\n"
    },
    {
      "title": "Installation",
      "level": 3,
      "content": "1. Install networkmanager and networkmanager-openvpn.\n\n2. Choose an appropriate server using the NordVPN servers page: https://nordvpn.com/servers/ Download the corresponding OpenVPN configuration file on the NordVPN site: https://nordvpn.com/ovpn/ Save the file to a place in your user home directory or elsewhere that is memorable for future access.\n\n"
    },
    {
      "title": "Configuration",
      "level": 3,
      "content": "1. Right click on the NetworkManager applet from your desktop environment, and click Edit Connections. Click the Plus sign in the bottom left corner of the Network Connections window that appears.\n\n2. When you choose a connection type, click the drop down menu and scroll all the way down until you reach \"Import a saved VPN configuration\". Select that option. Now, click Create.\n\n3. Navigate to the directory you extracted all of the OpenVPN files to earlier, then open one of the files from that folder. Generally speaking, you will want to open the file that is associated with the connection you specifically want.\n\n4. After you have opened one of the OpenVPN files, the window that appears should be \"Editing <connection type>\". Type in your NordVPN Username and Password. There is an icon in the password box indicating user permission of the credentials; change the settings as you wish (\"Save for all users\" if you do not want to enter your password every time you connect).\n\n"
    },
    {
      "title": "Avoid DNS leak",
      "level": 3,
      "content": "To prevent DNS leak you must:\n\n1. Click on the \"IPv4 settings\".\n\n2. For method, choose \"Automatic (VPN) addresses only\" and manually enter the NordVPN DNS adresses in \"DNS servers\" \"103.86.96.100, 103.86.99.100\" (separated by a comma).\n\n3. Click Save at the bottom left of the \"Editing <connection type>\" window.\n\n"
    },
    {
      "title": "Automatic connection to the VPN",
      "level": 3,
      "content": "1. Right click on the NetworkManager applet from your desktop environment, and click Edit Connections.\n\n2. Double click on the ethernet or Wifi connection for whom you want to automatically connect to the VPN\n\n3. On the \"General\" tab, click on \"Automatically connect to VPN when using this connection\" in every connection you want, and choosing the right configuration file.\n\n4. Repeat the operation for the other connections you will use with the VPN.\n\n"
    },
    {
      "title": "Disable IPv6",
      "level": 3,
      "content": "NordVPN is not IPv6 compatible. You may want to completely disable it.\n\nOr you can also:\n\n1. Right click on the NetworkManager applet from your desktop environment, and click Edit Connections.\n\n2. Double click on the ethernet or Wifi connection for whom you want to automatically connect to the VPN\n\n3. On the \"ipv6\" tab, choose \"ignore\" in the method box.\n\n"
    },
    {
      "title": "Use a killswitch",
      "level": 3,
      "content": "The NordVPN killswitch will not work with this method, you will have to create your own using ufw or iptables.\n\nHere is an example with UFW.\n\n"
    },
    {
      "title": "Test your configuration",
      "level": 3,
      "content": "You can use these sites:\n\nhttps://ipleak.net/\n\nhttps://www.dnsleaktest.com/\n\nhttps://ipv6leak.com/\n\n"
    },
    {
      "title": "No internet after connection",
      "level": 3,
      "content": "If the network is blocking all the VPN protocols including the proxy connections, connection attempts might fail. Try changing the protocol (e. g. to TCP), using obfuscated servers or the NordLynx protocol.\n\n```\n$ nordvpn set technology openvpn\n$ nordvpn set protocol tcp\n$ nordvpn set obfuscate on\n```\n\nNote that the list of countries where such servers are installed is much shorter.\n\nAlternatively, there may be a conflict with your local network's subnet, e.g.:\n\n```\n$ ip route\ndefault via 10.1.1.1 dev enp0s31f6 proto dhcp metric 100 \n10.0.0.0/8 dev enp0s31f6 proto kernel scope link src 10.1.2.86 metric 100 \n10.5.0.0/16 dev nordlynx proto kernel scope link src 10.5.0.2\n```\n\nTo deal with this, whitelist your network's subnet using, e.g.:\n\n```\n$ nordvpn whitelist add subnet 10.0.0.0/8\n```\n\n"
    },
    {
      "title": "No internet after disconnection",
      "level": 3,
      "content": "After disconnecting via nordvpn d, there might no internet on the computer, but pinging (something like ping 8.8.8.8) would still be successful. It is most likely a DNS issue: upon connection to the servers, the local DNS is being overwritten with NordVPN’s DNS to ensure a secure connection to the server. After disconnecting, the DNS is removed, which might be causing problems. It could be due to a buggy killswitch feature, so you may disable it writing\n\n```\n$ nordvpn set killswitch disabled\n```\n\nRestarting any running network manager might be required.\n\n"
    },
    {
      "title": "Trouble connecting over terminal",
      "level": 3,
      "content": "If you are having trouble connecting over the terminal and get errors connecting you need to whitelist your subnet and open a port on NordVPN. Open a terminal and check what subnets you have.\n\n```\n$ ip route\ndefault via 10.1.1.1 dev enp0s31f6 proto dhcp metric 100 \n10.0.0.0/8 dev enp0s31f6 proto kernel scope link src 10.1.2.86 metric 100\n10.5.0.0/16 dev nordlynx proto kernel scope link src 10.5.0.2\n```\n\nThe second subnet (10.0.0.0/8) is the subnet that we want to whitelist in NordVPN and you can do it with the following command:\n\n```\n$ nordvpn whitelist add subnet 10.0.0.0/8\n```\n\nIf you wish to blacklist the subnet again just run the following command :\n\n```\n$ nordvpn whitelist remove subnet 10.0.0.0/8\n```\n\nThe port 22 is the port that is needed for SSH to work, you can open it with the following command :\n\n```\n$ nordvpn whitelist add port 22\n```\n\nIf you wish to blacklist the port again just run the following command :\n\n```\n$ nordvpn whitelist remove port 22\n```\n\nSee also #Setting systemd-resolved as DNS resolver.\n\n"
    },
    {
      "title": "Resetting the killswitch",
      "level": 4,
      "content": "If you get randomly disconnected from NordVPN on the terminal and it will not let you reconnect, just disable and re-enable the killswitch:\n\n```\n$ nordvpn set killswitch off\n$ nordvpn set killswitch on\n```\n\nMost of the time it will not connect with the killswitch off, the linux app for NordVPN is very buggy currently.\n\n"
    },
    {
      "title": "Restarting the daemon",
      "level": 4,
      "content": "Alternatively, restarting the nordvpn.service can resolve the connection issue.\n\nDue to a recent update, the `iptables` policy is no longer flushed when the daemon restarts. If restarting does not restore the connection, try flushing these tables first with:\n\n```\n# iptables -F\n```\n\n"
    },
    {
      "title": "Setting systemd-resolved as DNS resolver",
      "level": 4,
      "content": "A note here is that NordVPN for Linux is apparently designed to use systemd-resolved and can crash when a different DNS resolver is used. You can switch to systemd-resolved by following these steps:\n\nRemove openresolv.\n\nStart/enable systemd-resolved.service\n\nBackup the existing resolv.conf:\n\n```\n# mv /etc/resolv.conf /etc/resolv.conf.bak\n```\n\nCreate a symlink to stub-resolv.conf:\n\n```\n# ln -s /run/systemd/resolve/stub-resolv.conf /etc/resolv.conf\n```\n\nRestart nordvpnd.service\n\nFor more information see the original source here.\n\n"
    },
    {
      "title": "Install wireguard-tools",
      "level": 4,
      "content": "When using NordLynx (NordVPN's WireGuard technology), sometimes the connection still drops, even when using systemd-resolved as a DNS resolver. This is due to an unmentioned dependency on wireguard-tools which should the be installed, then nordvpnd.service can be restarted.\n\n"
    },
    {
      "title": "Delay following terminal commands",
      "level": 3,
      "content": "On desktop systems without a functioning notification system there may be a long delay after executing terminal commands such as nordvpn disconnect and similar. This may be resolved by installing and initialising a notification agent.\n\n"
    }
  ]
}