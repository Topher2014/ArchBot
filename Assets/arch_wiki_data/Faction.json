{
  "title": "Faction",
  "url": "https://wiki.archlinux.org/title/Faction",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Faction is a C library for test-driven software development.\n\n"
    },
    {
      "title": "Installation",
      "level": 2,
      "content": "Install the libfactionAUR package.\n\n"
    },
    {
      "title": "Usage",
      "level": 2,
      "content": "The library provides several C macros to make writing tests quicker.\n\n- FI represents Faction Initialization\n- FT denotes a Faction Test\n- FC represents Faction Close\n\nUsing the FT macro, three fields are required.\n\n- AUTHORS() takes a comma-separated list of double-quotation surrounded author names\n- SPEC() takes a single double-quotation surrounded test specification description\n- A C boolean expression (just like when using C assert macros)\n\nConvention dictates that Faction tests are to be written at the bottom of the source file containing the code that will be tested. Tests are to be surrounded by a FACTION macro guard (see below example) so that they can be enabled/disabled at compile time. C compilers such as the GNU C Compiler (GCC) offer a way to enable macros on the command-line (i.e. the -D flag)\n\n"
    },
    {
      "title": "Example",
      "level": 2,
      "content": "```\n/* This is the function to be tested */\nint\nincrement(int input)\n{\n   return (input + 1);\n}\n\n#ifdef FACTION\n#include <faction.h>\n#include <limits.h>\nFI\n\n  FT(\n    AUTHORS( \"timetoplatypus\" ),\n    SPEC( \"increment() returns 1 when given 0\" ),\n    increment(0) == 1\n  );\n\n  FT(\n    AUTHORS( \"timetoplatypus\" ),\n    SPEC( \"increment() returns 0 when given the largest integer value\" ),\n    increment(INT_MAX) == 0\n  );\n\nFC\n#endif\n```\n\nThis can be compiled using gcc filename.c -D FACTION\n\n"
    },
    {
      "title": "Modes",
      "level": 2,
      "content": "There are two modes that Faction can compile in: minimal mode and extended mode.\n\nThe above example compiles Faction in minimal mode. A minimal compilation has exactly three library dependencies: stdlib, stdio, and getopt. An extended compilation has additional dependencies, including some functions that are only available through the GNU feature test macro.\n\nSo, to compile in extended mode, simply define the GNU feature test macro at the top of the file. For instance, the previous example modified to be compiled in extended mode would look like this:\n\n```\n#ifdef FACTION\n#define _GNU_SOURCE\n#endif\n```\n\n```\n/* This is the function to be tested */\nincrement(int input)\n{\n  return (input + 1);\n}\n\n#ifdef FACTION\n#include <faction.h>\n#include <limits.h>\nFI\n\n  FT(\n    AUTHORS( \"timetoplatypus\" ),\n    SPEC( \"increment() returns 1 when given 0\" ),\n    increment(0) == 1\n  );\n\n  FT(\n    AUTHORS( \"timetoplatypus\" ),\n    SPEC( \"increment() returns 0 when given the largest integer value\" ),\n    increment(INT_MAX) == 0\n  );\n\nFC\n#endif\n```\n\n"
    },
    {
      "title": "Extended Mode Features",
      "level": 3,
      "content": "In extended mode,\n\n- the output can be optionally mirrored to a user-specified log file using the -l flag at runtime.\n- the results table will dynamically resize to the width of the terminal being used. Otherwise, it defaults to a 78 character width.\n\n"
    },
    {
      "title": "See also",
      "level": 2,
      "content": "- Faction homepage\n\n"
    }
  ]
}