{
  "title": "Shell package guidelines",
  "url": "https://wiki.archlinux.org/title/Shell_package_guidelines",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "32-bit – CLR – CMake – Cross – DKMS – Eclipse – Electron – Font – Free Pascal – GNOME – Go – Haskell – Java – KDE – Kernel modules – Lisp – Meson – MinGW – Node.js – Nonfree – OCaml – Perl – PHP – Python – R – Ruby – Rust - Security – Shell – VCS – Web – Wine\n\nRelated articles\n\n- Command-line shell\n\n"
    },
    {
      "title": "Install",
      "level": 2,
      "content": "For users to change shells, the shell must appear in /etc/shells. Most shell packages have install scripts like below:\n\n```\nshellname.install\n```\n\n```\npost_install() {\n    grep -Fqx /bin/shellname /etc/shells || echo /bin/shellname >>/etc/shells\n    grep -Fqx /usr/bin/shellname /etc/shells || echo /usr/bin/shellname >>/etc/shells\n}\n\npost_upgrade() {\n    post_install\n}\n\npost_remove() {\n    sed -i -r '/^(\\/usr)?\\/bin\\/shellname$/d' etc/shells\n}\n```\n\n"
    },
    {
      "title": "Shell completions",
      "level": 2,
      "content": "Most shells provide a built in set of completions for a few common commands while also scanning at least one system directory for functions that may be supplied by other packages. The following table is a summary of where packages may place completion files and what the files should be named.\n\nTable content:\nShell | Directory | File\nBash | /usr/share/bash-completion/completions/ | binary_name\nElvish | /usr/share/elvish/lib/ | binary_name.elv\nFish | /usr/share/fish/vendor_completions.d/ | binary_name.fish\nZsh | /usr/share/zsh/site-functions/ | _binary_name\n\nOther shells:\n\n- Nushell provides some default completions, but does not have a system-wide directory where completions can be provided yet[1]. For packages that generate Nushell completion functions, one solution would be to package them /usr/share/nushell/autoload/binary_name.nu and use a post_install() function to print a tip for users to add a use /path/to/file statement to their configs.\n\n"
    }
  ]
}