{
  "title": "Davfs2",
  "url": "https://wiki.archlinux.org/title/Davfs2",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Related articles\n\n- WebDAV\n\ndavfs2 is a Linux file system driver that allows to mount a WebDAV resource. WebDAV is an extension to HTTP/1.1 that allows remote collaborative authoring of Web resources.\n\n"
    },
    {
      "title": "Installing davfs2",
      "level": 2,
      "content": "Install the davfs2AUR package.\n\n"
    },
    {
      "title": "Configuration and mount options",
      "level": 3,
      "content": "There is a system wide configuration file /etc/davfs2/davfs2.conf and a user configuration file ~/.davfs2/davfs2.conf. The latter is read in addition to the system configuration when invoked by an ordinary user and takes precedence. There are general, WebDAV related, cache related and debugging options. All the available options and their syntax can be found in davfs2.conf(5).\n\nThere are also mount options used to define if needed the path of the configuration file, the owner and group of the filesystem and some other options related to file access. The list of recognised options can be obtained with the following command:\n\n```\n$ mount.davfs -h\n```\n\nAlso see mount.davfs(8) for description and options.\n\n"
    },
    {
      "title": "Using command-line",
      "level": 3,
      "content": "To mount a WebDAV-resource use mount, not mount.davfs directly.\n\n```\n# mount -t davfs http(s)://address:<port>/path /mount/point\n```\n\n"
    },
    {
      "title": "Using systemd",
      "level": 3,
      "content": "To use systemd mounting:\n\n```\n/etc/systemd/system/mnt-webdav-service.mount\n```\n\n```\n[Unit]\nDescription=Mount WebDAV Service\nAfter=network-online.target\nWants=network-online.target\n\n[Mount]\nWhat=http(s)://address:<port>/path\nWhere=/mnt/webdav/service\nOptions=uid=1000,file_mode=0664,dir_mode=2775,grpid\nType=davfs\nTimeoutSec=15\n\n[Install]\nWantedBy=multi-user.target\n```\n\nYou can create an systemd automount unit to set a timeout\n\n```\n/etc/systemd/system/mnt-webdav-service.automount\n```\n\n```\n[Unit]\nDescription=Mount WebDAV Service\n\n[Automount]\nWhere=/mnt/webdav/service\nTimeoutIdleSec=300\n\n[Install]\nWantedBy=remote-fs.target\n```\n\nSee Fstab#Automount with systemd for more tips and tricks when using systemd mount units.\n\n"
    },
    {
      "title": "Using fstab",
      "level": 3,
      "content": "To define how the webdav resource should be mounted into the filesystem, append a fstab entry under the following format:\n\n```\n/etc/fstab\n```\n\n```\nhttps://webdav.example/path /mnt/webdav davfs rw,user,uid=username,noauto 0 0\n```\n\nwhere username is the owner of the mounted file system. It may be a numeric ID or a user name and only root can mount a uid different from the mounting user. _netdev mount option could be used to automount network drives.\n\n"
    },
    {
      "title": "Storing credentials",
      "level": 3,
      "content": "Create a secrets file to store credentials for a WebDAV-service using ~/.davfs2/secrets for user, and /etc/davfs2/secrets for root:\n\n```\n/etc/davfs2/secrets\n```\n\n```\nhttps://webdav.example/path davusername davpassword\n```\n\nMake sure the secrets file contains the correct permissions, for root mounting:\n\n```\n# chmod 600 /etc/davfs2/secrets\n# chown root:root /etc/davfs2/secrets\n```\n\nAnd for user mounting:\n\n```\n$ chmod 600 ~/.davfs2/secrets\n```\n\n"
    },
    {
      "title": "Creating/copying files not possible and/or freezes",
      "level": 3,
      "content": "If creating/copying files is not possible and/or freezes occur, edit the configuration and mount options to use use_locks 0 as option. Default for this parameter is 1 which locks files on the server when they are opened for writing.\n\n"
    },
    {
      "title": "Password in secrets file",
      "level": 3,
      "content": "Be careful for special characters in passwords such as \\ and \". Escape them with \\.\n\n"
    },
    {
      "title": "Network is online but domain lookup fails",
      "level": 3,
      "content": "Sometimes network-online.target is reached but the domain of your WebDAV server still cannot be found: you can wait until the name lookup succeeds manually.\n\nFirst, you need to set up using fstab. Then, for 15 seconds we test if we can reach the server with ping and only try to mount once successful:\n\n```\n/etc/systemd/system/mnt-webdav-service.service\n```\n\n```\n[Unit]\nDescription=Mount WebDAV Service\nAfter=network-online.target\nWants=network-online.target\n\n[Service]\nType=oneshot\nExecStart=bash -c 'for i in {1..15}; do if ping -c 1 mywebdav.server.url; then mount /path/to/mountpoint; break; else sleep 1; fi; done'\nExecStop=umount /path/to/mountpoint\nRemainAfterExit=true\n\n[Install]\nWantedBy=default.target\n```\n\nThis is better used as user unit.\n\n"
    },
    {
      "title": "Error 'different mount options in /etc/fstab' when mounting a webdav resource",
      "level": 3,
      "content": "This happens when:\n\n1. the webdav resource and a mountpoint for it has been set in /etc/fstab\n1. the mountpoint has been passed as an argument to 'mount' command (even if the mountpoint is the same as in /etc/fstab)\n\nFix: do not pass a mountpoint when mounting, so that the value specified in /etc/fstab is used. For example:\n\n```\n$ mount -t davfs https://mywebdav mymountpoint # incorrect\ndifferent mount options in /etc/fstab\n$ mount -t davfs https://mywebdav # correct\n```\n\n"
    },
    {
      "title": "See also",
      "level": 2,
      "content": "- https://ajclarkson.co.uk/blog/auto-mount-webdav-raspberry-pi/[dead link 2025-03-15 â“˜]\n\n"
    }
  ]
}