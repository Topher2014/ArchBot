{
  "title": "Switch users from terminal",
  "url": "https://wiki.archlinux.org/title/Switch_users_from_terminal",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Related articles\n\n- Users and groups\n- sudo\n- List of applications/Security#Privilege elevation\n\nThe su core utility (substitute user) is used to assume the identity of another user on the system, root by default.\n\nSee PAM for ways to configure su's behavior.\n\n"
    },
    {
      "title": "Installation",
      "level": 2,
      "content": "su is part of the util-linux package.\n\n"
    },
    {
      "title": "Usage",
      "level": 2,
      "content": "To assume the login of another user, pass the username that you want to become to su, as in:\n\n```\n$ su username\n```\n\nBy default, when running as a regular user, you will be prompted for the password of the user you are attempting to become. When running su as root, no password is required.\n\nIf no username is passed, su assumes the root user, and the password for which you are prompted will be that of root.\n\nFor more information, see su(1).\n\n"
    },
    {
      "title": "Login shell",
      "level": 3,
      "content": "The default behavior of su is to remain within the current directory and to maintain the environmental variables of the original user (rather than switch to those of the new user).\n\nNote the following important contrasting considerations:\n\n- It sometimes can be advantageous for a system administrator to use the shell account of an ordinary user rather than its own. In particular, occasionally the most efficient way to solve a user's problem is to log into that user's account in order to reproduce or debug the problem.\n- However, in many situations it is not desirable, or it can even be dangerous, for the root user to be operating from an ordinary user's shell account and with that account's environmental variables rather than from its own. While inadvertently using an ordinary user's shell account, root could install a program or make other changes to the system that would not have the same result as if they were made while using the root account. For instance, a program could be installed that could give the ordinary user power to accidentally damage the system or gain unauthorized access to certain data.\n\nThus, it is advisable that administrative users, as well as any other users that are authorized to use su (and it is suggested that there be very few, if any) acquire the habit of always running the su command with the -l/--login option. It has two effects:\n\n1. Switches from the current directory to the home directory of the new user (e.g., to /root in the case of the root user) by logging in as that user.\n1. Changes the environmental variables to those of the new user, as dictated by their preferred shell settings. Such as their ~/.bashrc, and possibly other dot files, for a bash shell. That is, the current directory and environment will be changed to what would be expected if the new user had actually logged on to a new session (rather than just taking over an existing session).\n\nThus, administrators should generally use su as follows:\n\n```\n$ su -l\n```\n\nAn identical result is produced by adding the username root:\n\n```\n$ su -l root\n```\n\nLikewise, the same can be done for any other user (e.g. for a user named archie):\n\n```\n# su -l archie\n```\n\nTo log into a passwordless user, first log in as root and then log into the passwordless user account from the root shell:\n\n```\n$ su -l\n# runuser -l archie\n```\n\n- You will sometimes encounter su being used to get a login shell with su -, rather than su -l/su --login. This shorthand is discouraged because the - option can encounter parsing limitations, see su(1) ยง DESCRIPTION.\n- You may wish to add an alias to ~/.bashrc for this: alias su=\"su -l\"\n\n```\nalias su=\"su -l\"\n```\n\n"
    },
    {
      "title": "su and wheel",
      "level": 3,
      "content": "BSD su allows only members of the wheel user group to assume root's identity by default. This is not the default behavior of GNU su, but this behavior can be mimicked using PAM. Uncomment the appropriate line in /etc/pam.d/su and /etc/pam.d/su-l:\n\n```\nauth required pam_wheel.so use_uid\n```\n\n"
    },
    {
      "title": "Nologin users",
      "level": 3,
      "content": "You cannot run commands as an other user by simply using su user -c command if they are not allowed to login (i.e. they have /bin/false or /usr/bin/nologin set as their shell).\n\nYou can work around this by specifying the shell to use:\n\n```\n# su -s /usr/bin/bash nologin_user\n```\n\n"
    }
  ]
}