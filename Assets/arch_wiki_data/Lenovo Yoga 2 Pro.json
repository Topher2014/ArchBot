{
  "title": "Lenovo Yoga 2 Pro",
  "url": "https://wiki.archlinux.org/title/Lenovo_Yoga_2_Pro",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Note: **This article or section does not follow the Laptop page guidelines.** This article or section does not follow the Laptop page guidelines.\n\nThis article or section does not follow the Laptop page guidelines.\n\nTable content:\nHardware | PCI/USB ID | Working?\nGPU |  | Yes\nWireless |  | Yes\nAudio |  | Yes\nTouchscreen |  | Yes\nAccelerometer |  | Yes\nTouchpad |  | Yes\nCamera |  | Yes\nCard Reader |  | Untested\nBluetooth |  | Yes\n\n"
    },
    {
      "title": "Installation",
      "level": 2,
      "content": "Installing Arch on the HiDPI screen may be difficult as the text will be hard to read. To make the font more readable, before you hit install, disable mode settings. Hit Tab in the arch linux boot menu and append the option nomodeset along with nomodeset kernel parameter. For Intel graphics card you need to add i915.modeset=0 and for Nvidia graphics card you need to add nouveau.modeset=0. For Nvidia Optimus dual-graphics system, you need to add all the three kernel parameters (i.e. \"nomodeset i915.modeset=0 nouveau.modeset=0\").\n\nBe aware, adding nomodeset prevents the kernel from identifying the monitor. As a result brightness adjustment and xrandr will not work. This line should probably be removed after installation.\n\n"
    },
    {
      "title": "The ideapad_laptop module",
      "level": 2,
      "content": "Several problems come up if the ideapad_laptop module is in use. Namely, it blocks the network card and generates a massive stream of warning from the USB subsystem such as:\n\n```\nDec  5 08:40:44 localhost kernel: [  290.632613] xhci_hcd 0000:00:14.0: ep 0x81 - asked for 15360 bytes, 15117 bytes untransferred\nDec  5 08:40:44 localhost kernel: [  290.735110] xhci_hcd 0000:00:14.0: ep 0x81 - asked for 15360 bytes, 15117 bytes untransferred\nDec  5 08:40:44 localhost kernel: [  290.837534] xhci_hcd 0000:00:14.0: ep 0x81 - asked for 15360 bytes, 15117 bytes untransferred\nDec  5 08:40:44 localhost kernel: [  290.940070] xhci_hcd 0000:00:14.0: ep 0x81 - asked for 15360 bytes, 15117 bytes untransferred\nDec  5 08:40:44 localhost kernel: [  291.042570] xhci_hcd 0000:00:14.0: ep 0x81 - asked for 15360 bytes, 15117 bytes untransferred\n```\n\nYou can silence these in the short run by running:\n\n```\n# dmesg -D\n```\n\nAnd you can unblock the wireless card by running:\n\n```\n# rfkill unblock wlan\n```\n\nHowever, in the long term, you will probably want to blacklist the ideapad_laptop driver so that neither of these occur in the first place. I am yet to find a disadvantage to doing so.\n\n"
    },
    {
      "title": "Keyboard and other hardware keys",
      "level": 2,
      "content": "To access boot menu or BIOS settings, you must use the alternate power button, next to the standard one.\n\nNo keypad available at all.\n\n"
    },
    {
      "title": "Keyboard special keys",
      "level": 3,
      "content": "Table content:\nKeys | Function | X sees\nFn+F1 | Audio mute/unmute | XF86AudioMute\nFn+F2 | Audio volume down | XF86AudioLowerVolume\nFn+F3 | Audio volume up | XF86AudioRaiseVolume\nFn+F4 | Close application | Alt_L+F4\nFn+F5 | Refresh page | F5\nFn+F6 | Disable Touchpad | ?\nFn+F7 | Airplane mode | ?\nFn+F8 | Unknown | Alt_L+Tab\nFn+F9 | Turn off LCD | ?\nFn+F10 | Toggle display | Super+p\nFn+F11 | Dim LCD backlight | XF86MonBrightnessDown\nFn+F12 | Brighten LCD backlight | XF86MonBrightnessUp\n\n"
    },
    {
      "title": "Hardware keys on right side",
      "level": 3,
      "content": "From hinge to front:\n\n```\nXF86AudioRaiseVolume\nXF86AudioLowerVolume\nSuper_L+o\n```\n\n"
    },
    {
      "title": "Touchscreen",
      "level": 2,
      "content": "Touchscreen USB device seems to come and go if the usbtouchscreen module is not loaded.\n\n"
    },
    {
      "title": "Multitouch gestures",
      "level": 3,
      "content": "You need to install touchegg in order to enable multitouch gestures. Optionally, you can install touchegg-gce-gitAUR as a graphical front-end. See more details in the dedicated wiki page.\n\n"
    },
    {
      "title": "Touchscreen button",
      "level": 3,
      "content": "The touchscreen button with a Windows logo is mapped as Super. However, key_down and key_up are generated simultaneously on touch release. The haptic feedback (vibration) when touching this button is currently not controllable via software.\n\n"
    },
    {
      "title": "Touchscreen stops working after suspension",
      "level": 3,
      "content": "Sometimes touchscreen stops working after resuming from suspension mode. You should be able to fix the problem reloading the usbhid and usbtouchscreen kernel modules:\n\n```\n# modprobe -r usbhid usbtouchscreen\n```\n\n"
    },
    {
      "title": "ACPI",
      "level": 2,
      "content": "I modified /etc/acpi/default.sh to allow for some debugging and additional features (see below):\n\n```\n#!/bin/sh\nset $*\ngroup=${1%%/*}\ndevice=$2\nid=$3\nvalue=$4\nlog_unhandled() {\n       logger \"ACPI event unhandled: $*\"\n}\ncase \"$group\" in\n       button)\n               case \"$action\" in\n                       power)\n                               /etc/acpi/actions/powerbtn.sh\n                               ;;\n                       lid)\n                               /etc/acpi/actions/lid.sh\n                               ;;\n                       *)      log_unhandled $* ;;\n               esac\n               ;;\n       ac_adapter)\n               case \"$value\" in\n                       *)      log_unhandled $* ;;\n               esac\n               ;;\n       *)      echo $* > /dev/tty5\n               log_unhandled $* ;;\nesac\n```\n\n"
    },
    {
      "title": "Touchpad",
      "level": 3,
      "content": "The touchpad sends random input from time to time, especially when lid is closed. If you like your computer to keep running when the lid is closed, you may want to disable the touchpad with ACPI events:\n\n```\n#!/bin/bash\nexport DISPLAY=:0\nif grep closed /proc/acpi/button/lid/LID0/state\nthen\n       synclient TouchpadOff=1 2>/dev/tty5 && echo \"lid closed, disabling touchpad\" >/dev/tty5\nelse\n       synclient TouchpadOff=0 2>/dev/tty5 && echo \"lid open, eênabling touchpad\" >/dev/tty5\nfi\n```\n\nOf course, the echo statement is optional and for debug purposes.\n\n"
    },
    {
      "title": "Backlight",
      "level": 3,
      "content": "Screen backlight brightness can be manually set with\n\n```\n# echo $VAL > /sys/class/backlight/intel_backlight/brightness\n```\n\nwith $VAL between 0 and 937\n\nIt is possible that you will get a permission denied error, in which case you can run\n\n```\n# chmod a+rw /sys/class/backlight/intel_backlight/brightness\n```\n\nwhich makes the brightness editable by any user.\n\nNote: Some users have experienced brightness being stuck under Windows (10) (when you change it there is no actual change), it will most likely work under arch.\n\n"
    },
    {
      "title": "Battery",
      "level": 3,
      "content": "Battery info can be accessed with\n\n```\nls /sys/class/power_supply/BAT1/*\n```\n\nUnfortunately, the values obtained there have no units (older Lenovo products had rates in mA, battery voltage, etc.)\n\n"
    },
    {
      "title": "Graphics",
      "level": 2,
      "content": "Steam has been known to crash trying to run games complaining about missing i965 module. It seems some applications treat it as accelerated, and some do not.\n\nResolution seems to be not so well supported by some desktop environments/window managers. Gnome-based DEs like Cinnamon and Mate, as well as XFCE and fvwm seem to work fine.\n\nUsers may wish to boost font-sizes, as the HiDPI screen can be hard to read in some settings.\n\nIf you have trouble detecting a display with the micro hdmi port, consider filing the plastic on the male hdmi plug back a bit (not on the laptop). See here. The rubber case can prevent the plug from inserting fully.\n\n"
    },
    {
      "title": "Rotation/Conversion",
      "level": 2,
      "content": "You can easily rotate screen with xrandr, however it does not rotate touchscreen/touchpad input which makes it fairly awkward to use. There is a project attempting to address this. Keyboard hardware-disables in tablet mode, but touchpad is still active which needs to be addressed. No ACPI or keycode signals appear to be emitted for the various screen rotation states.\n\n"
    },
    {
      "title": "See also",
      "level": 2,
      "content": "- The LinLap site has some good information - see [1];\n- a good Review of Arch Linux on a HiDPI Lenovo Yoga 2 Pro by KeithCU with useful comments [2];\n- an installation guide written by Ubuntu users: [3].\n- color profile for fixing the mustard-yellow issue: [4]\n\n"
    }
  ]
}