{
  "title": "XdgMenu",
  "url": "https://wiki.archlinux.org/title/XdgMenu",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "xdg-menu is a tool that generates XDG Desktop Menus for the following window managers:\n\n- awesome\n- Blackbox\n- Fluxbox\n- FVWM2\n- IceWM\n- Openbox\n- twm\n- Window Maker\n\nKDE, GNOME, Xfce and Enlightenment are already XDG compatible.\n\n"
    },
    {
      "title": "Installation",
      "level": 2,
      "content": "Install the archlinux-xdg-menu package.\n\n"
    },
    {
      "title": "Menu hierarchy",
      "level": 2,
      "content": "- Applications Accessibility Accessories Development Education Games Graphics Internet Multimedia Office Other Science System\n\n- Accessibility\n- Accessories\n- Development\n- Education\n- Games\n- Graphics\n- Internet\n- Multimedia\n- Office\n- Other\n- Science\n- System\n\n"
    },
    {
      "title": "Configuration",
      "level": 2,
      "content": "xdg_menu relies on three sets of information to generate menus: a root menu or in other words an XML menu template generally passed on the command line, information cached when it was last run, and a series of configuration files.\n\n- You can find some XML menu templates in /etc/xdg/menus.\n- If altering the code in xdg_menu to change layout, make sure you delete everything in ~/.xdg_menu_cache or you will spend hours trying to figure out why your changes to the perl script do not take.\n- You can find individual application configurations in /usr/share/applications.\n\nOther configuration file directories can be found under /usr/share. In most cases you will not need to touch these. However if you want to change how your menu is layed out you can alter the menu template for minor changes. Major changes require tweaking the actual xdg_menu perl script. If you find that applications do not appear or that they are called strange things, then you will need to look at the .desktop file in /usr/share/applications. Check the desktop entry specification.\n\n"
    },
    {
      "title": "Adding desktop entries from other directories",
      "level": 3,
      "content": "By default, the Xdg-menu will be populated with applications which install their desktop entries to /usr/share/applications. To add applications to the menu which install their desktop entry to a user folder such as ~/.local/share/applications, edit the /etc/xdg/menus/arch-applications.menu file and add an <AppDir> tag for the relevant directory, see below:\n\n```\n/etc/xdg/menus/arch-applications.menu\n```\n\n```\n<Menu>\n\n  <Name>Applications</Name>\n  <Directory>Arch-Applications.directory</Directory>\n  <DefaultAppDirs/>\n  <AppDir>/home/username/.local/share/applications</AppDir>\n  <DefaultDirectoryDirs/>\n  <DefaultMergeDirs/>\n  ...\n```\n\n"
    },
    {
      "title": "xdg_menu",
      "level": 3,
      "content": "```\nxdg_menu [--format <format>] [--desktop <desktop>] \n         [--charset <charset>] [--language <language>]  \n\t [--root-menu <root-menu>] [--die-on-error]\n\t [--fullmenu] [--help]\n\t\t \n\tformat - output format\n\t         possible formats: twm, WindowMaker, fvwm2, icewm, ion3\n\t                           blackbox, fluxbox, openbox, \n\t\t\t\t   xfce4, openbox3, openbox3-pipe, awesome\n\t\t\t\t   readable\n\t\t default: WindowMaker\n\t\t\n \tfullmenu  - output a full menu and not only a submenu\n\n\tdesktop - desktop name for NotShowIn and OnlyShowIn\n\t\t default: the same as format\n\t\t\t \n\tcharset - output charset\n\t\t default: <locale>\n\t\t\t \n\tlanguage - output language\n\t\t default: <locale>\n\t\t\t \n\troot-menu - location of root menu file\n\t\t default: /opt/gnome/etc/xdg/menus/applications.menu\n\t\t\t \n\tdie-on-error - abort execution on any error, \n\t\t default: try to continue\n\n\tverbose - print debugging information\n\t\t \n\thelp - print this text\n```\n\n"
    },
    {
      "title": "update-menus",
      "level": 3,
      "content": "update-menus updates WM's menus from XDG data and can be configured to do it automaticaly.\n\nThis is a script wrapper around xdg_menu that relies on /etc/update-menus.conf\n\nTo use it, you need to install the archlinux-xdg-menu package (xdg_menu)\n\nIn /etc/update-menus.conf, you have to select from a list of window managers for which the menu should be generated. Comments with # are allowed.\n\nAll generated menus are placed in /var/cache/xdg-menu/. See wm-specific #Examples section of this page to get more information.\n\n"
    },
    {
      "title": "With xdg_menu",
      "level": 4,
      "content": "```\n$ xdg_menu --format awesome --root-menu /etc/xdg/menus/arch-applications.menu > ~/.config/awesome/archmenu.lua\n```\n\nThen, edit your rc.lua as shown below.\n\n- Add a require statment for your new menu.lua file.\n- Add an entry to your awful.menu object for your new menu which calls xdg-menu.\n\n```\n...\nxdg_menu = require(\"archmenu\")\n...\n\n...\nmymainmenu = awful.menu({ items = { { \"awesome\", myawesomemenu, beautiful.awesome_icon },\n                                    { \"Applications\", xdgmenu },\n                                    { \"open terminal\", terminal }\n                                  }\n                        })\n...\n```\n\n"
    },
    {
      "title": "With xdg_menu",
      "level": 4,
      "content": "```\n$ xdg_menu --format icewm --fullmenu --root-menu /etc/xdg/menus/arch-applications.menu >> ~/.icewm/programs\n```\n\n"
    },
    {
      "title": "With update-menus",
      "level": 4,
      "content": "- Uncomment icewm in /etc/update-menus.conf.\n- Run update-menus as root.\n- Make a symlink to /var/cache/xdg-menu/icewm/programs in ~/.icewm/programs.\n\n"
    },
    {
      "title": "With xdg_menu",
      "level": 4,
      "content": "```\n$ xdg_menu --format fluxbox --root-menu /etc/xdg/menus/arch-applications.menu > ~/.fluxbox/my-menu\n```\n\nChange your menu file to include the generated menu.\n\nFor example, add this line:\n\n```\n[include] (my-menu)\n```\n\n"
    },
    {
      "title": "With update-menus",
      "level": 4,
      "content": "- Uncomment fluxbox in /etc/update-menus.conf.\n- Run update-menus as root.\n- Change your menu file to include generated menu.\n\nFor example, add this line:\n\n```\n[include] (/var/cache/xdg-menu/fluxbox/boxrc)\n```\n\n"
    },
    {
      "title": "With xdg_menu",
      "level": 4,
      "content": "Generate menu with:\n\n```\n$ xdg_menu --format openbox3 --root-menu /etc/xdg/menus/arch-applications.menu > xdg-menu.xml\n```\n\nAnd manually add it into your menu.xml. For example, put xdg-menu.xml into menu.xml and add:\n\n```\n<menu id=\"Applications\" />\n```\n\nInto root-menu.\n\n"
    },
    {
      "title": "As a pipe menu",
      "level": 4,
      "content": "Using xdg_open as a pipe menu gives you the added benefit of having a menu that automatically updates when you install new applications.\n\nAdd the following somewhere inside your menu.xml between your root menu tags:\n\n```\n<menu id=\"applications\" label=\"Applications\" execute=\"xdg_menu --format openbox3-pipe --root-menu /etc/xdg/menus/arch-applications.menu\" />\n```\n\nA very basic example:\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<openbox_menu xmlns=\"http://openbox.org/3.4/menu\">\n\n<menu id=\"root-menu\" label=\"Openbox 3\">\n  <menu id=\"applications\" label=\"Applications\" execute=\"xdg_menu --format openbox3-pipe --root-menu /etc/xdg/menus/arch-applications.menu\" />\n  <separator />\n  <item label=\"Log Out\">\n    <action name=\"Exit\">\n      <prompt>yes</prompt>\n    </action>\n  </item>\n</menu>\n\n</openbox_menu>\n```\n\n"
    },
    {
      "title": "With update-menus",
      "level": 4,
      "content": "- Uncomment openbox in /etc/update-menus.conf.\n- Run update-menus as root.\n- Change your menu.xml file to include generated menu.\n\nFor example, add following to root-menu:\n\n```\n<menu id=\"xdg-menu\" label=\"XDG Menu\" execute=\"cat /var/cache/xdg-menu/openbox/menu.xml\"/>\n```\n\n"
    },
    {
      "title": "With xdg_menu",
      "level": 4,
      "content": "Use:\n\n```\n$ xdg_menu --format twm --root-menu /etc/xdg/menus/arch-applications.menu >my-twm-menu\n```\n\nAnd add it into twmrc manually. In the case of twm derivatives with m4 preprocessing such as vtwm or ctwm it can be included by adding:\n\n```\nsinclude(`/PATH/TO/my-twm-menu')\n```\n\nTo *twmrc.\n\n"
    },
    {
      "title": "With update-menus",
      "level": 4,
      "content": "- Uncomment twm in /etc/update-menus.conf.\n- Add in /etc/X11/twm/system.twmrc a file applications menu (add it into defops menu):\n\n```\n\"apps\"          f.menu \"Applications\"\n```\n\n- Run update-menus as root.\n- Run twm -f /var/cache/xdg-menu/twm/twmrc.\n\n"
    },
    {
      "title": "With xdg_menu",
      "level": 4,
      "content": "Use:\n\n```\n$ xdg_menu --format WindowMaker --root-menu /etc/xdg/menus/arch-applications.menu >my-wm-menu\n```\n\nAnd add:\n\n```\n#include \"my-wm-menu\"\n```\n\nInto your WindowMaker menu file.\n\nYou can also use the WPrefs \"Application Menu Definitions\", and add the xdg command as a parameter in a \"Generated Submenu\" object.\n\n"
    },
    {
      "title": "With update-menus",
      "level": 4,
      "content": "- Uncomment WindowMaker in /etc/update-menus.conf.\n- Run update-menus as root.\n- Add:\n\n```\n#include \"/var/cache/xdg-menu/WindowMaker/wmrc\"\n```\n\nInto your menu file.\n\n"
    },
    {
      "title": "With xdg_menu",
      "level": 4,
      "content": "Generate the menu:\n\n```\n$ xdg_menu --format fvwm2 --root-menu /etc/xdg/menus/arch-applications.menu >fvwm2-menu\n```\n\nAnd add it into the root menu:\n\n```\nread fvwm2-menu\n\nAddToMenu MenuFvwmRoot  \"Root Menu\"             Title\n+                       \"&0. XDG Menu\"          Popup xdg_menu\n```\n\n"
    },
    {
      "title": "With update-menus",
      "level": 4,
      "content": "- Uncomment fvwm2 in /etc/update-menus.conf.\n- Run update-menus as root.\n- Change your .fvwm2rc file to include generated menu. For example:\n\n```\nAddToMenu MenuFvwmRoot  \"Root Menu\"             Title\n+                       \"&0. XDG Menu\"          Popup xdg_menu\n```\n\n```\nread /var/cache/xdg-menu/fvwm2/fvwm2rc\n```\n\n"
    },
    {
      "title": "With xdg_menu",
      "level": 4,
      "content": "```\n$ xdg_menu --format blackbox  --root-menu /etc/xdg/menus/arch-applications.menu >my-menu\n```\n\nChange your menu file to include the generated menu.\n\nFor example, add this line:\n\n```\n[include] (my-menu)\n```\n\n"
    },
    {
      "title": "With update-menus",
      "level": 4,
      "content": "- Uncomment blackbox in /etc/update-menus.conf.\n- Run update-menus as root.\n- Change your menu file to include the generated menu.\n\nFor example, add this line:\n\n```\n[include] (/var/cache/xdg-menu/blackbox/boxrc)\n```\n\n"
    },
    {
      "title": "See also",
      "level": 2,
      "content": "- Sawfish#Menus\n- https://github.com/gapan/xdgmenumaker\n\n"
    }
  ]
}