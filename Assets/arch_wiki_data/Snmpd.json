{
  "title": "Snmpd",
  "url": "https://wiki.archlinux.org/title/Snmpd",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "SNMP is a standard Internet protocol (RFC 1157) designed for the management and monitoring of network devices. Arch Linux offers Net-SNMP, among other SNMP implementations. This article discusses configuration and testing of the snmpd daemon which is part of the net-snmp package.\n\n"
    },
    {
      "title": "Installation",
      "level": 2,
      "content": "There is a single package for net-snmp in Arch Linux which contains both the snmpd daemon, and the accompanying utilities.\n\nInstall the net-snmp package.\n\n"
    },
    {
      "title": "SNMP 1 and 2c",
      "level": 3,
      "content": "There are three versions of SNMP which are supported by net-snmp: 1, 2c and 3. Versions 1 and 2c start with the same basic configuration, using /etc/snmp/snmpd.conf.\n\n```\n# mkdir /etc/snmp/\n# echo rocommunity read_only_community_string >> /etc/snmp/snmpd.conf\n```\n\nThe above commands will add a community string that can be used for monitoring. Optionally, you can add another community string used for management. This is not recommended unless you have a specific reason to do so.\n\n```\n# echo rwcommunity read_write_community_string >> /etc/snmp/snmpd.conf\n```\n\n"
    },
    {
      "title": "SNMP 3",
      "level": 3,
      "content": "SNMP v3 adds security and encrypted authentication/communication. It uses a different configuration scheme in /etc/snmp/snmpd.conf and additional configuration in /var/net-snmp/snmpd.conf.\n\nFor the former configuration file in /etc/, write directly to it or use the snmpconf wizard:\n\n```\n# mkdir /etc/snmp/\n# echo rouser read_only_user >> /etc/snmp/snmpd.conf\n```\n\n```\n$ snmpconf -g basic_setup\n```\n\nFor the latter configuration file in /var/, write directly to it or use net-snmp-create-v3-user:\n\n```\n# mkdir -p /var/net-snmp/\n# echo createUser read_only_user SHA password1 AES password2 > /var/net-snmp/snmpd.conf\n```\n\n```\n# net-snmp-create-v3-user -ro -a SHA -x AES\n```\n\nNote that once snmpd is (re)started, /var/net-snmp/snmpd.conf will be rewritten, and the clear-text passwords that you have entered will be encrypted.\n\n"
    },
    {
      "title": "Daemon",
      "level": 3,
      "content": "Start/enable snmpd.service.\n\n"
    },
    {
      "title": "Testing",
      "level": 2,
      "content": "If using SNMP 1 or 2c, use one of the following commands to test configuration:\n\n```\n# snmpwalk -v 1 -c read_only_community_string localhost | less\n# snmpwalk -v 2c -c read_only_community_string localhost | less\n```\n\nIf using SNMP 3, use the following command to test configuration:\n\n```\n# snmpwalk -v 3 -u read_only_user -a SHA -A password1 -x AES -X password2 -l authNoPriv localhost | less\n```\n\nEither way, you should see several lines of data looking something like:\n\n```\nSNMPv2-MIB::sysDescr.0 = STRING: Linux myhost 2.6.37-ARCH #1 SMP PREEMPT Sat Jan 29 20:00:33 CET 2011 x86_64\nSNMPv2-MIB::sysObjectID.0 = OID: ccitt.1\nDISMAN-EVENT-MIB::sysUpTimeInstance = Timeticks: (307772) 0:51:17.72\nSNMPv2-MIB::sysContact.0 = STRING: root@localhost\nSNMPv2-MIB::sysName.0 = STRING: myhost\n...SNIP...\n```\n\n"
    }
  ]
}