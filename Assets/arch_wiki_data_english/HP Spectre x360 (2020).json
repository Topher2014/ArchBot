{
  "title": "HP Spectre x360 (2020)",
  "url": "https://wiki.archlinux.org/title/HP_Spectre_x360_(2020)",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Note: **This article or section does not follow the Laptop page guidelines.** This article or section does not follow the Laptop page guidelines.\n\nThis article or section does not follow the Laptop page guidelines.\n\nTable content:\nHardware | PCI/USB ID | Working?\nGPU | 8086:9a49 | Yes\nWireless | 8086:a0f0 | Yes\nBluetooth | 8087:0026 | Yes\nAudio | 8086:a0c8 | Yes\nTouchpad | 04F3:315B | Yes\nTouchscreen | 04F3:2BF1 | Yes\nWebcam | 0408:5442 | Yes\nFingerprint sensor | 04f3:0c4c | Experimental\n\nThis article covers hardware specific configuration of this laptop, some minor issues remain after customization. These can be performed after an installation of Arch Linux has been finished and the machine rebooted into it.\n\nFor a general overview of laptop-related articles and recommendations, see Laptop.\n\n"
    },
    {
      "title": "Hardware options",
      "level": 3,
      "content": "This wiki covers the HP Spectre x360 released in 2020 containing TigerLake CPUs. The SKUs covered by this article include, but might not be limited to:\n\n- 13-aw2777ng\n- 14t-ea000\n- 14-ea0x\n\n"
    },
    {
      "title": "Brightness / backlight (OLED Screens)",
      "level": 3,
      "content": "See Backlight for more information on how to configure backlight control. Some OLED displays require additional software to be able to adjust the backlight as there is not really a backlight. See also Backlight#Unable to control eDP Panel brightness (Intel i915 only) in this case.\n\nicc-brightness-gnome-gitAUR can be installed which may enable brightness control under GNOME (and possibly other environments).\n\n"
    },
    {
      "title": "Rotation",
      "level": 3,
      "content": "For GNOME and Plasma and possibly others install iio-sensor-proxy.\n\n"
    },
    {
      "title": "Audio",
      "level": 3,
      "content": "This laptop requires Sound Open Firmware in order for the soundcard to work.\n\nEnsure that PulseAudio is configured and running. Ensure that PulseAudio can detect the sound card:\n\n```\n$ pactl list cards\n```\n\n```\nCard #0\n\tName: alsa_card.pci-0000_00_1f.3-platform-skl_hda_dsp_generic\n\tDriver: module-alsa-card.c\n\tOwner Module: 6\n\tProperties:\n\t\talsa.card = \"0\"\n\t\talsa.card_name = \"sof-hda-dsp\"\n\t\talsa.long_card_name = \"HP-HPSpectrex360Convertible14t_ea000--87F7\"\n\t\talsa.driver_name = \"snd_soc_skl_hda_dsp\"\n\t\tdevice.bus_path = \"pci-0000:00:1f.3-platform-skl_hda_dsp_generic\"\n\t\tsysfs.path = \"/devices/pci0000:00/0000:00:1f.3/skl_hda_dsp_generic/sound/card0\"\n\t\tdevice.bus = \"pci\"\n\t\tdevice.vendor.id = \"8086\"\n\t\tdevice.vendor.name = \"Intel Corporation\"\n\t\tdevice.product.id = \"a0c8\"\n\t\tdevice.product.name = \"Tiger Lake-LP Smart Sound Technology Audio Controller\"\n\t\tdevice.string = \"0\"\n\t\tdevice.description = \"Tiger Lake-LP Smart Sound Technology Audio Controller\"\n\t\tmodule-udev-detect.discovered = \"1\"\n\t\tdevice.icon_name = \"audio-card-pci\"\n\tProfiles:\n\t\tHiFi: Play HiFi quality Music (sinks: 4, sources: 2, priority: 8000, available: yes)\n\t\toff: Off (sinks: 0, sources: 0, priority: 0, available: yes)\n\tActive Profile: HiFi\n\tPorts:\n\t\t[Out] HDMI3: HDMI3 Output (type: HDMI, priority: 700, latency offset: 0 usec, not available)\n\t\t\tPart of profile(s): HiFi\n\t\t[Out] HDMI2: HDMI2 Output (type: HDMI, priority: 600, latency offset: 0 usec, not available)\n\t\t\tPart of profile(s): HiFi\n\t\t[Out] HDMI1: HDMI1 Output (type: HDMI, priority: 500, latency offset: 0 usec, not available)\n\t\t\tPart of profile(s): HiFi\n\t\t[Out] Speaker: Speaker (type: Speaker, priority: 100, latency offset: 0 usec, availability unknown)\n\t\t\tPart of profile(s): HiFi\n\t\t[Out] Headphones: Headphones (type: Headphones, priority: 200, latency offset: 0 usec, not available)\n\t\t\tPart of profile(s): HiFi\n\t\t[In] Mic2: Headphones Stereo Microphone (type: Mic, priority: 200, latency offset: 0 usec, not available)\n\t\t\tPart of profile(s): HiFi\n\t\t[In] Mic1: Digital Microphone (type: Mic, priority: 100, latency offset: 0 usec, availability unknown)\n\t\t\tPart of profile(s): HiFi\n```\n\nNo additional configuration should be required to get PulseAudio to detect the card.\n\n"
    },
    {
      "title": "Kernels prior to 5.14.2",
      "level": 4,
      "content": "The information below pertains to kernels before 5.14.2 and is kept in case of new models which require additional kernel patches.\n\nOnce the card is detected, you need to run the following:\n\n```\n# hda-verb /dev/snd/hwC0D0 0x01 SET_GPIO_DIR 0x01\n# hda-verb /dev/snd/hwC0D0 0x01 SET_GPIO_MASK 0x01\n# hda-verb /dev/snd/hwC0D0 0x01 SET_GPIO_DATA 0x01\n# hda-verb /dev/snd/hwC0D0 0x01 SET_GPIO_DATA 0x00\n```\n\nThen restart PulseAudio. You might need to apply the above changes twice to get them to take effect. The above will need to be run on every boot until upstream makes the required changes. This is because \"The audio chip has an amplifier pin that needs to be set. It is pin 1...\"\n\nhttps://askubuntu.com/questions/1263178/20-04-no-speaker-audio-on-hp-spectre-x360-2020-15t-eb000\n\nThe kernel may be patched by updating the quirk list at sound/pci/hda/patch_realtek.c with the appropriate subdevice ID.\n\n"
    },
    {
      "title": "Keyboard",
      "level": 3,
      "content": "After boot or resume the keyboard may fail to respond for up to 30 seconds. This is due to a bug in the i8042 emulation provided by the firmware. This can be worked around with a modified i8042 module using DKMS. Follow the instructions here to install the module.\n\n"
    },
    {
      "title": "Function Keys",
      "level": 3,
      "content": "All function keys work as expected except the keys mentioned below.\n\n"
    },
    {
      "title": "Microphone Mute (F8)",
      "level": 4,
      "content": "Note: **This article or section needs language, wiki syntax or style improvements. See Help:Style for reference.** This article or section needs language, wiki syntax or style improvements. See Help:Style for reference.\n\nThis article or section needs language, wiki syntax or style improvements. See Help:Style for reference.\n\nThe OS does not recognize the key press, but it does detect it and can be manually configured.\n\n```\n[ 2834.402270] atkbd serio0: Unknown key pressed (translated set 2, code 0x82 on isa0060/serio0).\n[ 2834.402274] atkbd serio0: Use 'setkeycodes e002 <keycode>' to make it known.\n[ 2834.487944] hp_wmi: Unknown key code - 0x270\n[ 2834.494508] atkbd serio0: Unknown key released (translated set 2, code 0x82 on isa0060/serio0).\n[ 2834.494514] atkbd serio0: Use 'setkeycodes e002 <keycode>' to make it known.\n```\n\nCreate the following file\n\n```\n/etc/udev/hwdb.d/90-internal-keyboard.hwdb\n```\n\n```\nevdev:input:b0011v0001p0001eAB83*\n KEYBOARD_KEY_82=f20\n```\n\nThen run\n\n```\n# systemd-hwdb update\n```\n\nand reboot for good measure.\n\n"
    },
    {
      "title": "Kill Camera",
      "level": 4,
      "content": "The Disable Camera button physically disconnects the Webcam device from the host. The OS does not recognize the keypress, but it is detected.\n\nDisconnected:\n\n```\n[ 2449.374540] hp_wmi: Unknown event_id - 26 - 0xff\n[ 2449.480281] usb 3-5: USB disconnect, device number 5\n```\n\nRe-connected:\n\n```\n[ 2451.701121] hp_wmi: Unknown event_id - 26 - 0xfe\n[ 2451.930245] usb 3-5: new high-speed USB device number 6 using xhci_hcd\n[ 2452.072569] usb 3-5: New USB device found, idVendor=0408, idProduct=5442, bcdDevice= 0.11\n[ 2452.072574] usb 3-5: New USB device strings: Mfr=3, Product=1, SerialNumber=2\n[ 2452.072576] usb 3-5: Product: HP True Vision HD Camera\n...\n```\n\n"
    },
    {
      "title": "Fingerprint Reader",
      "level": 3,
      "content": "The fingerprint reader is not supported out of the box by libfprint. An experimental driver has been developed by Davide Depau and at the time of writing there is an open Merge Request to libfprint to add this driver: [1].\n\nUntil this driver has been merged the package libfprint-elanmoc2-gitAUR may be used which builds directly from Davide's repository. This driver has limitations, in particular it requires that all existing prints to be cleared before it will work, see the MR for more details.\n\nIf you have removed Windows and wish to clear all prints then this is possible from the BIOS menu.\n\nFor more information on libfprint see Fprint.\n\n"
    }
  ]
}