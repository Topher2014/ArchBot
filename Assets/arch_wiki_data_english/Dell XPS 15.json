{
  "title": "Dell XPS 15",
  "url": "https://wiki.archlinux.org/title/Dell_XPS_15",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Note: **This article or section is a candidate for merging with Laptop/Dell#XPS.** This article or section is a candidate for merging with Laptop/Dell#XPS.\n\nThis article or section is a candidate for merging with Laptop/Dell#XPS.\n\nThis page is a work in progress! More info coming soon.\n\nNote: **This article or section does not follow the Laptop page guidelines.** This article or section does not follow the Laptop page guidelines.\n\nThis article or section does not follow the Laptop page guidelines.\n\nTable content:\nHardware | PCI/USB ID | Working?\nEthernet |  | Yes\nWireless |  | Yes\nAudio |  | Yes\nBluetooth |  | Yes\nTouchpad |  | Yes\nGPU |  | Partial\nWebcam |  | Yes\n\n"
    },
    {
      "title": "Differences between XPS 9550 & Precision 5510",
      "level": 2,
      "content": "The Precision 5510 is essentially identical to the XPS 9550 variant, with the exception of an Intel Wireless NIC & Quadro 1000M Graphics Chip. Compared to the 9550's Broadcom NIC & 960M graphics chip.\n\n"
    },
    {
      "title": "XPS 15 9560 and \"early 2017\" revision",
      "level": 2,
      "content": "There is a dedicated page for version 9560 from 2016 and 2017 (especially troubleshouting video related problems).\n\n"
    },
    {
      "title": "Power Management",
      "level": 3,
      "content": "For the Sandy Bridge model (L502X): Suspend works; hibernation does not (it gets hung on a flashing cursor in text mode and does not even switch video modes).\n\nIf hibernation/resume fails, or does not consistently work, try each of the following:\n\n- Enable early KMS for intel_agp and i915.\n\n- Create the following configuration file (Source):\n\n```\n/etc/systemd/sleep.conf\n```\n\n```\n[Sleep]\nHibernateState=disk\nHibernateMode=shutdown\n```\n\n"
    },
    {
      "title": "Sound",
      "level": 3,
      "content": "Note: **This article or section needs language, wiki syntax or style improvements. See Help:Style for reference.** This article or section needs language, wiki syntax or style improvements. See Help:Style for reference.\n\nThis article or section needs language, wiki syntax or style improvements. See Help:Style for reference.\n\nFor the XPS 9550 variant, sound works out of the box with the linux kernel. If you try to plug in headphones, you will not hear any output from them. Upon restart, you will receive a Dummy Output as your sound card.\n\ndmesg gives you this output:\n\n```\nsnd_hda_intel 0000:00:1f.3: CORB reset timeout#1, CORBRP = 0\nsnd_hda_intel 0000:00:1f.3: no codecs found!\n```\n\naplay -l should give you this output if Arch can detect your soundcard:\n\n```\n**** List of PLAYBACK Hardware Devices ****\ncard 0: PCH [HDA Intel PCH], device 0: ALC3266 Analog [ALC3266 Analog]\n  Subdevices: 0/1\n  Subdevice #0: subdevice #0\ncard 0: PCH [HDA Intel PCH], device 3: HDMI 0 [HDMI 0]\n  Subdevices: 1/1\n  Subdevice #0: subdevice #0\ncard 0: PCH [HDA Intel PCH], device 7: HDMI 1 [HDMI 1]\n  Subdevices: 1/1\n  Subdevice #0: subdevice #0\ncard 0: PCH [HDA Intel PCH], device 8: HDMI 2 [HDMI 2]\n  Subdevices: 1/1\n  Subdevice #0: subdevice #0\n```\n\naplay -l will give you this output if Arch cannot detect your soundcard:\n\n```\naplay: device_list:268: no soundcards found...\n```\n\nYou may or may not get sound back after a few restarts. This is a bug and has been documented here: FS#49157\n\nWorkarounds:\n\n- Install alsa-utils and run hdajackretask just toggle the drop down.\n- Suspend and resume your computer (thank you spheenik)\n- Restart your computer\n- Disable sound BIOS, powerboot into Arch, enable sound in BIOS, start Arch with sound back\n- Connect external sound card via USB\n\nRegardless, for now, it is recommended that you do not/reduce hot-plugging headphones as it makes ALSA/PulseAudio break/very unstable.\n\n"
    },
    {
      "title": "Microphone",
      "level": 3,
      "content": "The XPS 15 provides a combo jack for audio input and output.\n\n"
    },
    {
      "title": "No audio input through combo jack",
      "level": 4,
      "content": "Headsets might only be recognized as headphones. Passing model=auto to the snd-hda-intel kernel module solves this issue. This can be done by creating:\n\n```\n/etc/modprobe.d/fix-audio-input.conf\n```\n\n```\noptions snd-hda-intel model=auto\n```\n\n"
    },
    {
      "title": "Graphics",
      "level": 3,
      "content": "By default, both Intel and NVidia cards are active, which can consume a lot of power. Using the Intel-only setup below, you can reduce your battery usage by disabling the Nvidia card. The Intel and Nvidia setup describes how to utilize both cards and save power using Bumblebee. See also Hybrid graphics.\n\n"
    },
    {
      "title": "Intel only",
      "level": 4,
      "content": "If your model comes with an nVidia card which you do not use then you can try to disable it with an ACPI command. Depending on the model, this can have a small to profound effect on the laptop's temperature and battery life (it can more than double battery life!)\n\n- Install the Intel video driver using the xf86-video-intel package.\n\n- To make sure nVidia module will not load into your system: Remove nouveau and/or nvidia drivers Use acpi_call (compile acpi_call or use one of the AUR packages) to disable the nVidia card\n\n- Remove nouveau and/or nvidia drivers\n- Use acpi_call (compile acpi_call or use one of the AUR packages) to disable the nVidia card\n\n```\nmodprobe acpi_call\n./usr/share/acpi_call/examples/turn_off_gpu.sh\n```\n\nor:\n\n```\nsudo /usr/share/linux610-acpi_call/examples/turn_off_gpu.sh\n```\n\nOne of the many results will be \"works!\". Use the value that works in the following call:\n\n```\necho '\\_SB.<YOUR>.<POSITIVE>.<VALUE>._OFF' > /proc/acpi/call\n```\n\nIf none worked, you can try one of the other files in the /usr/share/acpi_call/examples directory.\n\nFor example, the following works on the XPS 15 9550 and L502x model:\n\n```\necho '\\_SB.PCI0.PEG0.PEGP._OFF' > /proc/acpi/call\n```\n\nYou can use this command before and after to see how the battery consumption change (you need to disconnect sector first and the lower the better):\n\n```\ncat /sys/class/power_supply/BAT0/current_now\n```\n\nTo make this permanent, just create a systemd unit file with your working command.\n\n"
    },
    {
      "title": "Intel with Nvidia",
      "level": 4,
      "content": "The Optimus setup consists of the integrated Intel chip connected to the laptop screen and the Nvidia card runs through this. As such, the Nvidia chip cannot be used without the Intel chip (some other laptops have the option in BIOS to turn Intel off and use just Nvidia, but not this laptop).\n\nSee the Bumblebee page set of instructions, particularly the Intel/Nvidia section which has been tested. The main thing to note is that installing both the Intel and Nvidia packages at once tends to avoid dependency issues.\n\n"
    },
    {
      "title": "Screen",
      "level": 3,
      "content": "9550 Flickering Screen:\n\nTo fix screen flickering issues add i915.edp_vswing=2 to your boot parameters.\n\n"
    },
    {
      "title": "External Display",
      "level": 3,
      "content": "Since the Display Port is controlled by the Intel driver, it tends to work quite well and will usually mirror the laptop display without configuration. Getting both the HDMI and DP adapters to display separate requires additional setup.\n\nThe Display Port can be accessed with a USB-C to Display Port adaptor, it should be a adaptor that works via \"alternate mode\" such as the plugable cable [1] (known to work), there are other adaptors that did not work (KiWiBiRD USB 3.1 Type C THUNDERBOLT 3 to DisplayPort 4K Adapter), though why it did not is unknown.\n\n"
    },
    {
      "title": "Multihead",
      "level": 4,
      "content": "The following instructions should help configure the laptop to display separate output on two external monitors. These instructions are similar in nature to the instructions on the Bumblebee page, though recent advancements in virtual displays on Intel reduce the number of steps and packages needed.\n\n- First, follow the instructions in the previous section to install drivers for both Intel and Nvidia with Bumblebee.\n- Run Xorg -configure to generate a xorg.conf file. It may have a different filename, so watch the output and regardless of where it generates it, copy it to /etc/X11/xorg.conf. This should generate something like the following (for two external monitors):\n\n```\n/etc/X11/xorg.conf\n```\n\n```\nSection \"ServerLayout\"\n\tIdentifier     \"X.org Configured\"\n\tScreen      0  \"Screen0\" 0 0\n\tScreen      1  \"Screen1\" RightOf \"Screen0\"\n\tInputDevice    \"Mouse0\" \"CorePointer\"\n\tInputDevice    \"Keyboard0\" \"CoreKeyboard\"\nEndSection\n\nSection \"Files\"\n\tModulePath   \"/usr/lib/xorg/modules\"\n\tFontPath     \"/usr/share/fonts/misc/\"\n\tFontPath     \"/usr/share/fonts/TTF/\"\n\tFontPath     \"/usr/share/fonts/OTF/\"\n\tFontPath     \"/usr/share/fonts/Type1/\"\n\tFontPath     \"/usr/share/fonts/100dpi/\"\n\tFontPath     \"/usr/share/fonts/75dpi/\"\nEndSection\n\nSection \"Module\"\n\tLoad  \"glx\"\nEndSection\n\nSection \"InputDevice\"\n\tIdentifier  \"Keyboard0\"\n\tDriver      \"kbd\"\nEndSection\n\nSection \"InputDevice\"\n\tIdentifier  \"Mouse0\"\n\tDriver      \"mouse\"\n\tOption\t    \"Protocol\" \"auto\"\n\tOption\t    \"Device\" \"/dev/input/mice\"\n\tOption\t    \"ZAxisMapping\" \"4 5 6 7\"\nEndSection\n\nSection \"Monitor\"\n\tIdentifier   \"Monitor0\"\n\tVendorName   \"Monitor Vendor\"\n\tModelName    \"Monitor Model\"\nEndSection\n\nSection \"Monitor\"\n\tIdentifier   \"Monitor1\"\n\tVendorName   \"Monitor Vendor\"\n\tModelName    \"Monitor Model\"\nEndSection\n\nSection \"Device\"\n\tIdentifier  \"Card0\"\n\tDriver      \"nvidia\"\n\tBusID       \"PCI:1:0:0\"\nEndSection\n\nSection \"Device\"\n\tIdentifier  \"Card1\"\n\tDriver      \"intel\"\n\tBusID       \"PCI:0:2:0\"\nEndSection\n\nSection \"Screen\"\n\tIdentifier \"Screen0\"\n\tDevice     \"Card0\"\n\tMonitor    \"Monitor0\"\n\tSubSection \"Display\"\n\t\tViewport   0 0\n\t\tDepth     1\n\tEndSubSection\n\tSubSection \"Display\"\n\t\tViewport   0 0\n\t\tDepth     4\n\tEndSubSection\n\tSubSection \"Display\"\n\t\tViewport   0 0\n\t\tDepth     8\n\tEndSubSection\n\tSubSection \"Display\"\n\t\tViewport   0 0\n\t\tDepth     15\n\tEndSubSection\n\tSubSection \"Display\"\n\t\tViewport   0 0\n\t\tDepth     16\n\tEndSubSection\n\tSubSection \"Display\"\n\t\tViewport   0 0\n\t\tDepth     24\n\tEndSubSection\nEndSection\n\nSection \"Screen\"\n\tIdentifier \"Screen1\"\n\tDevice     \"Card1\"\n\tMonitor    \"Monitor1\"\n\tSubSection \"Display\"\n\t\tViewport   0 0\n\t\tDepth     1\n\tEndSubSection\n\tSubSection \"Display\"\n\t\tViewport   0 0\n\t\tDepth     4\n\tEndSubSection\n\tSubSection \"Display\"\n\t\tViewport   0 0\n\t\tDepth     8\n\tEndSubSection\n\tSubSection \"Display\"\n\t\tViewport   0 0\n\t\tDepth     15\n\tEndSubSection\n\tSubSection \"Display\"\n\t\tViewport   0 0\n\t\tDepth     16\n\tEndSubSection\n\tSubSection \"Display\"\n\t\tViewport   0 0\n\t\tDepth     24\n\tEndSubSection\nEndSection\n```\n\n- Change the bumblebee.conf file to the following settings (these are scattered throughout the conf file):\n\n```\n/etc/bumblebee/bumblebee.conf\n```\n\n```\nKeepUnusedXServer=true\nDriver=nvidia\n# In the [driver-nvidia] section,\nXorgConfFile=/etc/X11/xorg.conf\n```\n\n- Add the following to your .xinitrc file.\n\n```\n~/.xinitrc\n```\n\n```\n# Start Bumblebee, create VIRTUAL display, and configure monitors.\noptirun true\nintel-virtual-output\nxrandr --output VIRTUAL2 --left-of HDMI1 --mode 1920x1080 --auto\n\n# Turn off the laptop display (optional of course, leave out if you want triple display).\nxrandr --output LVDS1 --off\n\n# Execute a window manager or desktop environment here.\n# ex: exec awesome\n```\n\n- Run startx and check that your displays are working.\n\nThe modifications to .xinitrc automate the configuration of the displays. First, optirun is launched to run Bumblebee. Then, the intel-virtual-output utility (included with xf86-video-intel versions 2.99+) creates a few VIRTUAL displays; VIRTUAL2 was the display mapping to my HDMI port, run xrandr to double check this for yourself. The remaining commands may vary for your configuration, note that LVDS1 is the laptop screen and HDMI1 is actually the Display Port.\n\n"
    },
    {
      "title": "WLAN",
      "level": 3,
      "content": "Remember that wireless_tools will be needed for using a network manager such as NetworkManager, see Wireless network configuration for more information.\n\n"
    },
    {
      "title": "Bluetooth",
      "level": 3,
      "content": "Some users may need to run\n\n```\nhciconfig hci0 reset\n```\n\nto get blueman working\n\nUsing power management with TLP might cause a problem. Excluding Bluetooth devices from USB autosuspend by setting:\n\n```\n/etc/default/tlp\n```\n\n```\n…\nUSB_BLACKLIST_BTUSB=1\n```\n\ncan resolve the issue.\n\n"
    },
    {
      "title": "BIOS",
      "level": 3,
      "content": "XPS 9550 with InfinityEdge 4K\n\nThe XPS 9550 4K, with its current state, is unstable due to its young age. A majority of the bugs stem from Dell's BIOS.\n\nListed below are you may encounter with the XPS 9550 4K:\n\n01.02.00 • Brightness works with slow fade (XF86MonBrightnessUp / xbacklight -inc:-dec) • Sleep resume working around 80% of the time • Resume from sleep restarts the laptop\n\n01.02.10+ • Increased speeds (faster boot, applications feel snappier when loading, especially in 01.02.13) • Black screen upon resume (the computer will operate as if it's on, to get display to work, set brightness to max using keyboard shortcut) • Brightness flickers/stutters when dimming or increasing the brightness (demonstrated in i3wm) • Screen flickers on low brightness settings • Possible poor fan behavior (not confirmed) • Battery will not charge beyond 60%. The fix is to download and flash 1.2.14 BIOS or later Flashing 01.02.00 will be pointless after, as the issue carries over to this version of BIOS.\n\n01.02.14 Download • User report that the issue with the battery is fixed • Still has black screen upon resume issue. To turn screen on, increase brightness to maximum using keyboard. It is not possible to decrease brightness after resume, either maximum or off. • Increasing the brightness (eg, with xbacklight) by less than 9% does not have any effect. Decreasing by less than 9% always results in a decrease of 9%.\n\n1.02.16 Download • \"Black screen upon resume\" issue appears to have been fixed!\n\nMany users have recommend the 01.02.00 BIOS, as it proves to be the most balanced out of all of the updates.\n\n"
    },
    {
      "title": "Webcam",
      "level": 3,
      "content": "If the camera does not seem to work (black image), try to enable/disable auto-exposure (for example in Skype, the option is in the Video Settings and in guc). In reality, the camera tries to record at 0.5 fps and this is why it seems not to work, even if everything seems normal.\n\n"
    },
    {
      "title": "Special Touch Keys",
      "level": 3,
      "content": "The special touch keys are strangely mapped by default. One changes brightness, one does next track. They seem to be linked to the same key sequences as the Fn+F# keys that do the same job. To fix this, make this new file:\n\n```\n/opt/dell_touchkeys_keymap\n```\n\n```\n0x90 previoussong # Previous song\n0xA2 playpause # Play/Pause\n0x99 nextsong # Next song\n0xDB computer # First touch key, Dell apparently uses a key sequence here where 0xDB is a modifer, 0x2D stands for the touch key and 0x19 for the monitor toggle\n0x85 prog1 # Second touch key\n0x84 media # Third touch key\n```\n\nand add this to /etc/rc.local:\n\n```\n/etc/rc.local\n```\n\n```\n…\n# Fix touch keys\n/usr/lib/udev/keymap input/event0 /opt/dell_touchkeys_keymap\n```\n\nSource\n\n"
    },
    {
      "title": "Alternative method",
      "level": 4,
      "content": "For L502x model the above method can be improved:\n\n1. No need to remap Play/Pause, Previous song, Next song keys as they are mapped correctly by default.\n1. For the first (leftmost) touch key: it's wired in a weird way on the hardware level. It seems to be wired to both Super_L and x. Your best bet would be to remap this using your DE or something like xbindkeys. You may want to double-check with xev or xbindkeys -mk to see exactly what keys it is producing.\n\nThus the keymap file should be (I prefer standard location):\n\n```\n/usr/lib/udev/keymaps/dell-xps-l502x\n```\n\n```\n0x85 prog1 # Second touch key\n0x84 media # Third touch key\n```\n\nand add this to /etc/rc.local:\n\n```\n/etc/rc.local\n```\n\n```\n…\n# Fix touch keys\n/usr/lib/udev/keymap input/event0 /usr/lib/udev/keymaps/dell-xps-l502x\n```\n\nOR make a udev rule (the former remaps keys on boot, this lets udev take care of the remapping):\n\n```\n/etc/udev/rules.d/99-local.rules\n```\n\n```\n…\n# Keymap Dell Touch keys\nSUBSYSTEM==\"input\", KERNEL==\"event0\", RUN+=\"keymap $name dell-xps-l502x\"\n```\n\n"
    },
    {
      "title": "Hidden Keyboard Keys",
      "level": 3,
      "content": "For L502X model: there are additional Fn+<Key> (sequences) that are not marked at all on the keyboard but underlying hardware generates them anyway. Here they are (if you find more add them to the table below):\n\nTable content:\nFn+<Key> | Resulting key (sequence)\nFn+Esc | Sleep\nFn+Super_L | Super_R\nFn+Ins | Pause/Break\nFn+Del | Ctrl + Pause/Break\nFn+PrntScr | Alt + PrtSc/SysRq\n\n"
    },
    {
      "title": "Touchpad Gestures",
      "level": 3,
      "content": "The 1.2.21 BIOS update has caused many users to lose mouse scrolling in Chromium. A bug report has been opened about the issue. A workaround would be to disable Smooth Scrolling in chrome://flags\n\n"
    },
    {
      "title": "libinput",
      "level": 4,
      "content": "Working, using libinput and libinput-gestures.\n\n"
    },
    {
      "title": "Synaptics",
      "level": 4,
      "content": "If using Synaptics, read Synaptics.\n\n"
    },
    {
      "title": "Notes",
      "level": 3,
      "content": "- Remember to turn on Wi-Fi and Bluetooth by pressing the F2 button.\n- Card reader is finnicky. Try booting with a card inserted or inserting a card after it is booted and running # echo 1 > /sys/bus/pci/rescan Otherwise, card reader will not be detected. It seems that a certain kernel update results in the workaround not working as well. More info needed.\n\n```\n# echo 1 > /sys/bus/pci/rescan\n```\n\n"
    },
    {
      "title": "See also",
      "level": 2,
      "content": "- A fairly comprehensive writeup of running Arch Linux on an XPS 15 9530.\n- Comprehensive coverage of Arch Linux on XPS 15 9550\n- Multitouch gestures with libinput and libinput-gestures\n- Fixing 9550 screen flickering and black screen on resume from suspend\n- Arch on New XPS 15 (Late 2015)\n\n"
    }
  ]
}