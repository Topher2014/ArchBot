{
  "title": "GPD Win Max",
  "url": "https://wiki.archlinux.org/title/GPD_Win_Max",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Note: **This article or section does not follow the Laptop page guidelines.** This article or section does not follow the Laptop page guidelines.\n\nThis article or section does not follow the Laptop page guidelines.\n\nTable content:\nHardware | Bus + ID | Working | Bus + ID | Working | Bus + ID | Working\n | Win Max | Win Max 2021 | Win Max 2\nVideo | ? | Yes | ? | Yes | PCI ? | Yes\nWireless | ? | Yes | ? | Yes | PCI ? | Yes\nEthernet | ? | Yes | ? | Yes | n/a | n/a\nBluetooth | ? | Yes | ? | Yes | ? | Yes\nAudio | ? | Yes | ? | Yes | ? | Yes\nCamera | n/a | n/a | n/a | n/a | USB 058e:3864 | Yes\nKeyboard | ? | Yes | ? | Yes | PS/2 ? | Yes\nTouchpad | ? | Yes | ? | Yes | I2C ? | Yes\nGamepad |  | Yes |  | Yes | USB 045e:028e | Yes\nTouchscreen | ? | Yes | ? | Yes | I2C ? | Yes\nStylus | n/a | n/a | n/a | n/a | n/a | Yes\nMicroSD | ? | Yes | ? | Yes | ? | Yes\nSD Card | n/a | n/a | n/a | n/a | ? | Yes\nFingerprint | n/a | n/a | n/a | n/a | USB 2541:9711 | No\nIMU | n/a | n/a | n/a | n/a | I2C ? | Yes\n\n"
    },
    {
      "title": "Models",
      "level": 2,
      "content": "There are several models in the GPD Win Max family, some multiple SKUs.\n\n"
    },
    {
      "title": "GPD Win Max (2020)",
      "level": 3,
      "content": "- Display: 8\" 1280x800\n- CPU: Intel Core i5-1037G7\n- Graphics: Intel Iris Plus 940\n- RAM: 16 GB LPDDR4x 3733\n- Storage: 512 GB PCIe M.2 NVMe SSD\n- Network: 1 GbE, Intel WiFi 6 AX, BT 5.0\n- Thunderbolt 3\n\n"
    },
    {
      "title": "GPD Win Max 2021",
      "level": 3,
      "content": "- Display: 8\" 1280x800\n- CPU: Intel Core i7-1195G7 / AMD Ryzen 7 4800U\n- Graphics: Intel Iris Xe G7 / AMD Radeon Vega 8\n- RAM: 16 GB LPDDR4x 4226\n- Storage: 1 TB PCIe M.2 NVMe SSD\n- Network: 1 GbE, Intel WiFi 6 AX BT 5.0\n- Thunderbolt 4 (Intel)\n\n"
    },
    {
      "title": "GPD Win Max 2 (2022)",
      "level": 3,
      "content": "- Display: 10.1\" 2560x1600\n- CPU: Intel Core i7-1260P / AMD Ryzen 7 6800U\n- Graphics: Intel Iris Xe / AMD Radeon 680M\n- RAM: 16/32 GB LPDDR5 6400\n- Storage: 1/2 TB PCIe 4.0 M.2 NVMe SSD\n- Network: Intel WiFi 6 AX BT 5.2\n- Thunderbolt 4 (Intel) | USB4 (AMD)\n\n"
    },
    {
      "title": "GPD Win Max 2 (2023)",
      "level": 3,
      "content": "- Display: 10.1\" 2560x1600\n- CPU: AMD Ryzen 7 7640U / AMD Ryzen 7 7840U\n- Graphics: AMD Radeon 680M / AMD Radeon 780M\n- RAM: 16/32/64 GB LPDDR5 6400\n- Storage: 1/2 TB PCIe 4.0 M.2 NVMe SSD\n- Network: Intel WiFi 6 AX210 BT 5.2\n- USB4\n\n"
    },
    {
      "title": "Fan driver",
      "level": 3,
      "content": "Here is an experimental driver that expose GPD device's fan to kernel's hwmon subsystem: gpd-fan-driver. It has been packaged on AUR gpd-fan-driver-dkms-gitAUR\n\nWarn: This driver has not been fully tested and reviewed. It may cause damage to your device. Use at your own risk.\n\n"
    },
    {
      "title": "Touchscreen",
      "level": 4,
      "content": "If you are using Xorg, create the file: /etc/X11/xorg.conf.d/99-touchscreen.conf to rotate the touchscreen.\n\n```\n/etc/X11/xorg.conf.d/99-touchscreen.conf\n```\n\n```\nSection \"InputClass\"\n  Identifier    \"calibration\"\n  MatchProduct  \"Goodix Capacitive TouchScreen\"\n  Option        \"TransformationMatrix\"   \"0 1 0 -1 0 1 0 0 1\"\nEndSection\n```\n\n"
    },
    {
      "title": "Mute Key",
      "level": 4,
      "content": "The mute key does not send a release code. To fix it, create a new udev hwdb file under /etc/udev/hwdb.d/, and configure the key to trigger an automatic release event.\n\n```\n/etc/udev/hwdb.d/90-gpd-rules.hwdb\n```\n\n```\nevdev:atkbd:dmi:bvn*:bvr*:bd*:svnGPD:pnG1619-01:pvr*\n KEYBOARD_KEY_a0=!mute\n```\n\n"
    },
    {
      "title": "Screen rotation",
      "level": 4,
      "content": "This device uses a portrait screen.\n\nIf you are using Xorg, create /etc/X11/xorg.conf.d/30-monitor.conf to rotate the screen:\n\n```\n/etc/X11/xorg.conf.d/30-monitor.conf\n```\n\n```\nSection \"Monitor\"\n\t\n  Identifier \"DSI-1\"\n\t\n  Option     \"Rotate\" \"right\"\n\t\nEndSection\n```\n\nTo rotate the virtual console, add fbcon=rotate:1 to the Kernel parameters.\n\n"
    },
    {
      "title": "Keyboard",
      "level": 4,
      "content": "BIOS < 1.04 and kernel > 5.18.9: the keyboard IRQ, as specified in the BIOS, is incompatible with a change made in kernel 5.18.10 targeting AMD 6000 APUs.\n\nConsequently, the keyboard will not work without either patching the kernel or applying a DSDT override.\n\nKernel patch:\n\n```\nkbd_irq.patch\n```\n\n```\ndiff --git a/drivers/acpi/resource.c b/drivers/acpi/resource.c\nindex 510cdec375c4..c2d494784425 100644\n--- a/drivers/acpi/resource.c\n+++ b/drivers/acpi/resource.c\n@@ -416,16 +416,6 @@ static bool acpi_dev_irq_override(u32 gsi, u8 triggering, u8 polarity,\n {\n \tint i;\n \n-#ifdef CONFIG_X86\n-\t/*\n-\t * IRQ override is not needed on modern AMD Zen systems and\n-\t * this override breaks active low IRQs on AMD Ryzen 6000 and\n-\t * newer systems. Skip it.\n-\t */\n-\tif (boot_cpu_has(X86_FEATURE_ZEN))\n-\t\treturn false;\n-#endif\n-\n \tfor (i = 0; i < ARRAY_SIZE(skip_override_table); i++) {\n \t\tconst struct irq_override_cmp *entry = &skip_override_table[i];\n```\n\nDSDT changes:\n\n```\nkbd_dsdt.diff\n```\n\n```\n21c21\n< DefinitionBlock (\"\", \"DSDT\", 2, \"ALASKA\", \"A M I \", 0x01072009)\n---\n> DefinitionBlock (\"\", \"DSDT\", 2, \"ALASKA\", \"A M I \", 0x0107200a)\n7102c7102\n<                 IRQNoFlags ()\n---\n>                 IRQ (Level, ActiveLow, Exclusive, )\n7121c7121\n<                     IRQNoFlags ()\n---\n>                     IRQ (Level, ActiveLow, Exclusive, )\n```\n\n"
    },
    {
      "title": "IMU (Accelerometer + Gyro)",
      "level": 4,
      "content": "The IMU (Bosch BMI160) is incorrectly identified in the BIOS. A DKMS patch may be applied.\n\nAlternatively, a DSDT override may be generated with the correct part number. The aformentioned keyboard fix and following IMU fix may be combined into a single DSDT override.\n\nDSDT changes:\n\n```\nimu_dsdt.diff\n```\n\n```\n21c21\n< DefinitionBlock (\"\", \"DSDT\", 2, \"ALASKA\", \"A M I \", 0x01072009)\n---\n> DefinitionBlock (\"\", \"DSDT\", 2, \"ALASKA\", \"A M I \", 0x0107200a)\n7214,7215c7214,7215\n<             Name (_HID, \"10EC5280\")  // _HID: Hardware ID\n<             Name (_CID, \"10EC5280\")  // _CID: Compatible ID\n---\n>             Name (_HID, \"BMI0160\")  // _HID: Hardware ID\n>             Name (_CID, \"BMI0160\")  // _CID: Compatible ID\n```\n\n"
    },
    {
      "title": "Sleep/ Si0X",
      "level": 4,
      "content": "With the old BIOS, The GPD Win Max 2 2023 edition might have problems with sleep: It might wake up (instantaneously or after some time). It is now working on https://gitlab.freedesktop.org/drm/amd/-/issues/3073.\n\nIt's now fixed in the .38 BIOS.\n\n"
    },
    {
      "title": "IMU (Accelerometer + Gyro)",
      "level": 4,
      "content": "With the old BIOS, the IMU (Bosch BMI260) is incorrectly identified in the BIOS. It's named BMI0160:00 in ACPI table. It's now corrected in the .40 BIOS.\n\nThe package bmi260-dkmsAUR installs the correct kernel driver bmi260_i2c and the sensor works with that. (For low level testing, use /usr/lib/iio-sensor-proxy -v from package iio-sensor-proxy.) Kernel modules bmi160_spi, bmi160_i2c and bmi160_core can be blacklisted to stop false autoload if not needed for some external device.\n\n"
    },
    {
      "title": "Deep sleep",
      "level": 4,
      "content": "Deep sleep is not working and there is no fix.\n\n"
    },
    {
      "title": "Fingerprint reader",
      "level": 4,
      "content": "The fingerprint reader (ChipSailing CS9711 @ USB 5.4) is, as of yet, unsupported.\n\n"
    },
    {
      "title": "USB autosuspend",
      "level": 4,
      "content": "On BIOS version v1.04, the USB controller may fail to enumerate devices that are newly plugged in after boot. This is due to a bug with USB suspend support and can be worked around by disabling autosuspend with the kernel parameter usbcore.autosuspend=-1.\n\n"
    },
    {
      "title": "Fingerprint reader",
      "level": 4,
      "content": "The fingerprint reader (ChipSailing CS9711 @ USB 5.4) is, as of yet, unsupported.\n\n"
    },
    {
      "title": "USB4/Thunderbolt eGPU Crashes",
      "level": 4,
      "content": "Using an eGPU via USB4/Thunderbolt (not OCuLink) may result in PCIe errors causing the desktop environment and/or application using the eGPU to crash. To ignore these errors, try adding the kernel parameter pci=noaer; this disables PCI Express Advanced Error Reporting which disables reporting and mitigation of PCIe errors but does not actually resolve the errors. The errors, however, do not appear to hinder the functioning of the GPU.\n\n"
    },
    {
      "title": "GPD Win Max (2020) kernel requirement",
      "level": 3,
      "content": "The 2020 variant uses a different location for EDID that is not supported by Linux kernels prior to 5.18.\n\nLinux kernel 5.18 or above is required for the screen to work.\n\n"
    },
    {
      "title": "BIOS updates",
      "level": 3,
      "content": "fwupd is not supported.\n\nGPD provides BIOS updates via Windows executables in the following locations:\n\n- GPD Win Max: https://gpd.hk/gpdwinmaxfirmware\n- GPD Win Max 2021: https://gpd.hk/gpdwinmax2021firmwaredriver\n- GPD Win Max 2: https://gpd.hk/gpdwinmax2firmwareanddriver\n\nSee Windows PE for instructions on how to make a bootable Windows environment to apply the updates.\n\n"
    }
  ]
}