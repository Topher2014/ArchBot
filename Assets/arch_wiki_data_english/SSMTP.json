{
  "title": "SSMTP",
  "url": "https://wiki.archlinux.org/title/SSMTP",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Related articles\n\n- Mail server\n\nsSMTP is a program which delivers email from a local computer to a configured mailhost (mailhub). It is not a mail server (like feature-rich mail server sendmail) and does not receive mail, expand aliases or manage a queue. One of its primary uses is for forwarding automated email (like system alerts) off your machine and to an external email address.\n\n"
    },
    {
      "title": "Installation",
      "level": 2,
      "content": "Install the package ssmtpAUR.\n\n"
    },
    {
      "title": "Forward to a Gmail mail server",
      "level": 2,
      "content": "Note: **This article or section is out of date.** This article or section is out of date.\n\nThis article or section is out of date.\n\nTo configure sSMTP, you will have to edit its configuration file (/etc/ssmtp/ssmtp.conf) and enter your account settings.\n\n- If your Gmail account is secured with two-factor authentication, you need to generate a unique App Password to use in ssmtp.conf. You can do so on your App Passwords page. Use you Gmail username (not the App Name) in the AuthUser line and use the generated 16-character password in the AuthPass line, spaces in the password can be omitted.\n- If you do not use two-factor authentication, you need to allow access to unsecure apps. You can do so on your Less Secure Apps page.\n\n```\n/etc/ssmtp/ssmtp.conf\n```\n\n```\n# The user that gets all the mails (UID < 1000, usually the admin)\nroot=username@gmail.com\n\n# The mail server (where the mail is sent to), both port 465 or 587 should be acceptable\n# See also https://support.google.com/mail/answer/78799\nmailhub=smtp.gmail.com:465\n\n# The address where the mail appears to come from for user authentication.\nrewriteDomain=gmail.com\n\n# The full hostname.  Must be correctly formed, fully qualified domain name or GMail will reject connection.\nhostname=yourlocalhost.yourlocaldomain.tld\n\n# Use implicit TLS (port 465). When using port 587, change UseSTARTTLS=Yes\nTLS_CA_FILE=/etc/ssl/certs/ca-certificates.crt\nUseTLS=Yes\nUseSTARTTLS=No\n\n# Username/Password\nAuthUser=username\nAuthPass=password\nAuthMethod=LOGIN\n\n# Email 'From header's can override the default domain?\nFromLineOverride=yes\n```\n\nCreate aliases for local usernames (optional)\n\n```\n/etc/ssmtp/revaliases\n```\n\n```\nroot:username@gmail.com:smtp.gmail.com:465\nmainuser:username@gmail.com:smtp.gmail.com:465\n```\n\nTo test whether the Gmail server will properly forward your email:\n\n```\n$ echo -e 'Subject: test\\n\\nTesting ssmtp' | sendmail -v tousername@example.com\n```\n\nChange the 'From' text by editing /etc/passwd to receive mail from 'root at myhost' instead of just 'root'.\n\n```\n# chfn -f 'root at myhost' root\n# chfn -f 'mainuser at myhost' mainuser\n```\n\nWhich changes /etc/passwd to:\n\n```\n$ grep myhost /etc/passwd\n```\n\n```\nroot:x:0:0:root at myhost,,,:/root:/bin/bash\nmainuser:x:1000:1000:mainuser at myhost,,,:/home/mainuser:/bin/bash\n```\n\n"
    },
    {
      "title": "Security",
      "level": 2,
      "content": "Because your email password is stored as cleartext in /etc/ssmtp/ssmtp.conf, it is important that this file is secure. By default, the entire /etc/ssmtp directory is accessible only by root and the mail group. The /usr/bin/ssmtp binary runs as the mail group and can read this file. There is no reason to add yourself or other users to the mail group.\n\n"
    },
    {
      "title": "Sending email",
      "level": 2,
      "content": "To send email from the terminal, do:\n\n```\n$ echo -e \"Subject: this is the subject\\n\\nthis is the body\" | mail user@example.com\n```\n\nor interactively as:\n\n```\n$ sendmail username@example.com\nSubject: this is my subject\nCC: optional@example.com\n\nNow I can type the body here\n```\n\nAn alternate method for sending emails is to create a text file and send it with ssmtp or mail\n\n```\ntest-mail.txt\n```\n\n```\nTo:username@example.com\nFrom:youraccount@gmail.com\nSubject: Test\n\nThis is a test mail.\n```\n\nSend the test-mail.txt file\n\n```\n$ sendmail -t < test-mail.txt\n```\n\nSome users might prefer the syntax of mail from s-nail, mailutils, or other mailx providers instead. For example, mail has options to provide the subject as an argument. mail requires sendmail and can use ssmtpAUR as sendmail.\n\n"
    },
    {
      "title": "Attachments",
      "level": 3,
      "content": "If you need to be able to add attachments, install and configure Mutt and Msmtp and then go see the tip at nixcraft.\n\nAlternatively, you can attach using uuencode from sharutils. To attach 'file.txt' as 'myfile.txt':\n\n```\n$ uuencode file.txt myfile.txt | sendmail user@example.com\n```\n\n"
    },
    {
      "title": "Mail to Local Users",
      "level": 3,
      "content": "Messages sent to local users (or any other address not ending in @fqdn are treated in one of two ways\n\n- destination user has UID < 1000 - The address is replaced by the address defined by root=user@fqdn in /etc/ssmtp/ssmtp.conf\n- destination user has UID â‰¥ 1000 or the user is unknown - The the value from rewriteDomain= in /etc/ssmtp/ssmtp.conf is appended to the end of the user id.\n\nThis can lead to problems if local users on your system are not also valid users at your rewriteDomain, but are receiving mail from system services, esp if your rewrite domain is a public service like gmail.com.\n\nTo work around this, you can use mail from s-nail. The mail command can read aliases defined in /etc/mail.rc. Example:\n\n```\n$ grep alias /etc/mail.rc\n```\n\n```\nalias git git<username@example.com>\nalias archuser 'My Name'<someone@example.com>\n```\n\nYou can then pipe messages into mail instead of into sendmail.\n\n```\n$ echo -e \"Hey archuser.\" | mail archuser\n```\n\n"
    },
    {
      "title": "See also",
      "level": 2,
      "content": "- SSMTP and Gmail on the Arch forums\n- Sending Email From Your System with sSMTP\n- The Qnd Guide to ssmtp\n- Gmail Support - Configuring other mail clients\n\n"
    }
  ]
}