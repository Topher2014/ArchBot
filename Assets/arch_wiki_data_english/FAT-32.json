{
  "title": "FAT-32",
  "url": "https://wiki.archlinux.org/title/FAT-32",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Related articles\n\n- File systems\n\nFrom Wikipedia:File Allocation Table:\n\n"
    },
    {
      "title": "File system creation",
      "level": 2,
      "content": "To create a FAT filesystem, install dosfstools.\n\nmkfs.fat supports creating FAT12, FAT16 and FAT32, see Wikipedia:File Allocation Table#Types for an explanation on their differences. mkfs.fat will select the FAT type based on the partition size, to explicitly create a certain type of FAT filesystem use the -F option. See mkfs.fat(8) for more information.\n\nFormat a partition to FAT32:\n\n```\n# mkfs.fat -F 32 /dev/partition\n```\n\n"
    },
    {
      "title": "Kernel configuration",
      "level": 2,
      "content": "Here is an example of the default mount configuration in the kernel:\n\n```\n$ zgrep -e FAT -e DOS /proc/config.gz | sort -r\n```\n\n```\n# DOS/FAT/NT Filesystems\nCONFIG_FAT_FS=m\nCONFIG_MSDOS_PARTITION=y\nCONFIG_FAT_FS=m\nCONFIG_MSDOS_FS=m\nCONFIG_VFAT_FS=m\nCONFIG_FAT_DEFAULT_CODEPAGE=437\nCONFIG_FAT_DEFAULT_IOCHARSET=\"iso8859-1\"\nCONFIG_NCPFS_SMALLDOS=y\n```\n\nA short description of the options:\n\n- Language settings: CONFIG_FAT_DEFAULT_CODEPAGE, CONFIG_FAT_DEFAULT_IOCHARSET\n- All filenames to lower letters on a FAT partitions if enabled: CONFIG_NCPFS_SMALLDOS\n- Enables support of the FAT file systems: CONFIG_FAT_FS, CONFIG_MSDOS_FS, CONFIG_VFAT_FS\n- Enables support of a FAT partitioned harddisks on x86 PCs: CONFIG_MSDOS_PARTITION\n\nIf the partition type detected by mount is VFAT then it will run the /usr/bin/mount.vfat script.\n\n```\n/usr/bin/mount.vfat\n```\n\n```\n#!/bin/bash\n#mount VFAT with full rw (read-write) permissions for all users\n#/usr/bin/mount -i -t vfat -oumask=0000,iocharset=utf8 \"$@\"\n#The above is the same as\nmount -i -t vfat -oiocharset=utf8,fmask=0000,dmask=0000 \"$@\"\n```\n\n"
    },
    {
      "title": "Writing to FAT32 as normal user",
      "level": 2,
      "content": "To write on a FAT32 partition, you must make a few changes to the fstab file.\n\n```\n/etc/fstab\n```\n\n```\n/dev/sdxY    /mnt/some_folder  vfat   user,rw\n```\n\nThe user option means that any user (even non-root) can mount and unmount the partition /dev/sdxY (mount(8) § Non-superuser mounts). rw gives read-write access.\n\nFor example, if your FAT32 partition is on /dev/sda9, and you wish to mount it to /mnt/fat32, then you would use:\n\n```\n/etc/fstab\n```\n\n```\n/dev/sda9    /mnt/fat32        vfat   user,rw\n```\n\nNow, any user can mount it with:\n\n```\n$ mount /mnt/fat32\n```\n\nAnd unmount it with:\n\n```\n$ umount /mnt/fat32\n```\n\nNote that FAT does not support Linux file permissions. Each file will also appear to be executable. You may want to use the showexec option to only mark Windows executables (com, exe, bat) as executable. See mount(8) § Mount options for fat for more options.\n\n"
    },
    {
      "title": "Detecting FAT type",
      "level": 2,
      "content": "If you need to know which type of FAT file system a partition uses, use the file command:\n\n```\n# file -s /dev/partition\n```\n\n```\n/dev/partition: DOS/MBR boot sector, code offset 0x3c+2, OEM-ID \"mkfs.fat\", sectors/cluster 4, root entries 512, sectors 4096 (volumes <=32 MB), Media descriptor 0xf8, sectors/FAT 3, sectors/track 32, heads 64, serial number 0x5bc09c21, unlabeled, FAT (12 bit)\n```\n\nAlternatively you can use minfo from the mtools package:\n\n```\n# minfo -i /dev/partition ::\n```\n\n```\ndevice information:\n===================\nfilename=\"/dev/partition\"\nsectors per track: 32\nheads: 64\ncylinders: 2\n\nmedia byte: f8\n\nmformat command line: mformat -t 2 -h 64 -s 32 -i \"/dev/partition\" ::\n\nbootsector information\n======================\nbanner:\"mkfs.fat\"\nsector size: 512 bytes\ncluster size: 4 sectors\nreserved (boot) sectors: 1\nfats: 2\nmax available root directory slots: 512\nsmall size: 4096 sectors\nmedia descriptor byte: 0xf8\nsectors per fat: 3\nsectors per track: 32\nheads: 64\nhidden sectors: 0\nbig size: 0 sectors\nphysical drive id: 0x80\nreserved=0x0\ndos4=0x29\nserial number: 5BC09C21\ndisk label=\"NO NAME    \"\ndisk type=\"FAT12   \"\n```\n\n"
    },
    {
      "title": "See also",
      "level": 2,
      "content": "- MountFATFileSystems\n\n"
    }
  ]
}