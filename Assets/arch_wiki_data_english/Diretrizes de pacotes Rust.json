{
  "title": "Diretrizes de pacotes Rust",
  "url": "https://wiki.archlinux.org/title/Diretrizes_de_pacotes_Rust",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "32-bit – CLR – CMake – Cross – DKMS – Eclipse – Electron – Fonte – Free Pascal – GNOME – Go – Haskell – Java – KDE – Kernel – Lisp – Meson – MinGW – Node.js – Nonfree – OCaml – Perl – PHP – Python – R – Ruby – Rust – Shell – VCS – Web – Wine\n\nEsse documento cobre padrões e diretrizes sobre escrita de PKGBUILDs para Rust.\n\n"
    },
    {
      "title": "Nomenclatura de pacote",
      "level": 3,
      "content": "Para binários do Rust, use apenas o nome do programa.\n\n"
    },
    {
      "title": "Compilação",
      "level": 2,
      "content": "Compilação de um pacote Rust.\n\n```\nbuild() {\n   cargo build --release --locked\n }\n```\n\nsendo que:\n\n- --release diz ao cargo para fazer uma compilação lançamento\n- --locked diz ao cargo para fazer uso do arquivo Cargo.lock e impedi-lo de atualizar dependências, o que é importante para reproducible builds.\n\n"
    },
    {
      "title": "Verificação",
      "level": 2,
      "content": "A maioria dos projetos Rust fornecem uma forma simples de executar o conjunto de testes (testsuite).\n\n```\ncheck() {\n   cargo test --release --locked\n }\n```\n\n"
    },
    {
      "title": "Pacote",
      "level": 2,
      "content": "O Rust compila binários em target/release e pode simplesmente ser instalado em /usr/bin.\n\n```\npackage() {\n   install -Dm 755 target/release/${pkgname} -t \"${pkgdir}/usr/bin\"\n }\n```\n\nAlguns pacotes podem instalar mais arquivos, como uma página man, caso em que pode ser melhor usar cargo:\n\n```\npackage() {\n   cd \"$pkgname-$pkgver\"\n   cargo install --no-track --locked --all-features --root \"$pkgdir/usr/\" --path .\n }\n```\n\nO argumento --no-track sempre deve ser usado, porque cargo install pode criar arquivos indesejados, como /usr/.crates.toml ou /usr/.crates2.json, a menos que seja especificado.\n\n"
    },
    {
      "title": "Pacotes exemplos",
      "level": 2,
      "content": "Clique Package Actions > Source Files na página do pacote para ver seu PKGBUILD exemplo.\n\n- cbindgen\n- ripgrep\n\n"
    }
  ]
}