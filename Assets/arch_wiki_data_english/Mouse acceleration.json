{
  "title": "Mouse acceleration",
  "url": "https://wiki.archlinux.org/title/Mouse_acceleration",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Related articles\n\n- Mouse buttons\n- Mouse polling rate\n\n"
    },
    {
      "title": "Disabling mouse acceleration",
      "level": 2,
      "content": "Using Xorg, libinput sets itself as the default driver with /usr/share/X11/xorg.conf.d/40-libinput.conf. To activate the flat profile for our pointer device, we need to set the flat profile to 1 and the adaptive and custom profile options to 0.\n\nFind out your device id:\n\n```\n# xinput\n```\n\nThe first number indicates the default acceleration profile, the second number indicates the flat profile (No Acceleration), and the third number indicates a custom profile. To activate the flat profile:\n\n```\n# xinput set-prop \"deviceid\" \"libinput Accel Profile Enabled\" 0 1 0\n```\n\nConfirm the changes:\n\n```\n# xinput list-props \"deviceid\"\n```\n\nMake it persistent by adding the option to the pointer section:\n\n```\n/etc/X11/xorg.conf.d/40-libinput.conf\n```\n\n```\nSection \"InputClass\"\n  Identifier \"libinput pointer catchall\"\n  MatchIsPointer \"on\"\n  MatchDevicePath \"/dev/input/event*\"\n  Driver \"libinput\"\n  Option \"AccelProfile\" \"flat\"\n EndSection\n```\n\n"
    },
    {
      "title": "Disable mouse acceleration in GDM",
      "level": 3,
      "content": "Disable mouse acceleration in GDM with Wayland:\n\n```\nsudo -u gdm dbus-launch gsettings set org.gnome.desktop.peripherals.mouse accel-profile 'flat'\n```\n\n"
    },
    {
      "title": "Configuring mouse acceleration",
      "level": 2,
      "content": "Note: **The factual accuracy of this article or section is disputed.** The factual accuracy of this article or section is disputed.\n\nThe factual accuracy of this article or section is disputed.\n\nSetting the mouse acceleration depends on the windowing protocol you are using: either Xorg or Wayland.\n\n- On Xorg, there are several ways of setting mouse acceleration\n\n- by editing Xorg configuration files\n- xorg-xset and xorg-xinput which provide xset and xinput respectively\n- and configuration interfaces common in desktop environments.\n\n- If you are using Wayland, the events are controlled via libinput. It is the compositor's job to expose the settings brought by libinput. There is currently no standard way to change settings across compositors.[1]\n- GNOME manages mouse acceleration by itself. A choice between \"adaptive\" and \"flat\" profiles can be chosen by installing dconf-editor and editing the value in org/gnome/desktop/peripherals/mouse/acceleration-profile. Alternatively, gnome-tweaks can also be used to edit the org/gnome/desktop/peripherals/mouse/acceleration-profile.\n\n"
    },
    {
      "title": "Mouse acceleration with libinput",
      "level": 2,
      "content": "When using the adaptive pointer acceleration profile, libinput calculates the mouse acceleration depending on the DPI and the parameter Acceleration Speed [2]. libinput relies on the resolution reported by evdev [3]. Feedback settings set with xset m are effectively ignored. When using the flat pointer acceleration profile, the acceleration factor is constant regardless of the velocity of the pointer. This provides 1:1 movement between the device and the pointer on-screen.\n\n"
    },
    {
      "title": "Changing the acceleration",
      "level": 3,
      "content": "Find the id of your device with xinput list and set the acceleration speed with the following command. Note that the acceleration speed has to be in the range of [-1,1]. Check this plot to see the impact of different acceleration speed values.\n\n```\n$ xinput --set-prop <device id> 'libinput Accel Speed' <acceleration factor>\n```\n\nConfirm your changes with the following:\n\n```\n$ xinput --list-props <device id>\n```\n\n"
    },
    {
      "title": "Persistent configuration",
      "level": 3,
      "content": "libinput does not store configuration options, it is up to the caller to manage these. Under Wayland configuration is restored by the desktop environment. Under X xf86-input-libinput reads the xorg configuration files and applies the options [4]. To make changes persistent under X create a file like this:\n\n```\n/etc/X11/xorg.conf.d/99-libinput-custom-config.conf\n```\n\n```\nSection \"InputClass\"\n  Identifier \"<something to identify this snippet>\"\n  MatchDriver \"libinput\"\n  MatchProduct \"<substring of the device name>\"\n  Option \"AccelSpeed\" \"<e.g. 0.3>\"\nEndSection\n```\n\nFor further options see libinput(4).\n\n"
    },
    {
      "title": "In Xorg configuration",
      "level": 3,
      "content": "Note: **This article or section needs language, wiki syntax or style improvements. See Help:Style for reference.** This article or section needs language, wiki syntax or style improvements. See Help:Style for reference.\n\nThis article or section needs language, wiki syntax or style improvements. See Help:Style for reference.\n\nSee xorg.conf(5) for details.\n\nExamples:\n\n```\n/etc/X11/xorg.conf.d/50-mouse-acceleration.conf\n```\n\n```\nSection \"InputClass\"\n\tIdentifier \"My Mouse\"\n\tMatchIsPointer \"yes\"\n# set the following to 1 1 0 respectively to disable acceleration.\n\tOption \"AccelerationNumerator\" \"2\"\n\tOption \"AccelerationDenominator\" \"1\"\n\tOption \"AccelerationThreshold\" \"4\"\nEndSection\n```\n\n```\n/etc/X11/xorg.conf.d/50-mouse-deceleration.conf\n```\n\n```\nSection \"InputClass\"\n\tIdentifier \"My Mouse\"\n\tMatchIsPointer \"yes\"\n# some curved deceleration\n#\tOption \"AdaptiveDeceleration\" \"2\"\n# linear deceleration (mouse speed reduction)\n\tOption \"ConstantDeceleration\" \"2\"\nEndSection\n```\n\nYou can also assign settings to specific hardware by using \"MatchProduct\", \"MatchVendor\" and other matches inside class sections. Run lsusb to find out the product name and vendor to match:\n\n```\n$ lsusb -v | grep -e idProduct -e idVendor\n```\n\nIf you are unable to identify your device, try running xinput list. Some devices the use Logitech Unifying Recceiver share the same USB connection therefore, the mouse do not appear using lsusb\n\n"
    },
    {
      "title": "Using xinput",
      "level": 3,
      "content": "First, get a list of devices plugged in (ignore any virtual pointers):\n\n```\n$ xinput list\n```\n\nTake note of the ID. You may also use the full name in commands if the ID is prone to changing.\n\nGet a list of available properties and their current values available for modification with\n\n```\n$ xinput list-props 9\n```\n\nwhere 9 is the ID of the device you wish to use. Or\n\n```\n$ xinput list-props \"mouse name\"\n```\n\nwhere mouse name is the name of your mouse given by xinput list.\n\nExample, changing the property of Constant Deceleration to 2:\n\n```\n$ xinput list-props 9\n```\n\n```\nDevice 'mouse name':\n       Device Enabled (121):   1\n       Device Accel Profile (240):     0\n       Device Accel Constant Deceleration (241):       1.000000\n       Device Accel Adaptive Deceleration (243):       1.000000\n       Device Accel Velocity Scaling (244):    10.000000\n```\n\n```\n$ xinput --set-prop \"mouse name\" \"Device Accel Constant Deceleration\" 2\n```\n\nTo make it permanent, edit Xorg configuration (see above) or add commands to xprofile. The latter will not affect speed in a display manager.\n\n"
    },
    {
      "title": "Configuration example",
      "level": 3,
      "content": "You may need to resort to using more than one method to achieve your desired mouse settings. Here is what I did to configure a generic optical mouse: First, slow down the default movement speed 3 times so that it is more precise.\n\n```\n$ xinput --set-prop 9 'Device Accel Constant Deceleration' 3 &\n```\n\nThen, enable acceleration and make it 3 times faster after moving past 6 units.\n\n```\n$ xset mouse 3 6 &\n```\n\nIf you are satisfied with the results, store the preceding commands in ~/.xinitrc.\n\n"
    }
  ]
}