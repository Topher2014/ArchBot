{
  "title": "ZTE MF110/MF190",
  "url": "https://wiki.archlinux.org/title/ZTE_MF110/MF190",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "The ZTE MF110 / MF190 is a USB modem which combines 3G+/3G with EDGE/GPRS in one compact device. It has an integrated micro-SD card reader. It can send data at speeds up to 4.5 Mbps on 3G+ networks and receive data at speeds of up to 7.2 Mbps.\n\n"
    },
    {
      "title": "Switch from CD mode to modem mode on the device",
      "level": 3,
      "content": "When you first plug the device, it is identified as a USB SCSI CD-ROM. You can find out the name of the device by using dmesg:\n\n```\n# dmesg | tail\n```\n\n```\n[ 6102.172283] usb 1-5: new high-speed USB device number 4 using ehci_hcd\n[ 6102.300560] scsi24 : usb-storage 1-5:1.0\n[ 6103.302591] scsi 24:0:0:0: CD-ROM            ZTE      USB SCSI CD-ROM  2.31 PQ: 0 ANSI: 0\n[ 6103.305000] sr1: scsi-1 drive\n[ 6103.305422] sr 24:0:0:0: Attached scsi CD-ROM sr1\n```\n\nThe dongle is identified this way:\n\n```\n$ lsusb | grep -i zte\n```\n\n```\nBus 001 Device 005: ID 19d2:0150 ZTE WCDMA Technologies MSM\n```\n\nThe easiest way to switch to modem mode is by ejecting the CD-ROM:\n\n```\n$ eject /dev/sr1\n```\n\nAfter that, the led will turn off. A few seconds later, it will turn on again and it will be identified as modem by the kernel:\n\n```\n$ lsusb | grep -i zte\n```\n\n```\nBus 001 Device 005: ID 19d2:0124 ZTE WCDMA Technologies MSM\n```\n\n"
    },
    {
      "title": "Disable CD mode on the device",
      "level": 3,
      "content": "Using a Windows machine, plug in the USB device and go through the short install wizard. Once done, close the Rogers app that starts up, then head into the Device Manager (Control Panel > System > Hardware > Device Manager). Under the Ports section, find the COM port that's connected to the USB modem (ignore the Diagnostics mode). Connect to that COM port through Hyperterminal, found in the Accessories area of the Start Menu. Connection parameters are:\n\n```\nBits per Second: 115200\nData bits: 8\nParity: None\nStop bits: 1\nFlow Control: None\n```\n\nOnce connected, type the following commands:\n\n```\nAT+ZOPRT=5\nAT+ZCDRUN=8\n```\n\nThis tells the modem not to use CD mode when it is first plugged into a computer. Now exit Hypterterminal and remove the USB modem. You are done with Windows.\n\n"
    },
    {
      "title": "Disable CD mode on the device with wvdial",
      "level": 3,
      "content": "First remove the usb_storage module then run modprobe usbserial:\n\n```\n# rmmod usb_storage\n# modprobe usbserial\n```\n\nEdit /etc/wvdial.conf:\n\n```\n[Dialer Defaults]\nModem = /dev/ttyUSB0\nModem Type = Analog Modem\nISDN = 0\nInit1 = AT+ZOPRT=5\nInit2 = AT+ZCDRUN=8\n```\n\nRun wvdial, it should use those commands and fail to connect. Once it exits, unplug the stick and plug it back in and it should be seen as a modem.\n\n"
    },
    {
      "title": "Setup udev rules",
      "level": 3,
      "content": "Create the following udev rule:\n\n```\n/etc/udev/rules.d/90-zte.conf.rules\n```\n\n```\n# This is the Modem part of the card, let us load usbserial with the correct vendor and product IDs so we get our usb serial devices\nACTION==\"add\", SUBSYSTEM==\"usb\", ATTRS{idVendor}==\"19d2\", ATTRS{idProduct}==\"0124\", RUN+=\"/sbin/modprobe usbserial vendor=0x19d2 product=0x0124\", MODE=\"660\", GROUP=\"network\"\n# This is the ZeroCD part of the card, remove the usb_storage kernel module so it does not get treated like a storage device\n#ACTION==\"add\", SUBSYSTEM==\"usb\", ATTRS{idVendor}==\"19d2\", ATTRS{idProduct}==\"0150\", RUN+=\"/sbin/rmmod usb_storage\"\n# This is the ZeroCD part of the card\nACTION==\"add\", SUBSYSTEM==\"usb\", ATTRS{idVendor}==\"19d2\", ATTRS{idProduct}==\"0150\", RUN+=\"/usr/bin/eject /dev/sr1\"\n```\n\n"
    },
    {
      "title": "Create a wvdial configuration",
      "level": 3,
      "content": "Wvdial is an easy-to-use frontend to PPPd. The configuration is fairly easy to comprehend. Make sure you replace the /dev/ttyUSB2 line with the node that your USB modem is connected to, you can see that with dmesg. Save as /etc/wvdial.conf:\n\n```\n[Dialer Defaults]\n\n; Disable usb CD-ROM\n; Init1 = AT+ZCDRUN=8\n\n; Enable usb CD-ROM\n; Init1 = AT+ZCDRUN=9\n\nModem = /dev/ttyUSB2\nModem Type = Analog Modem\nISDN = 0\nBaud = 7200000\nDial Attempts = 3\nUsername = MOVISTAR\nPassword = MOVISTAR\nAPN = movistar.es\nPhone = *99***# \nAuto Reconnect = off\nStupid Mode = 1\nInit1 = AT+CPIN=YOUR PIN HERE!\nInit2 = ATZ\nInit6 = AT+CGEQMIN=1,4,64,640,64,640\nInit7 = AT+CGEQREQ=1,4,64,640,64,640\n```\n\n"
    },
    {
      "title": "Connect to the internet",
      "level": 2,
      "content": "Now just run wvdial to connect:\n\n```\n# wvdial\n```\n\nIf you see output reporting your PPP local and endpoint IP addresses, then it worked.\n\n"
    },
    {
      "title": "See also",
      "level": 2,
      "content": "- USB 3G Modem\n- ZTE MF626 / MF636\n- Thanks to the following web pages that gave me all this information: [1][dead link 2024-01-13 ⓘ][2]\n\n"
    }
  ]
}