{
  "title": "Dash",
  "url": "https://wiki.archlinux.org/title/Dash",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Related articles\n\n- Command-line shell\n- Bash\n\nDash (Debian Almquist shell) is a modern POSIX-compliant implementation of /bin/sh (sh, Bourne shell).\n\nDash is not Bash compatible, but Bash tries to be mostly compatible with POSIX, and thus Dash.\n\nDash shines in:\n\n- Speed of execution. Roughly 4x times faster than Bash and others.\n- Very limited resources (disk space, RAM or CPU). As minimalistic as possible - much smaller (134.1 kB vs 6.5 MB installed, 13 kSLOC vs 176 kSLOC) than Bash and others.\n- Security. Dash is a long-established, tiny project with simple and long-established functionality; one that is still very much alive, and with many active developers. Thus, Dash has a much smaller attack surface, while still having many eyes on its code.\n- If classic /bin/sh needed only.\n\n"
    },
    {
      "title": "Installation",
      "level": 2,
      "content": "Install dash or dash-static-muslAUR.\n\n"
    },
    {
      "title": "Use Dash as /bin/sh",
      "level": 2,
      "content": "Most POSIX compliant scripts specify /bin/sh at the first line of the script, which means it will run /bin/sh as the shell, which by default in Arch is a symlink to /bin/bash.\n\nYou can re-symlink /bin/sh to /bin/dash, which can improve system performance, but first you must verify that none of the scripts that are not explicitly #!/bin/bash require any of Bash's features and that all /bin/sh scripts are safely POSIX compliant.\n\n"
    },
    {
      "title": "Identifying bashisms",
      "level": 3,
      "content": "Features of bash that are not included in Dash ('bashisms') will not work without being explicitly pointed to /bin/bash. The following instructions will allow you to find any scripts that may need modification.\n\nInstall checkbashisms.\n\n"
    },
    {
      "title": "Common places to check",
      "level": 4,
      "content": "- All scripts in PATH with a #!/bin/sh shebang:\n\n```\n$ IFS=:; grep -Irl '#!/bin/sh' $PATH |xargs -r checkbashisms\n```\n\n- pacman -Qlq can be used to list all pacman-installed files.\n\n"
    },
    {
      "title": "Relinking /bin/sh",
      "level": 3,
      "content": "Once you have verified that it will not break any functionality, it should be safe to relink /bin/sh. To do so use the following command:\n\n```\n# ln -sfT dash /usr/bin/sh\n```\n\nUpdates of Bash will overwrite /bin/sh with the default symlink. To prevent this, use the following pacman hook, which will relink /bin/sh after every affected update:\n\n```\n[Trigger]\nType = Package\nOperation = Install\nOperation = Upgrade\nTarget = bash\n\n[Action]\nDescription = Re-pointing /bin/sh symlink to dash...\nWhen = PostTransaction\nExec = /usr/bin/ln -sfT dash /usr/bin/sh\nDepends = dash\n```\n\nThis is provided by dashbinshAUR.\n\n"
    },
    {
      "title": "See also",
      "level": 2,
      "content": "- https://lists.archlinux.org/archives/list/arch-dev-public@lists.archlinux.org/thread/5XCHETNECFDGMOJ4CXSS535ZMZ4UFYLZ/\n- https://launchpad.net/ubuntu/+spec/dash-as-bin-sh\n- https://wiki.ubuntu.com/DashAsBinSh\n\n"
    }
  ]
}