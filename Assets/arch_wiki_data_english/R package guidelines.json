{
  "title": "R package guidelines",
  "url": "https://wiki.archlinux.org/title/R_package_guidelines",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "32-bit – CLR – CMake – Cross – DKMS – Eclipse – Electron – Font – Free Pascal – GNOME – Go – Haskell – Java – KDE – Kernel modules – Lisp – Meson – MinGW – Node.js – Nonfree – OCaml – Perl – PHP – Python – R – Ruby – Rust - Security – Shell – VCS – Web – Wine\n\nThis document covers standards and guidelines on writing PKGBUILDs for R packages. Most information can be obtained by looking at the package's DESCRIPTION file. You can get most of this from inside R by running tools::CRAN_package_db(). You could also visit CRAN, Bioconductor link1, and Bioconductor link2 for all the R packages' information.\n\n"
    },
    {
      "title": "Package naming",
      "level": 2,
      "content": "Packages should be named r-pkgname, where pkgname is taken from the Package field from the DESCRIPTION file. The package name should be lowercase.\n\n"
    },
    {
      "title": "Package Version",
      "level": 2,
      "content": "Take it from the Version field. R allows packages to have colons and hyphens in their version, this is disallowed in PKGBUILDs. Convert these to a period or underscore.\n\n"
    },
    {
      "title": "Arch",
      "level": 2,
      "content": "See PKGBUILD#arch. If the package's CRAN webpage has NeedsCompilation: yes it is likely architecture-specific. Otherwise, it is likely not.\n\n"
    },
    {
      "title": "Dependencies",
      "level": 2,
      "content": "R packages listed in Depends, Imports, or the LinkingTo fields in a package's DESCRIPTION file should be listed under depends.\n\nR packages listed in Suggests should be listed as optdepends.\n\nSome packages require external tools, these are listed under SystemRequirements.\n\ngcc-fortran is needed as depends for some packages but is not always listed in the DESCRIPTION file.\n\n"
    },
    {
      "title": "Source",
      "level": 2,
      "content": "All R packages available on CRAN are available at the website https://cran.r-project.org/src/contrib/cranname_cranversion.tar.gz where cranname is the name of the package on CRAN and cranversion the cran version.\n\nR packages avalable on Bioconductor are available at the website https://bioconductor.org/packages/release/bioc/src/contrib/bcname_bcname.tar.gz or https://bioconductor.org/packages/release/data/annotation/src/contrib/bcname_bcname.tar.gz where bcname is the name of the package on Bioconductor and bcver the version.\n\n"
    },
    {
      "title": "Build and Package",
      "level": 2,
      "content": "R has built-in support for building packages. Here are three templates of PKGBUILDs for three repositories: MRAN, CRAN and Bioconductor. MRAN is a snapshot mirror of CRAN, using this template will allow the package to build even when out-of-date.\n\n"
    },
    {
      "title": "MRAN",
      "level": 3,
      "content": "```\n_cranname=\n_cranver=\n_updatedate=YYYY-MM-DD\npkgname=r-${_cranname,,}\npkgver=${_cranver//[:-]/.}\npkgrel=1\npkgdesc=\"\"\narch=()\nurl=\"https://cran.r-project.org/package=${_cranname}\"\nlicense=()\ndepends=(r)\nmakedepends=()\noptdepends=()\nsource=(\"https://cran.microsoft.com/snapshot/${_updatedate}/src/contrib/${_cranname}_${_cranver}.tar.gz\")\nsha256sums=()\n\nbuild() {\n  R CMD INSTALL ${_cranname}_${_cranver}.tar.gz -l \"${srcdir}\"\n}\n\npackage() {\n  install -dm0755 \"${pkgdir}/usr/lib/R/library\"\n\n  cp -a --no-preserve=ownership \"${_cranname}\" \"${pkgdir}/usr/lib/R/library\"\n}\n```\n\n"
    },
    {
      "title": "CRAN",
      "level": 3,
      "content": "```\n_cranname=\n_cranver=\npkgname=r-${_cranname,,}\npkgver=${_cranver//[:-]/.}\npkgrel=1\npkgdesc=\"\"\narch=()\nurl=\"https://cran.r-project.org/package=${_cranname}\"\nlicense=()\ndepends=(r)\nmakedepends=()\noptdepends=()\nsource=(\"https://cran.r-project.org/src/contrib/${_cranname}_${_cranver}.tar.gz\")\nsha256sums=()\n\nbuild() {\n  R CMD INSTALL ${_cranname}_${_cranver}.tar.gz -l \"${srcdir}\"\n}\n\npackage() {\n  install -dm0755 \"${pkgdir}/usr/lib/R/library\"\n\n  cp -a --no-preserve=ownership \"${_cranname}\" \"${pkgdir}/usr/lib/R/library\"\n}\n```\n\n"
    },
    {
      "title": "Bioconductor",
      "level": 3,
      "content": "```\n_bcname=\n_bcver=\npkgname=r-${_bcname,,}\npkgver=${_bcver//[:-]/.}\npkgrel=1\npkgdesc=\"\"\narch=()\nurl=\"https://bioconductor.org/packages/${_bcname}\"\nlicense=()\ndepends=(r)\nmakedepends=()\noptdepends=()\nsource=(\"https://bioconductor.org/packages/release/bioc/src/contrib/${_bcname}_${_bcver}.tar.gz\")\n# or\n# source=(\"https://bioconductor.org/packages/release/data/annotation/src/contrib/${_bcname}_${_bcver}.tar.gz\")\nsha256sums=()\n\nbuild() {\n  R CMD INSTALL ${_bcname}_${_bcver}.tar.gz -l \"${srcdir}\"\n}\n\npackage() {\n  install -dm0755 \"${pkgdir}/usr/lib/R/library\"\n  \n  cp -a --no-preserve=ownership \"${_bcname}\" \"${pkgdir}/usr/lib/R/library\"\n}\n```\n\n"
    },
    {
      "title": "Bioconductor repository",
      "level": 3,
      "content": "To access the bioconductor packages easily, you can add the bioarchlinux repository.\n\n"
    }
  ]
}