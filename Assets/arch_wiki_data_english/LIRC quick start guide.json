{
  "title": "LIRC quick start guide",
  "url": "https://wiki.archlinux.org/title/LIRC_quick_start_guide",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Note: **This article or section is a candidate for merging with LIRC.** This article or section is a candidate for merging with LIRC.\n\nThis article or section is a candidate for merging with LIRC.\n\nRelated articles\n\n- LIRC\n\nStep-by-step LIRC setup guide for USB (MCE [Media Center Edition]) IR receiver with universal remote control.\n\nThis is a quick-start guide only. Please refer to man pages of the commands and files used and online documentation for in-depth help.\n\n"
    },
    {
      "title": "Prerequisites",
      "level": 2,
      "content": "- Get a USB IR receiver, preferably an MCE model which is almost always supported out-of-the-box.\n- Re-purpose an old universal remote control you have lying around the house.\n\n"
    },
    {
      "title": "Setup",
      "level": 2,
      "content": "Note: **This article or section needs expansion.** This article or section needs expansion.\n\nThis article or section needs expansion.\n\n1. Connect the USB IR receiver.\n1. Ensure there are fully charged batteries in your remote control.\n1. Get some kind of output/response from the remote using mode2: # mode2 Point the remote control at the IR receiver and press some buttons. This will attempt to autodetect the correct input device using the default \"devinput\" driver. However, this might not work without manual configuration of protocols.\n1. If no button presses are detected for most keys, change IR protocols. If you get no response to the remote control buttons you want to use, you likely need to enable different protocols:# ir-keytable -p <protocol> -p <protocol> ... Look at the output of ir-keytable (as well as cat /sys/class/rc/rc0/protocols). When you have problems, run ir-keytable -p all as root.\n1. If no button presses are detected for most keys, try different universal remote control device modes. You may also need to try different universal remote control device modes (TV, DVD, Audio, etc., buttons) in order to detect button presses when you are getting started. (You could possibly reprogram the universal remote's modes, but that would likely be a long trial-and-error process to find a setting that works.)\n1. After reconfiguring IR protocols and remote control device mode, retest: # mode2 Point the remote control at the IR receiver and press some buttons. If button presses for most keys are not detected repeat the prior two steps until they are (or just run ir-keytable -p all as root).\n1. If you have narrowed down what protocols you need to support for your remote control, set them: # ir-keytable -p sony -p rc-5 Otherwise, you can just use all protocols: # ir-keytable -p all\n1. Determine the correct device for your IR receiver. Use either the default \"devinput\" driver or the older \"default\" driver: $ mode2 --driver devinput --list-devices $ mode2 --driver default --list-devices $ ir-keytable\n1. Use the device found for your USB IR receiver, e.g., /dev/input/event11: # mode2 --driver devinput --device /dev/input/event11 or just try: # mode2 --driver devinput --device auto See if button presses are detected.\n1. If required, edit /etc/lirc/lirc_options.conf, e.g., if you are using the driver \"default\" instead of \"devinput\".\n1. Test your remote to see if scancodes are printed: # ir-keytable -t See if button presses are detected.\n1. Use a drop-in file: /etc/systemd/system/lircd.service.d/override.conf. At the [Service] section add the following line: ExecStartPost=/usr/bin/ir-keytable -p protocol -p protocol where each protocol string is replaced by the protocol(s) you need (or just use /usr/bin/ir-keytable -p all).\n1. Start the lirc daemon, lircd.service, so you can record keypresses in order to write an lircd configuration file for your remote control.\n1. Use irrecord to record keypress scancodes. Run: # irrecord to save/record the keystrokes to be used for your application. Follow irrecord's instructions.\n1. Install the recorded lircd configuration file: # mv device_name.lircd.conf /etc/lirc/lircd.conf.d/# chown root:root /etc/lirc/lircd.conf.d/device_name.lircd.conf\n1. Move devinput.lircd.conf to devinput.lircd.dist to disable it, because you are not using an IR keyboard and/or mouse, just the IR receiver: # mv /etc/lirc/lircd.conf.d/devinput.lircd.conf /etc/lirc/lircd.conf.d/devinput.lircd.dist\n1. Restart lircd.service so you use the newly created lircd configuration file.\n1. Test to make sure the keys you recorded are correctly detected, that is, the correct key symbol is output for each button you press: $ irw See if the correct key symbols are reported, and if repeated signals are properly rejected.\n\n```\n# mode2\n```\n\n```\n# ir-keytable -p <protocol> -p <protocol> ...\n```\n\n```\n# mode2\n```\n\n```\n# ir-keytable -p sony -p rc-5\n```\n\n```\n# ir-keytable -p all\n```\n\n```\n$ mode2 --driver devinput --list-devices\n$ mode2 --driver default --list-devices\n$ ir-keytable\n```\n\n```\n# mode2 --driver devinput --device /dev/input/event11\n```\n\n```\n# mode2 --driver devinput --device auto\n```\n\n```\n# ir-keytable -t\n```\n\n```\nExecStartPost=/usr/bin/ir-keytable -p protocol -p protocol\n```\n\n```\n# irrecord\n```\n\n```\n# mv device_name.lircd.conf /etc/lirc/lircd.conf.d/# chown root:root /etc/lirc/lircd.conf.d/device_name.lircd.conf\n```\n\n```\n# mv /etc/lirc/lircd.conf.d/devinput.lircd.conf /etc/lirc/lircd.conf.d/devinput.lircd.dist\n```\n\n```\n$ irw\n```\n\n"
    },
    {
      "title": "Keypresses are not detected",
      "level": 3,
      "content": "Follow #Setup.\n\n"
    },
    {
      "title": "Repeated keypress events",
      "level": 3,
      "content": "If you are having keypress repeating problems (each button press is echoed multiple times), examine the output of irw. The second column value is the repeat count. This will increment when repeated signals are detected. Each decoded button press with its count reset to \"00\" is reported as a separate button press event by lircd.\n\nTo fix this problem, generally the \"gap\" parameter sampled by irrecord in the device_name.lircd.conf file should be adjusted, often to a much larger value (e.g., from 44968 up to 113975).\n\nAfter editing/adjusting any lircd configuration file, be sure to restart lircd (as shown above).\n\n"
    },
    {
      "title": "Final configuration",
      "level": 2,
      "content": "Write an lircrc file for your end user application. This file is used by all client programs built with lirc support that attach to lircd to read IR control events. Edit ~/.lircrc to issue commands to the program to be controlled. Test this configuration by running:\n\n```\n$ ircat prog\n```\n\nto see if the correct \"config\" strings for program prog are being output when you press all the buttons you wish to use. Note: If ~/.lircrc is not read by your application or just does not work, an alternate default location is ~/.config/lircrc.\n\n"
    },
    {
      "title": "Final testing",
      "level": 2,
      "content": "Finally, run your end user application and test remote control button presses to control it. If it works, you are done! If not, review and repeat the above sections as necessary to get each configuration step working before proceeding to the next step or section.\n\n"
    }
  ]
}