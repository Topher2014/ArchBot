{
  "title": "Offline instalace",
  "url": "https://wiki.archlinux.org/title/Offline_instalace",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Související články\n\n- Offline installation of packages\n\nTento článek je návod jak nainstalovat Arch Linux na systému bez připojení k Internetu; samozřejmě je potřeba dalšího zařízení, které je připojené k Internetu.\n\nPrvně následujte instalační příručku a přeskočte část \"Připojte se k internetu\". Zastavte se pak na Nainstalujte potřebné balíčky.\n\n"
    },
    {
      "title": "Připravte si lokální repozitář",
      "level": 2,
      "content": "Následujte kroky z Pacman/Tipy a triky#Instalace balíčků z CD/DVD nebo USB, abyste si připravili lokální repozitář s potřebnými soubory na jiném zařízení.\n\nPro provozuschopný systém, doporučujeme si obstarat tyto balíčky:\n\n```\n# pacman -Syw --cachedir . --dbpath /tmp/blankdb base base-devel linux linux-firmware systemd mkinitcpio vim\n```\n\nVytvořte svůj offline repozitář\n\n```\n# repo-add ./custom.db.tar.gz ./*[^sig]\n```\n\n"
    },
    {
      "title": "Nasazení a nastavování",
      "level": 2,
      "content": "Až budete mít repozitář připravený, připojte externí úložiště do offline zařízení a nasaďte úložiště na nově vytvořený root souborový systém:\n\n```\n# mount --mkdir /dev/sdxy /mnt/repo\n```\n\nUpravte své archiso /etc/pacman.conf a přidejte novou část:\n\n```\n[custom]\nSigLevel = Optional\nServer = file:///mnt/repo/\n```\n\nOdkomentujte [core] a [extra], aby se pacman z nich nepokoušel stahovat balíčky.\n\n"
    },
    {
      "title": "Pacstrap",
      "level": 2,
      "content": "Nyní můžete pacstrapnout svoje lokálně dostupné balíčky na offline zařízení:\n\n```\n# pacstrap -K /mnt base base-devel linux linux-firmware mkinitcpio systemd vim\n```\n\n"
    },
    {
      "title": "Chroot",
      "level": 2,
      "content": "Pokud daný systém má zůstat offline, měl by být nastaven, aby pouze očekával lokální repozitáře.\n\nPo chrootování do offline zařízení, upravte /etc/pacman.confi stejně jako minule (samozřejmě bez /mnt):\n\n```\n[custom]\nSigLevel = Optional\nServer = file:///repo/\n```\n\nOdkomentujte ostatní repozitáře a uložte. Pokračujte v nastavování systému jako obvykle.\n\nOdteď každé aktualizace offline systému mohou být učiněny novější kopií lokálního repozitáře a nasazením na /repo. Pak stačí pouze spustit pacmana jako obvykle.\n\n"
    }
  ]
}