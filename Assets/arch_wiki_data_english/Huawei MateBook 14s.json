{
  "title": "Huawei MateBook 14s",
  "url": "https://wiki.archlinux.org/title/Huawei_MateBook_14s",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Table content:\nHardware | PCI/USB ID | Working?\nTouchpad | 27C6:01E0 | Yes\nTouchscreen | 27C6:0114 | Yes\nKeyboard | PS/2 | Yes\nWebcam | 3408:c200 | Yes\nBluetooth | 8087:0026 | Yes\nAudio | 8086:a0c8 | Partial\nWi-Fi | 8086:a0f0 | Yes\nFingerprint reader | 27c6:5125 | No\n\n"
    },
    {
      "title": "Installation",
      "level": 2,
      "content": "Secure Boot must be disabled in the BIOS to boot an Arch Linux install medium. Other than that, the installation can proceed normally.\n\n"
    },
    {
      "title": "Accessibility",
      "level": 2,
      "content": "The BIOS is text-based, OCR-friendly, and usable with the keyboard only.\n\n"
    },
    {
      "title": "Firmware",
      "level": 2,
      "content": "fwupd detects the SSD, serial bus controller, USB camera, USB4 host controller, system firmware, and UEFI device firmware.\n\n"
    },
    {
      "title": "Function keys",
      "level": 2,
      "content": "To make function keys trigger F1â€“F12 by default and special functions with Fn, write 1 to /sys/devices/platform/huawei-wmi/fn_lock_state. This setting survives reboots, so writing once suffices.\n\nTable content:\nKey | Visible?1 | Marked?2 | Effect\nFn+F1 | Yes | Yes | XF86MonBrightnessDown\nFn+F2 | Yes | Yes | XF86MonBrightnessUp\nFn+F3 | Yes3 | Yes | Cycle keyboard backlight (no/low/high)\nFn+F4 | Yes | Yes | XF86AudioMute\nFn+F5 | Yes | Yes | XF86AudioLowerVolume\nFn+F6 | Yes | Yes | XF86AudioRaiseVolume\nDictation key (above 7) | Yes3 | Yes | Does nothing by default\nFn+F7 | Yes | Yes | XF86AudioMicMute\nFn+F8 | No | Yes | Super+p\nFn+F9 | Yes3 | Yes | Toggles Wi-Fi via rfkill\nFn+F10 | Yes | Yes | XF86Tools\nFn+F11 | Yes | Yes | PrintScreen\nFn+F12 | Yes | Yes | Ins\nFn+r | Yes3 | No | Nothing; supposed to toggle display refresh rate between 60 and 90Hz\nFn+p | Yes3 | No | Nothing; supposed to toggle performance mode\nFn+Left | Yes | No | Home\nFn+Right | Yes | No | End\nFn+Up | Yes | No | PageUp\nFn+Down | Yes | No | PageDown\n\n1. The key is visible to xev and similar tools\n1. The physical key has a symbol on it, which describes its function\n1. Not visible to xev by default, but detected by the kernel (Unknown key pressed) and can be handled as described in map scancodes to keycodes.\n\n"
    },
    {
      "title": "Audio",
      "level": 2,
      "content": "Sound Open Firmware is required. The speakers and microphones work well but not perfectly out of the box; the audio jack has some issues which are being addressed[1].\n\nUntil the issue is fixed upstream, some workarounds can make the device usable.\n\n"
    },
    {
      "title": "Headphones",
      "level": 3,
      "content": "To use headphones plugged in the audio jack, until the fixes are incorporated upstream, you can use this workaround [2] (which uses hda-verb from alsa-tools):\n\n"
    },
    {
      "title": "Enable speaker and disable headphones",
      "level": 4,
      "content": "First, move the output to the speaker DAC:\n\n```\n# hda-verb /dev/snd/hwC0D0 0x16 0x701 0x0001\n```\n\nThen, enable the speaker:\n\n```\n# hda-verb /dev/snd/hwC0D0 0x17 0x70C 0x0002\n```\n\nFinally, disable the headphones:\n\n```\n# hda-verb /dev/snd/hwC0D0 0x1 0x715 0x2\n```\n\n"
    },
    {
      "title": "Disable a speaker and enable headphones",
      "level": 4,
      "content": "First, move the output to the headphones DAC:\n\n```\n# hda-verb /dev/snd/hwC0D0 0x16 0x701 0x0000\n```\n\nThen, disable the speaker:\n\n```\n# hda-verb /dev/snd/hwC0D0 0x17 0x70C 0x0000\n```\n\nAfterwards, pin the output mode:\n\n```\n# hda-verb /dev/snd/hwC0D0 0x1 0x717 0x2\n```\n\nThen, enable the pin:\n\n```\n# hda-verb /dev/snd/hwC0D0 0x1 0x716 0x2\n```\n\nFinally, clear the pin value:\n\n```\n# hda-verb /dev/snd/hwC0D0 0x1 0x715 0x0\n```\n\nIn both cases, if using ALSA ensure the outputs are unmuted using alsamixer or amixer; if using PulseAudio, ensure the correct output (speaker/headphone) is selected using pactl set-sink-port or pavucontrol.\n\n"
    },
    {
      "title": "ALSA",
      "level": 3,
      "content": "With plain ALSA you will have issues with simultaneous audio output from multiple sources that can be fixed with the following:\n\n```\n/etc/modprobe.d/audio.conf\n```\n\n```\noptions snd-intel-dspcfg dsp_driver=3\n```\n\nwhich unfortunately renders the microphones unusable.\n\n"
    },
    {
      "title": "PulseAudio",
      "level": 3,
      "content": "If using PulseAudio, both simultaneous audio output and the microphones will kind of work (only the two left microphones). However, to have audio output through the speakers you should run the hda-verb script from #Enable speaker and disable headphones after launching PulseAudio.\n\n"
    },
    {
      "title": "Battery protection",
      "level": 2,
      "content": "The huawei_wmi driver is available in the mainline kernel.\n\nYou can set the thresholds by writing directly to the file:\n\n```\n# echo '40 70' > /sys/devices/platform/huawei-wmi/charge_control_thresholds\n```\n\nor you can use tools such as TLP:\n\n```\n/etc/tlp.conf\n```\n\n```\nSTART_CHARGE_THRESH_BAT0=40\nSTOP_CHARGE_THRESH_BAT0=70\n```\n\n"
    },
    {
      "title": "Display",
      "level": 2,
      "content": "The native resolution (2520x1680) is fully recognized and the refresh rate is set to 90Hz but it can be changed to 60Hz and 48Hz. Decreasing the refresh rate means less screen fluidity but also longer battery life\n\n"
    }
  ]
}