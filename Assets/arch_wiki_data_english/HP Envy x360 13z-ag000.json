{
  "title": "HP Envy x360 13z-ag000",
  "url": "https://wiki.archlinux.org/title/HP_Envy_x360_13z-ag000",
  "sections": [
    {
      "title": "Introduction",
      "level": 1,
      "content": "Note: **This article or section does not follow the Laptop page guidelines.** This article or section does not follow the Laptop page guidelines.\n\nThis article or section does not follow the Laptop page guidelines.\n\nThe HP Envy X360 13z-ag000 was released in 2018. It has variable processors/ram and displays, from a Ryzen Mobile 2300U to a 2700U, from 4GB RAM to 16GB RAM, and a 1080p display to a 4K display.\n\nTable content:\nHardware | PCI/USB ID | Working?\nGPU | 1002:15dd | Yes\nWiFi | 10ec:b822 | Yes\nBluetooth | 0bda:b00b | Yes\nAudio | 1022:15e3 | Yes\nTouchpad | PS/2 | Yes\nCamera | 04f2:b653 | Yes\nIR Camera | 04f2:b654 | Yes\nCard reader | 10ec:522a | Untested\nSensors | 1022:15e4 | No\n\n"
    },
    {
      "title": "Installation",
      "level": 2,
      "content": "This laptop has Secure Boot enabled by default. To start the installer you need to disable it in the UEFI. Then you can just boot the installer in UEFI mode and just install like a normal UEFI system.\n\nThere appears to be an option to use your own Secure Boot keys.\n\n"
    },
    {
      "title": "Battery and Power Management",
      "level": 2,
      "content": "4 hour of battery life because of the 4K display.\n\n"
    },
    {
      "title": "Display, Video Card",
      "level": 2,
      "content": "The integrated Vega GPU works with the AMDGPU drivers. GDK_SCALE=2 is somewhat necessary for most applications.\n\n"
    },
    {
      "title": "Audio",
      "level": 2,
      "content": "The Bang & Olufsen top soundbar is disabled by default. You can activate it by using the hdajackretask utility provided by alsa-tools. More information can be found in this thread: https://bugzilla.kernel.org/show_bug.cgi?id=189331.\n\nThe exact pinout can be found in this attachment: https://bugzilla.kernel.org/attachment.cgi?id=282109&action=edit.\n\n```\nOptions : [x] Show unconnected\n             [ ] Set model  =  auto\n             [X] Advanced ovveride\n             [ ] Parser hints\n```\n\n```\nPin ID; 0x14 \n   [x] Override\n   Connectivity : Jack; Location : Internal; Device : Speaker; Jack : Other Analog\n   Color : Unknown; Jack detection : Not present; Channel group : 5; Channel : Front\n```\n\n```\nPin ID: 0x17\n   [X] Override\n   Connectivity : Jack; Location : Internal; Device : Speaker; Jack : Other Analog\n   Color : Unknown; Jack detection : Not present; Channel group : 5; Channel : Back\n```\n\n"
    },
    {
      "title": "Touchscreen and Stylus",
      "level": 2,
      "content": "Kernel 4.19.5 or greater is needed. [1] [2]\n\nThe built in ELAN digitizer does not use the wacom driver by default, but it can be configured to do so. Switching to the wacom driver allows easier configuration of the digitizer and pen through tools like xsetwacom. This can be achieved with the following xorg configuration file:\n\n```\n/etc/X11/xorg.conf.d/99-ELAN-stylus.conf\n```\n\n```\nSection \"InputClass\"\n    Identifier \"Elan driver override\"\n    MatchUSBID \"04f3:*\"\n    MatchDevicePath \"/dev/input/event*\"\n    MatchIsTablet \"true\"\n    Driver \"wacom\"\nEndSection\n```\n\nAfter a reboot xsetwacom should now correctly register the device.\n\n```\n$ xsetwacom --list devices\n```\n\n```\nELAN0732:00 04F3:262A stylus    \tid: 13\ttype: STYLUS    \nELAN0732:00 04F3:262A eraser    \tid: 18\ttype: ERASER\n```\n\nYou can use xinput to probe the different devices and find out what actions get triggered by which buttons. For instance, the \"wacom bamboo ink\" pen triggers the eraser device while touching the screen while maintaining the second side button pressed.\n\n```\n$ xinput test $deviceID\n```\n\nThe following simple example script will bind rightclick to the eraser device.\n\n```\ndevice=$(xsetwacom --list | grep -i \"eraser\" |  awk '{print $(NF-2)}') \nxsetwacom --set \"$device\" button 1 3\n```\n\n"
    },
    {
      "title": "Orientation Sensor",
      "level": 2,
      "content": "No IIO sensors are enumerated as of 4.18-rc7, even with all possible IIO modules compiled. iio-sensor-proxy (from iio-sensor-proxy) returns no sensors detected.\n\n"
    },
    {
      "title": "Wireless Networking",
      "level": 2,
      "content": "Using the aspm=0 kernel parameter seems to prevent the card from dropping offline as much, but also worsens battery life.\n\n"
    },
    {
      "title": "Hard Drive",
      "level": 2,
      "content": "Built-in NVMe drive works with advertised speed. Blockdevices are located at /dev/nvme0n1p*.\n\n"
    }
  ]
}